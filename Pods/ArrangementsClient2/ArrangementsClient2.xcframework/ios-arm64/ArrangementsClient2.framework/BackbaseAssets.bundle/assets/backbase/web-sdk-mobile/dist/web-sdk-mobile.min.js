/**
 * @license
 * Backbase Web SDK for Android and iOS webviews - Copyright Â© Backbase B.V - All Rights Reserved
 * Version 6.1.1
 * https://www.backbase.com
 */
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){},{}],2:[function(require,module,exports){"use strict";var VERSION="0.4.0";var LOG_VERSION=0;var CALL_STACK_ERROR="call-stack-error";function objCopy(obj){if(typeof obj==="undefined"||obj===null){return obj}else if(Array.isArray(obj)){return obj.slice()}else if(typeof obj==="object"){var copy={};Object.keys(obj).forEach(function(k){copy[k]=obj[k]});return copy}else{return obj}}var inspect=function(obj){if(typeof obj==="undefined"){return"undefined"}if(obj===null){return"null"}if(Array.isArray(obj)){var items=obj.map(function(obj){return inspect(obj)});return"[ "+items.join(", ")+" ]"}if(typeof obj==="object"){return JSON.stringify(obj)}if(typeof obj==="function"){return"[Function: "+obj.name+"]"}if(typeof obj==="boolean"||typeof obj==="number"){return obj}return"'"+obj.toString()+"'"};var format=function(f){if(typeof f!=="string"){var objects=new Array(arguments.length);for(var index=0;index<arguments.length;index++){objects[index]=inspect(arguments[index])}return objects.join(" ")}var formatRegExp=/%[sdj%]/g;var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%"){return"%"}if(i>=len){return x}switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}break;default:return x}});for(var x=args[i];i<len;x=args[++i]){str+=" "+x}return str};function extractSrcFromStacktrace(stack,level){var stackLines=stack.split("\n");if(stackLines[0]&&stackLines[0].indexOf(CALL_STACK_ERROR)>=0){stackLines.shift()}var targetLine=stackLines[level];var lineInfo=null;if(targetLine){var execResult=/^\s*(at|.*@)\s*(.+)?$/.exec(targetLine);if(Array.isArray(execResult)&&execResult[2]){lineInfo=execResult[2]}else{lineInfo=targetLine}}return lineInfo}function _indent(s,indent){if(!indent){indent="    "}var lines=s.split(/\r?\n/g);return indent+lines.join("\n"+indent)}function _warn(msg,dedupKey){if(dedupKey){if(_warned[dedupKey]){return}_warned[dedupKey]=true}console.error(msg+"\n")}function _haveWarned(dedupKey){return _warned[dedupKey]}var _warned={};function ConsoleRawStream(){}ConsoleRawStream.prototype.write=function(rec){if(rec.level<INFO){console.log(rec)}else if(rec.level<WARN){console.info(rec)}else if(rec.level<ERROR){console.warn(rec)}else{console.error(rec)}if(rec.err&&rec.err.stack){console.error(rec.err.stack)}if(rec.obj){console.log(rec.obj)}};function ConsoleFormattedStream(opts){opts=opts||{};this.logByLevel=!!opts.logByLevel}ConsoleFormattedStream.prototype.write=function(rec){var levelCss,defaultCss="color: DimGray",msgCss="color: SteelBlue",srcCss="color: DimGray; font-style: italic; font-size: 0.9em",consoleMethod;var loggerName=rec.childName?rec.name+"/"+rec.childName:rec.name;var levelName=nameFromLevel[rec.level];var formattedLevelName=(Array(6-levelName.length).join(" ")+levelName).toUpperCase();if(this.logByLevel){if(rec.level===TRACE){levelName="debug"}else if(rec.level===FATAL){levelName="error"}consoleMethod=typeof console[levelName]==="function"?console[levelName]:console.log}else{consoleMethod=console.log}if(rec.level<DEBUG){levelCss="color: DeepPink"}else if(rec.level<INFO){levelCss="color: GoldenRod"}else if(rec.level<WARN){levelCss="color: DarkTurquoise"}else if(rec.level<ERROR){levelCss="color: Purple"}else if(rec.level<FATAL){levelCss="color: Crimson"}else{levelCss="color: Black"}function padZeros(number,len){return Array(len+1-(number+"").length).join("0")+number}var logArgs=[];logArgs.push("[%s:%s:%s:%s] %c%s%c: %s: %c%s %c%s");logArgs.push(padZeros(rec.time.getHours(),2));logArgs.push(padZeros(rec.time.getMinutes(),2));logArgs.push(padZeros(rec.time.getSeconds(),2));logArgs.push(padZeros(rec.time.getMilliseconds(),4));logArgs.push(levelCss);logArgs.push(formattedLevelName);logArgs.push(defaultCss);logArgs.push(loggerName);logArgs.push(msgCss);logArgs.push(rec.msg);if(rec.src){logArgs.push(srcCss);logArgs.push(rec.src)}consoleMethod.apply(console,logArgs);if(rec.err&&rec.err.stack){consoleMethod.call(console,"%c%s,",levelCss,rec.err.stack)}if(rec.obj){consoleMethod.call(console,rec.obj)}};var TRACE=10;var DEBUG=20;var INFO=30;var WARN=40;var ERROR=50;var FATAL=60;var levelFromName={trace:TRACE,debug:DEBUG,info:INFO,warn:WARN,error:ERROR,fatal:FATAL};var nameFromLevel={};Object.keys(levelFromName).forEach(function(name){nameFromLevel[levelFromName[name]]=name});function resolveLevel(nameOrNum){var level=typeof nameOrNum==="string"?levelFromName[nameOrNum.toLowerCase()]:nameOrNum;return level}function Logger(options,_childOptions,_childSimple){if(!(this instanceof Logger)){return new Logger(options,_childOptions)}var parent;if(_childOptions!==undefined){parent=options;options=_childOptions;if(!(parent instanceof Logger)){throw new TypeError("invalid Logger creation: do not pass a second arg")}}if(!options){throw new TypeError("options (object) is required")}if(!parent){if(!options.name){throw new TypeError("options.name (string) is required")}}else{if(options.name){throw new TypeError("invalid options.name: child cannot set logger name")}}if(options.stream&&options.streams){throw new TypeError('cannot mix "streams" and "stream" options')}if(options.streams&&!Array.isArray(options.streams)){throw new TypeError("invalid options.streams: must be an array")}if(options.serializers&&(typeof options.serializers!=="object"||Array.isArray(options.serializers))){throw new TypeError("invalid options.serializers: must be an object")}var fields,name,i;if(parent&&_childSimple){this._isSimpleChild=true;this._level=parent._level;this.streams=parent.streams;this.serializers=parent.serializers;this.src=parent.src;fields=this.fields={};var parentFieldNames=Object.keys(parent.fields);for(i=0;i<parentFieldNames.length;i++){name=parentFieldNames[i];fields[name]=parent.fields[name]}var names=Object.keys(options);for(i=0;i<names.length;i++){name=names[i];fields[name]=options[name]}return}var self=this;if(parent){this._level=parent._level;this.streams=[];for(i=0;i<parent.streams.length;i++){var s=objCopy(parent.streams[i]);s.closeOnExit=false;this.streams.push(s)}this.serializers=objCopy(parent.serializers);this.src=parent.src;this.fields=objCopy(parent.fields);if(options.level){this.level(options.level)}}else{this._level=Number.POSITIVE_INFINITY;this.streams=[];this.serializers=null;this.src=false;this.fields={}}if(options.stream){self.addStream({type:"stream",stream:options.stream,closeOnExit:false,level:options.level})}else if(options.streams){options.streams.forEach(function(s){self.addStream(s,options.level)})}else if(parent&&options.level){this.level(options.level)}else if(!parent){self.addStream({type:"raw",stream:new ConsoleRawStream,closeOnExit:false,level:options.level})}if(options.serializers){self.addSerializers(options.serializers)}if(options.src){this.src=true}fields=objCopy(options);delete fields.stream;delete fields.level;delete fields.streams;delete fields.serializers;delete fields.src;if(this.serializers){this._applySerializers(fields)}Object.keys(fields).forEach(function(k){self.fields[k]=fields[k]})}Logger.prototype.addStream=function addStream(s,defaultLevel){var self=this;if(defaultLevel===null||defaultLevel===undefined){defaultLevel=INFO}s=objCopy(s);s.type="raw";if(s.level){s.level=resolveLevel(s.level)}else{s.level=resolveLevel(defaultLevel)}if(s.level<self._level){self._level=s.level}if(!s.closeOnExit){s.closeOnExit=false}self.streams.push(s);delete self.haveNonRawStreams};Logger.prototype.addSerializers=function addSerializers(serializers){var self=this;if(!self.serializers){self.serializers={}}Object.keys(serializers).forEach(function(field){var serializer=serializers[field];if(typeof serializer!=="function"){throw new TypeError(format('invalid serializer for "%s" field: must be a function',field))}else{self.serializers[field]=serializer}})};Logger.prototype.child=function(options,simple){return new this.constructor(this,options||{},simple)};Logger.prototype.level=function level(value){if(value===undefined){return this._level}var newLevel=resolveLevel(value);var len=this.streams.length;for(var i=0;i<len;i++){this.streams[i].level=newLevel}this._level=newLevel};Logger.prototype.levels=function levels(name,value){if(name===undefined){return this.streams.map(function(s){return s.level})}var stream;if(typeof name==="number"){stream=this.streams[name];if(stream===undefined){throw new Error("invalid stream index: "+name)}}else{var len=this.streams.length;for(var i=0;i<len;i++){var s=this.streams[i];if(s.name===name){stream=s;break}}if(!stream){throw new Error(format('no stream with name "%s"',name))}}if(value===undefined){return stream.level}else{var newLevel=resolveLevel(value);stream.level=newLevel;if(newLevel<this._level){this._level=newLevel}}};Logger.prototype._applySerializers=function(fields,excludeFields){var self=this;Object.keys(this.serializers).forEach(function(name){if(fields[name]===undefined||excludeFields&&excludeFields[name]){return}try{fields[name]=self.serializers[name](fields[name])}catch(err){_warn(format('bunyan: ERROR: Exception thrown from the "%s" '+"Bunyan serializer. This should never happen. This is a bug"+"in that serializer function.\n%s",name,err.stack||err));fields[name]=format('(Error in Bunyan log "%s" serializer broke field. See stderr for details.)',name)}})};Logger.prototype._emit=function(rec,noemit){var i;if(this.haveNonRawStreams===undefined){this.haveNonRawStreams=false;for(i=0;i<this.streams.length;i++){if(!this.streams[i].raw){this.haveNonRawStreams=true;break}}}var str;if(noemit||this.haveNonRawStreams){try{str=JSON.stringify(rec,safeCycles())+"\n"}catch(e){var dedupKey=e.stack.split(/\n/g,2).join("\n");_warn("bunyan: ERROR: Exception in "+"`JSON.stringify(rec)`. You can install the "+'"safe-json-stringify" module to have Bunyan fallback '+"to safer stringification. Record:\n"+_indent(format("%s\n%s",rec,e.stack)),dedupKey);str=format("(Exception in JSON.stringify(rec): %j. See stderr for details.)\n",e.message)}}if(noemit){return str}var level=rec.level;for(i=0;i<this.streams.length;i++){var s=this.streams[i];if(s.level<=level){s.stream.write(rec)}}return str};function mkLogEmitter(minLevel){return function(){var log=this;function mkRecord(args){var excludeFields;if(args[0]instanceof Error){fields={err:log.serializers&&log.serializers.err?log.serializers.err(args[0]):Logger.stdSerializers.err(args[0])};excludeFields={err:true};if(args.length===1){msgArgs=[fields.err.message]}else{msgArgs=Array.prototype.slice.call(args,1)}}else if(typeof args[0]!=="object"&&args[0]!==null||Array.isArray(args[0])){fields=null;msgArgs=Array.prototype.slice.call(args)}else{fields=args[0];if(args.length===1&&fields.err&&fields.err instanceof Error){msgArgs=[fields.err.message]}else{msgArgs=Array.prototype.slice.call(args,1)}}var rec=objCopy(log.fields);rec.level=minLevel;var recFields=fields?objCopy(fields):null;if(recFields){if(log.serializers){log._applySerializers(recFields,excludeFields)}Object.keys(recFields).forEach(function(k){rec[k]=recFields[k]})}rec.levelName=nameFromLevel[minLevel];rec.msg=msgArgs.length?format.apply(log,msgArgs):"";if(!rec.time){rec.time=new Date}if(log.src&&!rec.src){try{throw new Error(CALL_STACK_ERROR)}catch(err){var src=extractSrcFromStacktrace(err.stack,2);if(!src&&!_haveWarned("src")){_warn("Unable to determine src line info","src")}rec.src=src||""}}rec.v=LOG_VERSION;return rec}var fields=null;var msgArgs=arguments;var rec=null;if(arguments.length===0){return this._level<=minLevel}else if(this._level>minLevel){}else{rec=mkRecord(msgArgs);this._emit(rec)}}}Logger.prototype.trace=mkLogEmitter(TRACE);Logger.prototype.debug=mkLogEmitter(DEBUG);Logger.prototype.info=mkLogEmitter(INFO);Logger.prototype.warn=mkLogEmitter(WARN);Logger.prototype.error=mkLogEmitter(ERROR);Logger.prototype.fatal=mkLogEmitter(FATAL);Logger.stdSerializers={};function getFullErrorStack(ex){var ret=ex.stack||ex.toString();if(ex.cause&&typeof ex.cause==="function"){var cex=ex.cause();if(cex){ret+="\nCaused by: "+getFullErrorStack(cex)}}return ret}Logger.stdSerializers.err=function(err){if(!err||!err.stack){return err}var obj={message:err.message,name:err.name,stack:getFullErrorStack(err),code:err.code,signal:err.signal};return obj};function safeCycles(){var seen=[];return function(key,val){if(!val||typeof val!=="object"){return val}if(seen.indexOf(val)!==-1){return"[Circular]"}seen.push(val);return val}}module.exports=Logger;module.exports.TRACE=TRACE;module.exports.DEBUG=DEBUG;module.exports.INFO=INFO;module.exports.WARN=WARN;module.exports.ERROR=ERROR;module.exports.FATAL=FATAL;module.exports.resolveLevel=resolveLevel;module.exports.levelFromName=levelFromName;module.exports.nameFromLevel=nameFromLevel;module.exports.VERSION=VERSION;module.exports.LOG_VERSION=LOG_VERSION;module.exports.createLogger=function createLogger(options){return new Logger(options)};module.exports.safeCycles=safeCycles;module.exports.ConsoleFormattedStream=ConsoleFormattedStream;module.exports.ConsoleRawStream=ConsoleRawStream},{}],3:[function(require,module,exports){"use strict";var Handlebars=require("handlebars/dist/handlebars.min");var securityProfiles={ADMIN:16,CREATOR:8,COLLABORATOR:4,CONTRIBUTOR:2,CONSUMER:1,NONE:0};function range(from,to,hbOptions){var accum="";from=parseInt(from,10);to=parseInt(to,10);if(isNaN(from)||isNaN(to)){return""}var data;var sign=from>to?-1:1;var rangeLength=Math.abs(to-from)+1;if(hbOptions.data){data=Handlebars.createFrame(hbOptions.data)}for(var i=0;i<rangeLength;i++){if(data){data.index=from+i*sign;data.from=from;data.to=to}accum+=hbOptions.fn(this,{data:data})}return accum}function withPreference(name,hbOptions){if(this.preferences){return hbOptions.fn(this.preferences[name])}}function getPreferenceValue(name){if(this.preferences){var pref=this.preferences[name];return pref?pref.value:null}return null}function divide(v1,v2){return Math.floor(parseFloat(v1)/parseFloat(v2))}function equal(v1,v2){return v1==v2}function hasViewHint(){var args=Array.prototype.slice.call(arguments);var hbOptions=args[args.length-1];var names=args.slice(0,args.length-1);for(var i=0;i<names.length;i++){if(this.viewhints&&this.viewhints.indexOf(names[i])>=0){return hbOptions.fn(this)}}return hbOptions.inverse(this)}function getViewHint(viewHintType){var viewHintsMap={designmode:["designModeOnly"],role:["admin","manager","user","none"],input:["text-input","checkbox","select-one"],order:[],options:[]};var viewhints=this.viewhints;if(!viewhints||!viewhints.length||!viewHintsMap[viewHintType]){return undefined}var viewHintTypeLength=viewHintType.length;var matchedViewHint=viewhints.filter(function(viewHint){return viewHintsMap[viewHintType].indexOf(viewHint)!==-1||viewHint.slice(0,viewHintTypeLength)===viewHintType})[0];if(matchedViewHint&&matchedViewHint.slice(0,viewHintTypeLength)===viewHintType){var separator=matchedViewHint.slice(viewHintTypeLength,viewHintTypeLength+1);if(viewHintType==="order"&&(separator==="-"||separator==="=")){var order=matchedViewHint.slice(viewHintTypeLength+1);var parsedOrder=parseFloat(order);if(!isNaN(parsedOrder)){order=parsedOrder}matchedViewHint=order}else if(separator==="="){matchedViewHint=matchedViewHint.slice(viewHintTypeLength+1)}else{matchedViewHint=undefined}}if(viewHintType==="designmode"){matchedViewHint=!!matchedViewHint}return matchedViewHint}function eachOption(optionName,hbOptions){var result="";if(!optionName||typeof optionName!=="string"){return result}var eachOption=hbOptions.data&&hbOptions.data.options&&hbOptions.data.options[optionName];if(!Array.isArray(eachOption)){return result}var last=eachOption.length-1;result=eachOption.reduce(function(acc,item,index){var itemMeta={index:index,first:index===0,last:index===last};return acc+=hbOptions.fn(item,{data:itemMeta})},"");return result}function or(){return Array.prototype.slice.call(arguments,0,arguments.length-1).some(function(val){return!!val})}function and(){return Array.prototype.slice.call(arguments,0,arguments.length-1).every(function(val){return!!val})}function not(value){return!value}function getConfig(name,hbOptions){var data=hbOptions.data;return data.cxpConfig?data.cxpConfig[name]:undefined}function hasViewmode(viewmode){var viewmodes=this.viewmodes||[];var givenViewmode=viewmode?viewmode.toLowerCase():"";return viewmodes.indexOf(givenViewmode)>-1}function currentViewmode(){return this.viewmodes&&this.viewmodes.length?this.viewmodes[0]:"none"}function allowEdit(hbOptions){var preferences=this.preferences;var allowEdit=Object.keys(preferences).length>0&&(this.securityProfile&&securityProfiles[this.securityProfile]>=securityProfiles.CONTRIBUTOR)&&Object.keys(preferences).some(function(prefName){return preferences[prefName].viewhints&&preferences[prefName].viewhints.length>0});if(allowEdit){return hbOptions.fn(this)}else{return hbOptions.inverse(this)}}function split(string,separator){if(typeof string!=="string"){return[]}var regex=new RegExp(separator);if(typeof separator!=="string"){regex=/\s*,+\s*|\s+/g}return string.trim().split(regex)}module.exports={range:range,withPreference:withPreference,getPreferenceValue:getPreferenceValue,divide:divide,equal:equal,hasViewHint:hasViewHint,getViewHint:getViewHint,eachOption:eachOption,or:or,and:and,not:not,getConfig:getConfig,hasViewmode:hasViewmode,currentViewmode:currentViewmode,allowEdit:allowEdit,split:split}},{"handlebars/dist/handlebars.min":4}],4:[function(require,module,exports){/**!

 @license
 handlebars v4.0.10

Copyright (C) 2011-2016 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.Handlebars=b():a.Handlebars=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";function d(){var a=r();return a.compile=function(b,c){return k.compile(b,c,a)},a.precompile=function(b,c){return k.precompile(b,c,a)},a.AST=i["default"],a.Compiler=k.Compiler,a.JavaScriptCompiler=m["default"],a.Parser=j.parser,a.parse=j.parse,a}var e=c(1)["default"];b.__esModule=!0;var f=c(2),g=e(f),h=c(35),i=e(h),j=c(36),k=c(41),l=c(42),m=e(l),n=c(39),o=e(n),p=c(34),q=e(p),r=g["default"].create,s=d();s.create=d,q["default"](s),s.Visitor=o["default"],s["default"]=s,b["default"]=s,a.exports=b["default"]},function(a,b){"use strict";b["default"]=function(a){return a&&a.__esModule?a:{"default":a}},b.__esModule=!0},function(a,b,c){"use strict";function d(){var a=new h.HandlebarsEnvironment;return n.extend(a,h),a.SafeString=j["default"],a.Exception=l["default"],a.Utils=n,a.escapeExpression=n.escapeExpression,a.VM=p,a.template=function(b){return p.template(b,a)},a}var e=c(3)["default"],f=c(1)["default"];b.__esModule=!0;var g=c(4),h=e(g),i=c(21),j=f(i),k=c(6),l=f(k),m=c(5),n=e(m),o=c(22),p=e(o),q=c(34),r=f(q),s=d();s.create=d,r["default"](s),s["default"]=s,b["default"]=s,a.exports=b["default"]},function(a,b){"use strict";b["default"]=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b},b.__esModule=!0},function(a,b,c){"use strict";function d(a,b,c){this.helpers=a||{},this.partials=b||{},this.decorators=c||{},i.registerDefaultHelpers(this),j.registerDefaultDecorators(this)}var e=c(1)["default"];b.__esModule=!0,b.HandlebarsEnvironment=d;var f=c(5),g=c(6),h=e(g),i=c(10),j=c(18),k=c(20),l=e(k),m="4.0.10";b.VERSION=m;var n=7;b.COMPILER_REVISION=n;var o={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};b.REVISION_CHANGES=o;var p="[object Object]";d.prototype={constructor:d,logger:l["default"],log:l["default"].log,registerHelper:function(a,b){if(f.toString.call(a)===p){if(b)throw new h["default"]("Arg not supported with multiple helpers");f.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){if(f.toString.call(a)===p)f.extend(this.partials,a);else{if("undefined"==typeof b)throw new h["default"]('Attempting to register a partial called "'+a+'" as undefined');this.partials[a]=b}},unregisterPartial:function(a){delete this.partials[a]},registerDecorator:function(a,b){if(f.toString.call(a)===p){if(b)throw new h["default"]("Arg not supported with multiple decorators");f.extend(this.decorators,a)}else this.decorators[a]=b},unregisterDecorator:function(a){delete this.decorators[a]}};var q=l["default"].log;b.log=q,b.createFrame=f.createFrame,b.logger=l["default"]},function(a,b){"use strict";function c(a){return k[a]}function d(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function e(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}function f(a){if("string"!=typeof a){if(a&&a.toHTML)return a.toHTML();if(null==a)return"";if(!a)return a+"";a=""+a}return m.test(a)?a.replace(l,c):a}function g(a){return!a&&0!==a||!(!p(a)||0!==a.length)}function h(a){var b=d({},a);return b._parent=a,b}function i(a,b){return a.path=b,a}function j(a,b){return(a?a+".":"")+b}b.__esModule=!0,b.extend=d,b.indexOf=e,b.escapeExpression=f,b.isEmpty=g,b.createFrame=h,b.blockParams=i,b.appendContextPath=j;var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},l=/[&<>"'`=]/g,m=/[&<>"'`=]/,n=Object.prototype.toString;b.toString=n;var o=function(a){return"function"==typeof a};o(/x/)&&(b.isFunction=o=function(a){return"function"==typeof a&&"[object Function]"===n.call(a)}),b.isFunction=o;var p=Array.isArray||function(a){return!(!a||"object"!=typeof a)&&"[object Array]"===n.call(a)};b.isArray=p},function(a,b,c){"use strict";function d(a,b){var c=b&&b.loc,g=void 0,h=void 0;c&&(g=c.start.line,h=c.start.column,a+=" - "+g+":"+h);for(var i=Error.prototype.constructor.call(this,a),j=0;j<f.length;j++)this[f[j]]=i[f[j]];Error.captureStackTrace&&Error.captureStackTrace(this,d);try{c&&(this.lineNumber=g,e?Object.defineProperty(this,"column",{value:h,enumerable:!0}):this.column=h)}catch(k){}}var e=c(7)["default"];b.__esModule=!0;var f=["description","fileName","lineNumber","message","name","number","stack"];d.prototype=new Error,b["default"]=d,a.exports=b["default"]},function(a,b,c){a.exports={"default":c(8),__esModule:!0}},function(a,b,c){var d=c(9);a.exports=function(a,b,c){return d.setDesc(a,b,c)}},function(a,b){var c=Object;a.exports={create:c.create,getProto:c.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:c.getOwnPropertyDescriptor,setDesc:c.defineProperty,setDescs:c.defineProperties,getKeys:c.keys,getNames:c.getOwnPropertyNames,getSymbols:c.getOwnPropertySymbols,each:[].forEach}},function(a,b,c){"use strict";function d(a){g["default"](a),i["default"](a),k["default"](a),m["default"](a),o["default"](a),q["default"](a),s["default"](a)}var e=c(1)["default"];b.__esModule=!0,b.registerDefaultHelpers=d;var f=c(11),g=e(f),h=c(12),i=e(h),j=c(13),k=e(j),l=c(14),m=e(l),n=c(15),o=e(n),p=c(16),q=e(p),r=c(17),s=e(r)},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5);b["default"]=function(a){a.registerHelper("blockHelperMissing",function(b,c){var e=c.inverse,f=c.fn;if(b===!0)return f(this);if(b===!1||null==b)return e(this);if(d.isArray(b))return b.length>0?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):e(this);if(c.data&&c.ids){var g=d.createFrame(c.data);g.contextPath=d.appendContextPath(c.data.contextPath,c.name),c={data:g}}return f(b,c)})},a.exports=b["default"]},function(a,b,c){"use strict";var d=c(1)["default"];b.__esModule=!0;var e=c(5),f=c(6),g=d(f);b["default"]=function(a){a.registerHelper("each",function(a,b){function c(b,c,f){j&&(j.key=b,j.index=c,j.first=0===c,j.last=!!f,k&&(j.contextPath=k+b)),i+=d(a[b],{data:j,blockParams:e.blockParams([a[b],b],[k+b,null])})}if(!b)throw new g["default"]("Must pass iterator to #each");var d=b.fn,f=b.inverse,h=0,i="",j=void 0,k=void 0;if(b.data&&b.ids&&(k=e.appendContextPath(b.data.contextPath,b.ids[0])+"."),e.isFunction(a)&&(a=a.call(this)),b.data&&(j=e.createFrame(b.data)),a&&"object"==typeof a)if(e.isArray(a))for(var l=a.length;h<l;h++)h in a&&c(h,h,h===a.length-1);else{var m=void 0;for(var n in a)a.hasOwnProperty(n)&&(void 0!==m&&c(m,h-1),m=n,h++);void 0!==m&&c(m,h-1,!0)}return 0===h&&(i=f(this)),i})},a.exports=b["default"]},function(a,b,c){"use strict";var d=c(1)["default"];b.__esModule=!0;var e=c(6),f=d(e);b["default"]=function(a){a.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new f["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5);b["default"]=function(a){a.registerHelper("if",function(a,b){return d.isFunction(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||d.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})})},a.exports=b["default"]},function(a,b){"use strict";b.__esModule=!0,b["default"]=function(a){a.registerHelper("log",function(){for(var b=[void 0],c=arguments[arguments.length-1],d=0;d<arguments.length-1;d++)b.push(arguments[d]);var e=1;null!=c.hash.level?e=c.hash.level:c.data&&null!=c.data.level&&(e=c.data.level),b[0]=e,a.log.apply(a,b)})},a.exports=b["default"]},function(a,b){"use strict";b.__esModule=!0,b["default"]=function(a){a.registerHelper("lookup",function(a,b){return a&&a[b]})},a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5);b["default"]=function(a){a.registerHelper("with",function(a,b){d.isFunction(a)&&(a=a.call(this));var c=b.fn;if(d.isEmpty(a))return b.inverse(this);var e=b.data;return b.data&&b.ids&&(e=d.createFrame(b.data),e.contextPath=d.appendContextPath(b.data.contextPath,b.ids[0])),c(a,{data:e,blockParams:d.blockParams([a],[e&&e.contextPath])})})},a.exports=b["default"]},function(a,b,c){"use strict";function d(a){g["default"](a)}var e=c(1)["default"];b.__esModule=!0,b.registerDefaultDecorators=d;var f=c(19),g=e(f)},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5);b["default"]=function(a){a.registerDecorator("inline",function(a,b,c,e){var f=a;return b.partials||(b.partials={},f=function(e,f){var g=c.partials;c.partials=d.extend({},g,b.partials);var h=a(e,f);return c.partials=g,h}),b.partials[e.args[0]]=e.fn,f})},a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5),e={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(a){if("string"==typeof a){var b=d.indexOf(e.methodMap,a.toLowerCase());a=b>=0?b:parseInt(a,10)}return a},log:function(a){if(a=e.lookupLevel(a),"undefined"!=typeof console&&e.lookupLevel(e.level)<=a){var b=e.methodMap[a];console[b]||(b="log");for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];console[b].apply(console,d)}}};b["default"]=e,a.exports=b["default"]},function(a,b){"use strict";function c(a){this.string=a}b.__esModule=!0,c.prototype.toString=c.prototype.toHTML=function(){return""+this.string},b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=s.COMPILER_REVISION;if(b!==c){if(b<c){var d=s.REVISION_CHANGES[c],e=s.REVISION_CHANGES[b];throw new r["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new r["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){function c(c,d,e){e.hash&&(d=p.extend({},d,e.hash),e.ids&&(e.ids[0]=!0)),c=b.VM.resolvePartial.call(this,c,d,e);var f=b.VM.invokePartial.call(this,c,d,e);if(null==f&&b.compile&&(e.partials[e.name]=b.compile(c,a.compilerOptions,b),f=e.partials[e.name](d,e)),null!=f){if(e.indent){for(var g=f.split("\n"),h=0,i=g.length;h<i&&(g[h]||h+1!==i);h++)g[h]=e.indent+g[h];f=g.join("\n")}return f}throw new r["default"]("The partial "+e.name+" could not be compiled when running in runtime-only mode")}function d(b){function c(b){return""+a.main(e,b,e.helpers,e.partials,g,i,h)}var f=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],g=f.data;d._setup(f),!f.partial&&a.useData&&(g=j(b,g));var h=void 0,i=a.useBlockParams?[]:void 0;return a.useDepths&&(h=f.depths?b!=f.depths[0]?[b].concat(f.depths):f.depths:[b]),(c=k(a.main,c,e,f.depths||[],g,i))(b,f)}if(!b)throw new r["default"]("No environment passed to template");if(!a||!a.main)throw new r["default"]("Unknown template object: "+typeof a);a.main.decorator=a.main_d,b.VM.checkRevision(a.compiler);var e={strict:function(a,b){if(!(b in a))throw new r["default"]('"'+b+'" not defined in '+a);return a[b]},lookup:function(a,b){for(var c=a.length,d=0;d<c;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:p.escapeExpression,invokePartial:c,fn:function(b){var c=a[b];return c.decorator=a[b+"_d"],c},programs:[],program:function(a,b,c,d,e){var g=this.programs[a],h=this.fn(a);return b||e||d||c?g=f(this,a,h,b,c,d,e):g||(g=this.programs[a]=f(this,a,h)),g},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=p.extend({},b,a)),c},nullContext:l({}),noop:b.VM.noop,compilerInfo:a.compiler};return d.isTop=!0,d._setup=function(c){c.partial?(e.helpers=c.helpers,e.partials=c.partials,e.decorators=c.decorators):(e.helpers=e.merge(c.helpers,b.helpers),a.usePartial&&(e.partials=e.merge(c.partials,b.partials)),(a.usePartial||a.useDecorators)&&(e.decorators=e.merge(c.decorators,b.decorators)))},d._child=function(b,c,d,g){if(a.useBlockParams&&!d)throw new r["default"]("must pass block params");if(a.useDepths&&!g)throw new r["default"]("must pass parent depths");return f(e,b,a[b],c,0,d,g)},d}function f(a,b,c,d,e,f,g){function h(b){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],h=g;return!g||b==g[0]||b===a.nullContext&&null===g[0]||(h=[b].concat(g)),c(a,b,a.helpers,a.partials,e.data||d,f&&[e.blockParams].concat(f),h)}return h=k(c,h,a,g,d,f),h.program=b,h.depth=g?g.length:0,h.blockParams=e||0,h}function g(a,b,c){return a?a.call||c.name||(c.name=a,a=c.partials[a]):a="@partial-block"===c.name?c.data["partial-block"]:c.partials[c.name],a}function h(a,b,c){var d=c.data&&c.data["partial-block"];c.partial=!0,c.ids&&(c.data.contextPath=c.ids[0]||c.data.contextPath);var e=void 0;if(c.fn&&c.fn!==i&&!function(){c.data=s.createFrame(c.data);var a=c.fn;e=c.data["partial-block"]=function(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return c.data=s.createFrame(c.data),c.data["partial-block"]=d,a(b,c)},a.partials&&(c.partials=p.extend({},c.partials,a.partials))}(),void 0===a&&e&&(a=e),void 0===a)throw new r["default"]("The partial "+c.name+" could not be found");if(a instanceof Function)return a(b,c)}function i(){return""}function j(a,b){return b&&"root"in b||(b=b?s.createFrame(b):{},b.root=a),b}function k(a,b,c,d,e,f){if(a.decorator){var g={};b=a.decorator(b,g,c,d&&d[0],e,f,d),p.extend(b,g)}return b}var l=c(23)["default"],m=c(3)["default"],n=c(1)["default"];b.__esModule=!0,b.checkRevision=d,b.template=e,b.wrapProgram=f,b.resolvePartial=g,b.invokePartial=h,b.noop=i;var o=c(5),p=m(o),q=c(6),r=n(q),s=c(4)},function(a,b,c){a.exports={"default":c(24),__esModule:!0}},function(a,b,c){c(25),a.exports=c(30).Object.seal},function(a,b,c){var d=c(26);c(27)("seal",function(a){return function(b){return a&&d(b)?a(b):b}})},function(a,b){a.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},function(a,b,c){var d=c(28),e=c(30),f=c(33);a.exports=function(a,b){var c=(e.Object||{})[a]||Object[a],g={};g[a]=b(c),d(d.S+d.F*f(function(){c(1)}),"Object",g)}},function(a,b,c){var d=c(29),e=c(30),f=c(31),g="prototype",h=function(a,b,c){var i,j,k,l=a&h.F,m=a&h.G,n=a&h.S,o=a&h.P,p=a&h.B,q=a&h.W,r=m?e:e[b]||(e[b]={}),s=m?d:n?d[b]:(d[b]||{})[g];m&&(c=b);for(i in c)j=!l&&s&&i in s,j&&i in r||(k=j?s[i]:c[i],r[i]=m&&"function"!=typeof s[i]?c[i]:p&&j?f(k,d):q&&s[i]==k?function(a){var b=function(b){return this instanceof a?new a(b):a(b)};return b[g]=a[g],b}(k):o&&"function"==typeof k?f(Function.call,k):k,o&&((r[g]||(r[g]={}))[i]=k))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,a.exports=h},function(a,b){var c=a.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=c)},function(a,b){var c=a.exports={version:"1.2.6"};"number"==typeof __e&&(__e=c)},function(a,b,c){var d=c(32);a.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},function(a,b){a.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},function(a,b){a.exports=function(a){try{return!!a()}catch(b){return!0}}},function(a,b){(function(c){"use strict";b.__esModule=!0,b["default"]=function(a){var b="undefined"!=typeof c?c:window,d=b.Handlebars;a.noConflict=function(){return b.Handlebars===a&&(b.Handlebars=d),a}},a.exports=b["default"]}).call(b,function(){return this}())},function(a,b){"use strict";b.__esModule=!0;var c={helpers:{helperExpression:function(a){return"SubExpression"===a.type||("MustacheStatement"===a.type||"BlockStatement"===a.type)&&!!(a.params&&a.params.length||a.hash)},scopedId:function(a){return/^\.|this\b/.test(a.original)},simpleId:function(a){return 1===a.parts.length&&!c.helpers.scopedId(a)&&!a.depth}}};b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b){if("Program"===a.type)return a;h["default"].yy=n,n.locInfo=function(a){return new n.SourceLocation(b&&b.srcName,a)};var c=new j["default"](b);return c.accept(h["default"].parse(a))}var e=c(1)["default"],f=c(3)["default"];b.__esModule=!0,b.parse=d;var g=c(37),h=e(g),i=c(38),j=e(i),k=c(40),l=f(k),m=c(5);b.parser=h["default"];var n={};m.extend(n,l)},function(a,b){"use strict";b.__esModule=!0;var c=function(){function a(){this.yy={}}var b={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(a,b,c,d,e,f,g){var h=f.length-1;switch(e){case 1:return f[h-1];case 2:this.$=d.prepareProgram(f[h]);break;case 3:this.$=f[h];break;case 4:this.$=f[h];break;case 5:this.$=f[h];break;case 6:this.$=f[h];break;case 7:this.$=f[h];break;case 8:this.$=f[h];break;case 9:this.$={type:"CommentStatement",value:d.stripComment(f[h]),strip:d.stripFlags(f[h],f[h]),loc:d.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:f[h],value:f[h],loc:d.locInfo(this._$)};break;case 11:this.$=d.prepareRawBlock(f[h-2],f[h-1],f[h],this._$);break;case 12:this.$={path:f[h-3],params:f[h-2],hash:f[h-1]};break;case 13:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!1,this._$);break;case 14:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!0,this._$);break;case 15:this.$={open:f[h-5],path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 16:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 17:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 18:this.$={strip:d.stripFlags(f[h-1],f[h-1]),program:f[h]};break;case 19:var i=d.prepareBlock(f[h-2],f[h-1],f[h],f[h],!1,this._$),j=d.prepareProgram([i],f[h-1].loc);j.chained=!0,this.$={strip:f[h-2].strip,program:j,chain:!0};break;case 20:this.$=f[h];break;case 21:this.$={path:f[h-1],strip:d.stripFlags(f[h-2],f[h])};break;case 22:this.$=d.prepareMustache(f[h-3],f[h-2],f[h-1],f[h-4],d.stripFlags(f[h-4],f[h]),this._$);break;case 23:this.$=d.prepareMustache(f[h-3],f[h-2],f[h-1],f[h-4],d.stripFlags(f[h-4],f[h]),this._$);break;case 24:this.$={type:"PartialStatement",name:f[h-3],params:f[h-2],hash:f[h-1],indent:"",strip:d.stripFlags(f[h-4],f[h]),loc:d.locInfo(this._$)};break;case 25:this.$=d.preparePartialBlock(f[h-2],f[h-1],f[h],this._$);break;case 26:this.$={path:f[h-3],params:f[h-2],hash:f[h-1],strip:d.stripFlags(f[h-4],f[h])};break;case 27:this.$=f[h];break;case 28:this.$=f[h];break;case 29:this.$={type:"SubExpression",path:f[h-3],params:f[h-2],hash:f[h-1],loc:d.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:f[h],loc:d.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:d.id(f[h-2]),value:f[h],loc:d.locInfo(this._$)};break;case 32:this.$=d.id(f[h-1]);break;case 33:this.$=f[h];break;case 34:this.$=f[h];break;case 35:this.$={type:"StringLiteral",value:f[h],original:f[h],loc:d.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(f[h]),original:Number(f[h]),loc:d.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===f[h],original:"true"===f[h],loc:d.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:d.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:d.locInfo(this._$)};break;case 40:this.$=f[h];break;case 41:this.$=f[h];break;case 42:this.$=d.preparePath(!0,f[h],this._$);break;case 43:this.$=d.preparePath(!1,f[h],this._$);break;case 44:f[h-2].push({part:d.id(f[h]),original:f[h],separator:f[h-1]}),this.$=f[h-2];break;case 45:this.$=[{part:d.id(f[h]),original:f[h]}];break;case 46:this.$=[];break;case 47:f[h-1].push(f[h]);break;case 48:this.$=[f[h]];break;case 49:f[h-1].push(f[h]);break;case 50:this.$=[];break;case 51:f[h-1].push(f[h]);break;case 58:this.$=[];break;case 59:f[h-1].push(f[h]);break;case 64:this.$=[];break;case 65:f[h-1].push(f[h]);break;case 70:this.$=[];break;case 71:f[h-1].push(f[h]);break;case 78:this.$=[];break;case 79:f[h-1].push(f[h]);break;case 82:this.$=[];break;case 83:f[h-1].push(f[h]);break;case 86:this.$=[];break;case 87:f[h-1].push(f[h]);break;case 90:this.$=[];break;case 91:f[h-1].push(f[h]);break;case 94:this.$=[];break;case 95:f[h-1].push(f[h]);break;case 98:this.$=[f[h]];break;case 99:f[h-1].push(f[h]);break;case 100:this.$=[f[h]];break;case 101:f[h-1].push(f[h])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],
85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:(null!==n&&"undefined"!=typeof n||(n=b()),q=g[p]&&g[p][n]),"undefined"==typeof q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),"undefined"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},c=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:if("\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(e(0,1),this.begin("emu")):this.begin("mu"),b.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(b.yytext=b.yytext.substr(5,b.yyleng-9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(b.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return b.yytext=e(1,2).replace(/\\"/g,'"'),80;case 32:return b.yytext=e(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return b.yytext=b.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},a.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},a}();return b.lexer=c,a.prototype=b,b.Parser=a,new a}();b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=a}function e(a,b,c){void 0===b&&(b=a.length);var d=a[b-1],e=a[b-2];return d?"ContentStatement"===d.type?(e||!c?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(d.original):void 0:c}function f(a,b,c){void 0===b&&(b=-1);var d=a[b+1],e=a[b+2];return d?"ContentStatement"===d.type?(e||!c?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(d.original):void 0:c}function g(a,b,c){var d=a[null==b?0:b+1];if(d&&"ContentStatement"===d.type&&(c||!d.rightStripped)){var e=d.value;d.value=d.value.replace(c?/^\s+/:/^[ \t]*\r?\n?/,""),d.rightStripped=d.value!==e}}function h(a,b,c){var d=a[null==b?a.length-1:b-1];if(d&&"ContentStatement"===d.type&&(c||!d.leftStripped)){var e=d.value;return d.value=d.value.replace(c?/\s+$/:/[ \t]+$/,""),d.leftStripped=d.value!==e,d.leftStripped}}var i=c(1)["default"];b.__esModule=!0;var j=c(39),k=i(j);d.prototype=new k["default"],d.prototype.Program=function(a){var b=!this.options.ignoreStandalone,c=!this.isRootSeen;this.isRootSeen=!0;for(var d=a.body,i=0,j=d.length;i<j;i++){var k=d[i],l=this.accept(k);if(l){var m=e(d,i,c),n=f(d,i,c),o=l.openStandalone&&m,p=l.closeStandalone&&n,q=l.inlineStandalone&&m&&n;l.close&&g(d,i,!0),l.open&&h(d,i,!0),b&&q&&(g(d,i),h(d,i)&&"PartialStatement"===k.type&&(k.indent=/([ \t]+$)/.exec(d[i-1].original)[1])),b&&o&&(g((k.program||k.inverse).body),h(d,i)),b&&p&&(g(d,i),h((k.inverse||k.program).body))}}return a},d.prototype.BlockStatement=d.prototype.DecoratorBlock=d.prototype.PartialBlockStatement=function(a){this.accept(a.program),this.accept(a.inverse);var b=a.program||a.inverse,c=a.program&&a.inverse,d=c,i=c;if(c&&c.chained)for(d=c.body[0].program;i.chained;)i=i.body[i.body.length-1].program;var j={open:a.openStrip.open,close:a.closeStrip.close,openStandalone:f(b.body),closeStandalone:e((d||b).body)};if(a.openStrip.close&&g(b.body,null,!0),c){var k=a.inverseStrip;k.open&&h(b.body,null,!0),k.close&&g(d.body,null,!0),a.closeStrip.open&&h(i.body,null,!0),!this.options.ignoreStandalone&&e(b.body)&&f(d.body)&&(h(b.body),g(d.body))}else a.closeStrip.open&&h(b.body,null,!0);return j},d.prototype.Decorator=d.prototype.MustacheStatement=function(a){return a.strip},d.prototype.PartialStatement=d.prototype.CommentStatement=function(a){var b=a.strip||{};return{inlineStandalone:!0,open:b.open,close:b.close}},b["default"]=d,a.exports=b["default"]},function(a,b,c){"use strict";function d(){this.parents=[]}function e(a){this.acceptRequired(a,"path"),this.acceptArray(a.params),this.acceptKey(a,"hash")}function f(a){e.call(this,a),this.acceptKey(a,"program"),this.acceptKey(a,"inverse")}function g(a){this.acceptRequired(a,"name"),this.acceptArray(a.params),this.acceptKey(a,"hash")}var h=c(1)["default"];b.__esModule=!0;var i=c(6),j=h(i);d.prototype={constructor:d,mutating:!1,acceptKey:function(a,b){var c=this.accept(a[b]);if(this.mutating){if(c&&!d.prototype[c.type])throw new j["default"]('Unexpected node type "'+c.type+'" found when accepting '+b+" on "+a.type);a[b]=c}},acceptRequired:function(a,b){if(this.acceptKey(a,b),!a[b])throw new j["default"](a.type+" requires "+b)},acceptArray:function(a){for(var b=0,c=a.length;b<c;b++)this.acceptKey(a,b),a[b]||(a.splice(b,1),b--,c--)},accept:function(a){if(a){if(!this[a.type])throw new j["default"]("Unknown type: "+a.type,a);this.current&&this.parents.unshift(this.current),this.current=a;var b=this[a.type](a);return this.current=this.parents.shift(),!this.mutating||b?b:b!==!1?a:void 0}},Program:function(a){this.acceptArray(a.body)},MustacheStatement:e,Decorator:e,BlockStatement:f,DecoratorBlock:f,PartialStatement:g,PartialBlockStatement:function(a){g.call(this,a),this.acceptKey(a,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:e,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(a){this.acceptArray(a.pairs)},HashPair:function(a){this.acceptRequired(a,"value")}},b["default"]=d,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b){if(b=b.path?b.path.original:b,a.path.original!==b){var c={loc:a.path.loc};throw new q["default"](a.path.original+" doesn't match "+b,c)}}function e(a,b){this.source=a,this.start={line:b.first_line,column:b.first_column},this.end={line:b.last_line,column:b.last_column}}function f(a){return/^\[.*\]$/.test(a)?a.substr(1,a.length-2):a}function g(a,b){return{open:"~"===a.charAt(2),close:"~"===b.charAt(b.length-3)}}function h(a){return a.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function i(a,b,c){c=this.locInfo(c);for(var d=a?"@":"",e=[],f=0,g="",h=0,i=b.length;h<i;h++){var j=b[h].part,k=b[h].original!==j;if(d+=(b[h].separator||"")+j,k||".."!==j&&"."!==j&&"this"!==j)e.push(j);else{if(e.length>0)throw new q["default"]("Invalid path: "+d,{loc:c});".."===j&&(f++,g+="../")}}return{type:"PathExpression",data:a,depth:f,parts:e,original:d,loc:c}}function j(a,b,c,d,e,f){var g=d.charAt(3)||d.charAt(2),h="{"!==g&&"&"!==g,i=/\*/.test(d);return{type:i?"Decorator":"MustacheStatement",path:a,params:b,hash:c,escaped:h,strip:e,loc:this.locInfo(f)}}function k(a,b,c,e){d(a,c),e=this.locInfo(e);var f={type:"Program",body:b,strip:{},loc:e};return{type:"BlockStatement",path:a.path,params:a.params,hash:a.hash,program:f,openStrip:{},inverseStrip:{},closeStrip:{},loc:e}}function l(a,b,c,e,f,g){e&&e.path&&d(a,e);var h=/\*/.test(a.open);b.blockParams=a.blockParams;var i=void 0,j=void 0;if(c){if(h)throw new q["default"]("Unexpected inverse block on decorator",c);c.chain&&(c.program.body[0].closeStrip=e.strip),j=c.strip,i=c.program}return f&&(f=i,i=b,b=f),{type:h?"DecoratorBlock":"BlockStatement",path:a.path,params:a.params,hash:a.hash,program:b,inverse:i,openStrip:a.strip,inverseStrip:j,closeStrip:e&&e.strip,loc:this.locInfo(g)}}function m(a,b){if(!b&&a.length){var c=a[0].loc,d=a[a.length-1].loc;c&&d&&(b={source:c.source,start:{line:c.start.line,column:c.start.column},end:{line:d.end.line,column:d.end.column}})}return{type:"Program",body:a,strip:{},loc:b}}function n(a,b,c,e){return d(a,c),{type:"PartialBlockStatement",name:a.path,params:a.params,hash:a.hash,program:b,openStrip:a.strip,closeStrip:c&&c.strip,loc:this.locInfo(e)}}var o=c(1)["default"];b.__esModule=!0,b.SourceLocation=e,b.id=f,b.stripFlags=g,b.stripComment=h,b.preparePath=i,b.prepareMustache=j,b.prepareRawBlock=k,b.prepareBlock=l,b.prepareProgram=m,b.preparePartialBlock=n;var p=c(6),q=o(p)},function(a,b,c){"use strict";function d(){}function e(a,b,c){if(null==a||"string"!=typeof a&&"Program"!==a.type)throw new k["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);b=b||{},"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var d=c.parse(a,b),e=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(e,b)}function f(a,b,c){function d(){var d=c.parse(a,b),e=(new c.Compiler).compile(d,b),f=(new c.JavaScriptCompiler).compile(e,b,void 0,!0);return c.template(f)}function e(a,b){return f||(f=d()),f.call(this,a,b)}if(void 0===b&&(b={}),null==a||"string"!=typeof a&&"Program"!==a.type)throw new k["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);b=l.extend({},b),"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var f=void 0;return e._setup=function(a){return f||(f=d()),f._setup(a)},e._child=function(a,b,c,e){return f||(f=d()),f._child(a,b,c,e)},e}function g(a,b){if(a===b)return!0;if(l.isArray(a)&&l.isArray(b)&&a.length===b.length){for(var c=0;c<a.length;c++)if(!g(a[c],b[c]))return!1;return!0}}function h(a){if(!a.path.parts){var b=a.path;a.path={type:"PathExpression",data:!1,depth:0,parts:[b.original+""],original:b.original+"",loc:b.loc}}}var i=c(1)["default"];b.__esModule=!0,b.Compiler=d,b.precompile=e,b.compile=f;var j=c(6),k=i(j),l=c(5),m=c(35),n=i(m),o=[].slice;d.prototype={compiler:d,equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;c<b;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||!g(d.args,e.args))return!1}b=this.children.length;for(var c=0;c<b;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=b,this.stringParams=b.stringParams,this.trackIds=b.trackIds,b.blockParams=b.blockParams||[];var c=b.knownHelpers;if(b.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},c)for(var d in c)d in c&&(this.options.knownHelpers[d]=c[d]);return this.accept(a)},compileProgram:function(a){var b=new this.compiler,c=b.compile(a,this.options),d=this.guid++;return this.usePartial=this.usePartial||c.usePartial,this.children[d]=c,this.useDepths=this.useDepths||c.useDepths,d},accept:function(a){if(!this[a.type])throw new k["default"]("Unknown type: "+a.type,a);this.sourceNode.unshift(a);var b=this[a.type](a);return this.sourceNode.shift(),b},Program:function(a){this.options.blockParams.unshift(a.blockParams);for(var b=a.body,c=b.length,d=0;d<c;d++)this.accept(b[d]);return this.options.blockParams.shift(),this.isSimple=1===c,this.blockParams=a.blockParams?a.blockParams.length:0,this},BlockStatement:function(a){h(a);var b=a.program,c=a.inverse;b=b&&this.compileProgram(b),c=c&&this.compileProgram(c);var d=this.classifySexpr(a);"helper"===d?this.helperSexpr(a,b,c):"simple"===d?(this.simpleSexpr(a),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("blockValue",a.path.original)):(this.ambiguousSexpr(a,b,c),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(a){var b=a.program&&this.compileProgram(a.program),c=this.setupFullMustacheParams(a,b,void 0),d=a.path;this.useDecorators=!0,this.opcode("registerDecorator",c.length,d.original)},PartialStatement:function(a){this.usePartial=!0;var b=a.program;b&&(b=this.compileProgram(a.program));var c=a.params;if(c.length>1)throw new k["default"]("Unsupported number of partial arguments: "+c.length,a);c.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):c.push({type:"PathExpression",parts:[],depth:0}));var d=a.name.original,e="SubExpression"===a.name.type;e&&this.accept(a.name),this.setupFullMustacheParams(a,b,void 0,!0);var f=a.indent||"";this.options.preventIndent&&f&&(this.opcode("appendContent",f),f=""),this.opcode("invokePartial",e,d,f),this.opcode("append")},PartialBlockStatement:function(a){this.PartialStatement(a)},MustacheStatement:function(a){this.SubExpression(a),a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(a){this.DecoratorBlock(a)},ContentStatement:function(a){a.value&&this.opcode("appendContent",a.value)},CommentStatement:function(){},SubExpression:function(a){h(a);var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ambiguousSexpr:function(a,b,c){var d=a.path,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),d.strict=!0,this.accept(d),this.opcode("invokeAmbiguous",e,f)},simpleSexpr:function(a){var b=a.path;b.strict=!0,this.accept(b),this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.path,f=e.parts[0];if(this.options.knownHelpers[f])this.opcode("invokeKnownHelper",d.length,f);else{if(this.options.knownHelpersOnly)throw new k["default"]("You specified knownHelpersOnly, but used the unknown helper "+f,a);e.strict=!0,e.falsy=!0,this.accept(e),this.opcode("invokeHelper",d.length,e.original,n["default"].helpers.simpleId(e))}},PathExpression:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0],c=n["default"].helpers.scopedId(a),d=!a.depth&&!c&&this.blockParamIndex(b);d?this.opcode("lookupBlockParam",d,a.parts):b?a.data?(this.options.data=!0,this.opcode("lookupData",a.depth,a.parts,a.strict)):this.opcode("lookupOnContext",a.parts,a.falsy,a.strict,c):this.opcode("pushContext")},StringLiteral:function(a){this.opcode("pushString",a.value)},NumberLiteral:function(a){this.opcode("pushLiteral",a.value)},BooleanLiteral:function(a){this.opcode("pushLiteral",a.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(a){var b=a.pairs,c=0,d=b.length;for(this.opcode("pushHash");c<d;c++)this.pushParam(b[c].value);for(;c--;)this.opcode("assignToHash",b[c].key);this.opcode("popHash")},opcode:function(a){this.opcodes.push({opcode:a,args:o.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(a){a&&(this.useDepths=!0)},classifySexpr:function(a){var b=n["default"].helpers.simpleId(a.path),c=b&&!!this.blockParamIndex(a.path.parts[0]),d=!c&&n["default"].helpers.helperExpression(a),e=!c&&(d||b);if(e&&!d){var f=a.path.parts[0],g=this.options;g.knownHelpers[f]?d=!0:g.knownHelpersOnly&&(e=!1)}return d?"helper":e?"ambiguous":"simple"},pushParams:function(a){for(var b=0,c=a.length;b<c;b++)this.pushParam(a[b])},pushParam:function(a){var b=null!=a.value?a.value:a.original||"";if(this.stringParams)b.replace&&(b=b.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),a.depth&&this.addDepth(a.depth),this.opcode("getContext",a.depth||0),this.opcode("pushStringParam",b,a.type),"SubExpression"===a.type&&this.accept(a);else{if(this.trackIds){var c=void 0;if(!a.parts||n["default"].helpers.scopedId(a)||a.depth||(c=this.blockParamIndex(a.parts[0])),c){var d=a.parts.slice(1).join(".");this.opcode("pushId","BlockParam",c,d)}else b=a.original||b,b.replace&&(b=b.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",a.type,b)}this.accept(a)}},setupFullMustacheParams:function(a,b,c,d){var e=a.params;return this.pushParams(e),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.accept(a.hash):this.opcode("emptyHash",d),e},blockParamIndex:function(a){for(var b=0,c=this.options.blockParams.length;b<c;b++){var d=this.options.blockParams[b],e=d&&l.indexOf(d,a);if(d&&e>=0)return[b,e]}}}},function(a,b,c){"use strict";function d(a){this.value=a}function e(){}function f(a,b,c,d){var e=b.popStack(),f=0,g=c.length;for(a&&g--;f<g;f++)e=b.nameLookup(e,c[f],d);return a?[b.aliasable("container.strict"),"(",e,", ",b.quotedString(c[f]),")"]:e}var g=c(1)["default"];b.__esModule=!0;var h=c(4),i=c(6),j=g(i),k=c(5),l=c(43),m=g(l);e.prototype={nameLookup:function(a,b){return e.isValidJavaScriptVariableName(b)?[a,".",b]:[a,"[",JSON.stringify(b),"]"]},depthedLookup:function(a){return[this.aliasable("container.lookup"),'(depths, "',a,'")']},compilerInfo:function(){var a=h.COMPILER_REVISION,b=h.REVISION_CHANGES[a];return[a,b]},appendToBuffer:function(a,b,c){return k.isArray(a)||(a=[a]),a=this.source.wrap(a,b),this.environment.isSimple?["return ",a,";"]:c?["buffer += ",a,";"]:(a.appendToBuffer=!0,a)},initializeBuffer:function(){return this.quotedString("")},compile:function(a,b,c,d){this.environment=a,this.options=b,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!d,this.name=this.environment.name,this.isChild=!!c,this.context=c||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(a,b),this.useDepths=this.useDepths||a.useDepths||a.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||a.useBlockParams;var e=a.opcodes,f=void 0,g=void 0,h=void 0,i=void 0;for(h=0,i=e.length;h<i;h++)f=e[h],this.source.currentLocation=f.loc,g=g||f.loc,this[f.opcode].apply(this,f.args);if(this.source.currentLocation=g,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new j["default"]("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),d?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var k=this.createFunctionContext(d);if(this.isChild)return k;var l={compiler:this.compilerInfo(),main:k};this.decorators&&(l.main_d=this.decorators,l.useDecorators=!0);var m=this.context,n=m.programs,o=m.decorators;for(h=0,i=n.length;h<i;h++)n[h]&&(l[h]=n[h],o[h]&&(l[h+"_d"]=o[h],l.useDecorators=!0));return this.environment.usePartial&&(l.usePartial=!0),this.options.data&&(l.useData=!0),this.useDepths&&(l.useDepths=!0),this.useBlockParams&&(l.useBlockParams=!0),this.options.compat&&(l.compat=!0),d?l.compilerOptions=this.options:(l.compiler=JSON.stringify(l.compiler),this.source.currentLocation={start:{line:1,column:0}},l=this.objectLiteral(l),b.srcName?(l=l.toStringWithSourceMap({file:b.destName}),l.map=l.map&&l.map.toString()):l=l.toString()),l},preamble:function(){this.lastContext=0,this.source=new m["default"](this.options.srcName),this.decorators=new m["default"](this.options.srcName)},createFunctionContext:function(a){var b="",c=this.stackVars.concat(this.registers.list);c.length>0&&(b+=", "+c.join(", "));var d=0;for(var e in this.aliases){var f=this.aliases[e];this.aliases.hasOwnProperty(e)&&f.children&&f.referenceCount>1&&(b+=", alias"+ ++d+"="+e,f.children[0]="alias"+d)}var g=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&g.push("blockParams"),this.useDepths&&g.push("depths");var h=this.mergeSource(b);return a?(g.push(h),Function.apply(this,g)):this.source.wrap(["function(",g.join(","),") {\n  ",h,"}"])},mergeSource:function(a){var b=this.environment.isSimple,c=!this.forceBuffer,d=void 0,e=void 0,f=void 0,g=void 0;return this.source.each(function(a){a.appendToBuffer?(f?a.prepend("  + "):f=a,g=a):(f&&(e?f.prepend("buffer += "):d=!0,g.add(";"),f=g=void 0),e=!0,b||(c=!1))}),c?f?(f.prepend("return "),g.add(";")):e||this.source.push('return "";'):(a+=", buffer = "+(d?"":this.initializeBuffer()),f?(f.prepend("return buffer + "),g.add(";")):this.source.push("return buffer;")),a&&this.source.prepend("var "+a.substring(2)+(d?"":";\n")),this.source.merge()},blockValue:function(a){var b=this.aliasable("helpers.blockHelperMissing"),c=[this.contextName(0)];this.setupHelperArgs(a,0,c);var d=this.popStack();c.splice(1,0,d),this.push(this.source.functionCall(b,"call",c))},ambiguousBlockValue:function(){var a=this.aliasable("helpers.blockHelperMissing"),b=[this.contextName(0)];this.setupHelperArgs("",0,b,!0),this.flushInline();var c=this.topStack();b.splice(1,0,c),this.pushSource(["if (!",this.lastHelper,") { ",c," = ",this.source.functionCall(a,"call",b),"}"])},appendContent:function(a){this.pendingContent?a=this.pendingContent+a:this.pendingLocation=this.source.currentLocation,this.pendingContent=a},append:function(){if(this.isInline())this.replaceStack(function(a){return[" != null ? ",a,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var a=this.popStack();this.pushSource(["if (",a," != null) { ",this.appendToBuffer(a,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(a){this.lastContext=a},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(a,b,c,d){var e=0;d||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(a[e++])),this.resolvePath("context",a,e,b,c)},lookupBlockParam:function(a,b){this.useBlockParams=!0,this.push(["blockParams[",a[0],"][",a[1],"]"]),this.resolvePath("context",b,1)},lookupData:function(a,b,c){a?this.pushStackLiteral("container.data(data, "+a+")"):this.pushStackLiteral("data"),this.resolvePath("data",b,0,!0,c)},resolvePath:function(a,b,c,d,e){var g=this;if(this.options.strict||this.options.assumeObjects)return void this.push(f(this.options.strict&&e,this,b,a));for(var h=b.length;c<h;c++)this.replaceStack(function(e){
var f=g.nameLookup(e,b[c],a);return d?[" && ",f]:[" != null ? ",f," : ",e]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(a,b){this.pushContext(),this.pushString(b),"SubExpression"!==b&&("string"==typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(a){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(a?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(a.ids)),this.stringParams&&(this.push(this.objectLiteral(a.contexts)),this.push(this.objectLiteral(a.types))),this.push(this.objectLiteral(a.values))},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},registerDecorator:function(a,b){var c=this.nameLookup("decorators",b,"decorator"),d=this.setupHelperArgs(b,a);this.decorators.push(["fn = ",this.decorators.functionCall(c,"",["fn","props","container",d])," || fn;"])},invokeHelper:function(a,b,c){var d=this.popStack(),e=this.setupHelper(a,b),f=c?[e.name," || "]:"",g=["("].concat(f,d);this.options.strict||g.push(" || ",this.aliasable("helpers.helperMissing")),g.push(")"),this.push(this.source.functionCall(g,"call",e.callParams))},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(this.source.functionCall(c.name,"call",c.callParams))},invokeAmbiguous:function(a,b){this.useRegister("helper");var c=this.popStack();this.emptyHash();var d=this.setupHelper(0,a,b),e=this.lastHelper=this.nameLookup("helpers",a,"helper"),f=["(","(helper = ",e," || ",c,")"];this.options.strict||(f[0]="(helper = ",f.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",f,d.paramsInit?["),(",d.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",d.callParams)," : helper))"])},invokePartial:function(a,b,c){var d=[],e=this.setupParams(b,1,d);a&&(b=this.popStack(),delete e.name),c&&(e.indent=JSON.stringify(c)),e.helpers="helpers",e.partials="partials",e.decorators="container.decorators",a?d.unshift(b):d.unshift(this.nameLookup("partials",b,"partial")),this.options.compat&&(e.depths="depths"),e=this.objectLiteral(e),d.push(e),this.push(this.source.functionCall("container.invokePartial","",d))},assignToHash:function(a){var b=this.popStack(),c=void 0,d=void 0,e=void 0;this.trackIds&&(e=this.popStack()),this.stringParams&&(d=this.popStack(),c=this.popStack());var f=this.hash;c&&(f.contexts[a]=c),d&&(f.types[a]=d),e&&(f.ids[a]=e),f.values[a]=b},pushId:function(a,b,c){"BlockParam"===a?this.pushStackLiteral("blockParams["+b[0]+"].path["+b[1]+"]"+(c?" + "+JSON.stringify("."+c):"")):"PathExpression"===a?this.pushString(b):"SubExpression"===a?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:e,compileChildren:function(a,b){for(var c=a.children,d=void 0,e=void 0,f=0,g=c.length;f<g;f++){d=c[f],e=new this.compiler;var h=this.matchExistingProgram(d);if(null==h){this.context.programs.push("");var i=this.context.programs.length;d.index=i,d.name="program"+i,this.context.programs[i]=e.compile(d,b,this.context,!this.precompile),this.context.decorators[i]=e.decorators,this.context.environments[i]=d,this.useDepths=this.useDepths||e.useDepths,this.useBlockParams=this.useBlockParams||e.useBlockParams,d.useDepths=this.useDepths,d.useBlockParams=this.useBlockParams}else d.index=h.index,d.name="program"+h.index,this.useDepths=this.useDepths||h.useDepths,this.useBlockParams=this.useBlockParams||h.useBlockParams}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;b<c;b++){var d=this.context.environments[b];if(d&&d.equals(a))return d}},programExpression:function(a){var b=this.environment.children[a],c=[b.index,"data",b.blockParams];return(this.useBlockParams||this.useDepths)&&c.push("blockParams"),this.useDepths&&c.push("depths"),"container.program("+c.join(", ")+")"},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},push:function(a){return a instanceof d||(a=this.source.wrap(a)),this.inlineStack.push(a),a},pushStackLiteral:function(a){this.push(new d(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),a&&this.source.push(a)},replaceStack:function(a){var b=["("],c=void 0,e=void 0,f=void 0;if(!this.isInline())throw new j["default"]("replaceStack on non-inline");var g=this.popStack(!0);if(g instanceof d)c=[g.value],b=["(",c],f=!0;else{e=!0;var h=this.incrStack();b=["((",this.push(h)," = ",g,")"],c=this.topStack()}var i=a.call(this,c);f||this.popStack(),e&&this.stackSlot--,this.push(b.concat(i,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;this.inlineStack=[];for(var b=0,c=a.length;b<c;b++){var e=a[b];if(e instanceof d)this.compileStack.push(e);else{var f=this.incrStack();this.pushSource([f," = ",e,";"]),this.compileStack.push(f)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),c=(b?this.inlineStack:this.compileStack).pop();if(!a&&c instanceof d)return c.value;if(!b){if(!this.stackSlot)throw new j["default"]("Invalid stack pop");this.stackSlot--}return c},topStack:function(){var a=this.isInline()?this.inlineStack:this.compileStack,b=a[a.length-1];return b instanceof d?b.value:b},contextName:function(a){return this.useDepths&&a?"depths["+a+"]":"depth"+a},quotedString:function(a){return this.source.quotedString(a)},objectLiteral:function(a){return this.source.objectLiteral(a)},aliasable:function(a){var b=this.aliases[a];return b?(b.referenceCount++,b):(b=this.aliases[a]=this.source.wrap(a),b.aliasable=!0,b.referenceCount=1,b)},setupHelper:function(a,b,c){var d=[],e=this.setupHelperArgs(b,a,d,c),f=this.nameLookup("helpers",b,"helper"),g=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:d,paramsInit:e,name:f,callParams:[g].concat(d)}},setupParams:function(a,b,c){var d={},e=[],f=[],g=[],h=!c,i=void 0;h&&(c=[]),d.name=this.quotedString(a),d.hash=this.popStack(),this.trackIds&&(d.hashIds=this.popStack()),this.stringParams&&(d.hashTypes=this.popStack(),d.hashContexts=this.popStack());var j=this.popStack(),k=this.popStack();(k||j)&&(d.fn=k||"container.noop",d.inverse=j||"container.noop");for(var l=b;l--;)i=this.popStack(),c[l]=i,this.trackIds&&(g[l]=this.popStack()),this.stringParams&&(f[l]=this.popStack(),e[l]=this.popStack());return h&&(d.args=this.source.generateArray(c)),this.trackIds&&(d.ids=this.source.generateArray(g)),this.stringParams&&(d.types=this.source.generateArray(f),d.contexts=this.source.generateArray(e)),this.options.data&&(d.data="data"),this.useBlockParams&&(d.blockParams="blockParams"),d},setupHelperArgs:function(a,b,c,d){var e=this.setupParams(a,b,c);return e=this.objectLiteral(e),d?(this.useRegister("options"),c.push("options"),["options=",e]):c?(c.push(e),""):e}},function(){for(var a="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),b=e.RESERVED_WORDS={},c=0,d=a.length;c<d;c++)b[a[c]]=!0}(),e.isValidJavaScriptVariableName=function(a){return!e.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)},b["default"]=e,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b,c){if(f.isArray(a)){for(var d=[],e=0,g=a.length;e<g;e++)d.push(b.wrap(a[e],c));return d}return"boolean"==typeof a||"number"==typeof a?a+"":a}function e(a){this.srcFile=a,this.source=[]}b.__esModule=!0;var f=c(5),g=void 0;try{}catch(h){}g||(g=function(a,b,c,d){this.src="",d&&this.add(d)},g.prototype={add:function(a){f.isArray(a)&&(a=a.join("")),this.src+=a},prepend:function(a){f.isArray(a)&&(a=a.join("")),this.src=a+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),e.prototype={isEmpty:function(){return!this.source.length},prepend:function(a,b){this.source.unshift(this.wrap(a,b))},push:function(a,b){this.source.push(this.wrap(a,b))},merge:function(){var a=this.empty();return this.each(function(b){a.add(["  ",b,"\n"])}),a},each:function(a){for(var b=0,c=this.source.length;b<c;b++)a(this.source[b])},empty:function(){var a=this.currentLocation||{start:{}};return new g(a.start.line,a.start.column,this.srcFile)},wrap:function(a){var b=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return a instanceof g?a:(a=d(a,this,b),new g(b.start.line,b.start.column,this.srcFile,a))},functionCall:function(a,b,c){return c=this.generateList(c),this.wrap([a,b?"."+b+"(":"(",c,")"])},quotedString:function(a){return'"'+(a+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(a){var b=[];for(var c in a)if(a.hasOwnProperty(c)){var e=d(a[c],this);"undefined"!==e&&b.push([this.quotedString(c),":",e])}var f=this.generateList(b);return f.prepend("{"),f.add("}"),f},generateList:function(a){for(var b=this.empty(),c=0,e=a.length;c<e;c++)c&&b.add(","),b.add(d(a[c],this));return b},generateArray:function(a){var b=this.generateList(a);return b.prepend("["),b.add("]"),b}},b["default"]=e,a.exports=b["default"]}])})},{}],5:[function(require,module,exports){"use strict";require("./lib/locales");exports=module.exports=require("./lib/handlebars-intl")},{"./lib/handlebars-intl":7,"./lib/locales":1}],6:[function(require,module,exports){"use strict";exports["default"]={locale:"en",pluralRuleFunction:function(n,ord){var s=String(n).split("."),v0=!s[1],t0=Number(s[0])==n,n10=t0&&s[0].slice(-1),n100=t0&&s[0].slice(-2);if(ord)return n10==1&&n100!=11?"one":n10==2&&n100!=12?"two":n10==3&&n100!=13?"few":"other";return n==1&&v0?"one":"other"},fields:{year:{displayName:"Year",relative:{0:"this year",1:"next year","-1":"last year"},relativeTime:{future:{one:"in {0} year",other:"in {0} years"},past:{one:"{0} year ago",other:"{0} years ago"}}},month:{displayName:"Month",relative:{0:"this month",1:"next month","-1":"last month"},relativeTime:{future:{one:"in {0} month",other:"in {0} months"},past:{one:"{0} month ago",other:"{0} months ago"}}},day:{displayName:"Day",relative:{0:"today",1:"tomorrow","-1":"yesterday"},relativeTime:{future:{one:"in {0} day",other:"in {0} days"},past:{one:"{0} day ago",other:"{0} days ago"}}},hour:{displayName:"Hour",relativeTime:{future:{one:"in {0} hour",other:"in {0} hours"},past:{one:"{0} hour ago",other:"{0} hours ago"}}},minute:{displayName:"Minute",relativeTime:{future:{one:"in {0} minute",other:"in {0} minutes"},past:{one:"{0} minute ago",other:"{0} minutes ago"}}},second:{displayName:"Second",relative:{0:"now"},relativeTime:{future:{one:"in {0} second",other:"in {0} seconds"},past:{one:"{0} second ago",other:"{0} seconds ago"}}}}}},{}],7:[function(require,module,exports){"use strict";exports.__addLocaleData=__addLocaleData;var intl$messageformat$$=require("intl-messageformat"),intl$relativeformat$$=require("intl-relativeformat"),src$helpers$$=require("./helpers.js"),src$en$$=require("./en.js");function __addLocaleData(data){intl$messageformat$$["default"].__addLocaleData(data);intl$relativeformat$$["default"].__addLocaleData(data)}__addLocaleData(src$en$$["default"]);exports.registerWith=src$helpers$$.registerWith},{"./en.js":6,"./helpers.js":8,"intl-messageformat":13,"intl-relativeformat":22}],8:[function(require,module,exports){"use strict";var intl$messageformat$$=require("intl-messageformat"),intl$relativeformat$$=require("intl-relativeformat"),intl$format$cache$$=require("intl-format-cache"),src$utils$$=require("./utils.js");var getNumberFormat=intl$format$cache$$["default"](Intl.NumberFormat);var getDateTimeFormat=intl$format$cache$$["default"](Intl.DateTimeFormat);var getMessageFormat=intl$format$cache$$["default"](intl$messageformat$$["default"]);var getRelativeFormat=intl$format$cache$$["default"](intl$relativeformat$$["default"]);function registerWith(Handlebars){var SafeString=Handlebars.SafeString,createFrame=Handlebars.createFrame,escape=Handlebars.Utils.escapeExpression;var helpers={intl:intl,intlGet:intlGet,formatDate:formatDate,formatTime:formatTime,formatRelative:formatRelative,formatNumber:formatNumber,formatMessage:formatMessage,formatHTMLMessage:formatHTMLMessage,intlDate:deprecate("intlDate",formatDate),intlTime:deprecate("intlTime",formatTime),intlNumber:deprecate("intlNumber",formatNumber),intlMessage:deprecate("intlMessage",formatMessage),intlHTMLMessage:deprecate("intlHTMLMessage",formatHTMLMessage)};for(var name in helpers){if(helpers.hasOwnProperty(name)){Handlebars.registerHelper(name,helpers[name])}}function deprecate(name,suggestion){return function(){if(typeof console!=="undefined"&&typeof console.warn==="function"){console.warn("{{"+name+"}} is deprecated, use: "+"{{"+suggestion.name+"}}")}return suggestion.apply(this,arguments)}}function intl(options){if(!options.fn){throw new Error("{{#intl}} must be invoked as a block helper")}var data=createFrame(options.data),intlData=src$utils$$.extend({},data.intl,options.hash);data.intl=intlData;return options.fn(this,{data:data})}function intlGet(path,options){var intlData=options.data&&options.data.intl,pathParts=path.split(".");var obj,len,i;try{for(i=0,len=pathParts.length;i<len;i++){obj=intlData=intlData[pathParts[i]]}}finally{if(obj===undefined){throw new ReferenceError("Could not find Intl object: "+path)}}return obj}function formatDate(date,format,options){date=new Date(date);assertIsDate(date,"A date or timestamp must be provided to {{formatDate}}");if(!options){options=format;format=null}var locales=options.data.intl&&options.data.intl.locales;var formatOptions=getFormatOptions("date",format,options);return getDateTimeFormat(locales,formatOptions).format(date)}function formatTime(date,format,options){date=new Date(date);assertIsDate(date,"A date or timestamp must be provided to {{formatTime}}");if(!options){options=format;format=null}var locales=options.data.intl&&options.data.intl.locales;var formatOptions=getFormatOptions("time",format,options);return getDateTimeFormat(locales,formatOptions).format(date)}function formatRelative(date,format,options){date=new Date(date);assertIsDate(date,"A date or timestamp must be provided to {{formatRelative}}");if(!options){options=format;format=null}var locales=options.data.intl&&options.data.intl.locales;var formatOptions=getFormatOptions("relative",format,options);var now=options.hash.now;delete formatOptions.now;return getRelativeFormat(locales,formatOptions).format(date,{now:now})}function formatNumber(num,format,options){assertIsNumber(num,"A number must be provided to {{formatNumber}}");if(!options){options=format;format=null}var locales=options.data.intl&&options.data.intl.locales;var formatOptions=getFormatOptions("number",format,options);return getNumberFormat(locales,formatOptions).format(num)}function formatMessage(message,options){if(!options){options=message;message=null}var hash=options.hash;if(!(message||typeof message==="string"||hash.intlName)){throw new ReferenceError("{{formatMessage}} must be provided a message or intlName")}var intlData=options.data.intl||{},locales=intlData.locales,formats=intlData.formats;if(!message&&hash.intlName){message=intlGet(hash.intlName,options)}if(typeof message==="function"){return message(hash)}if(typeof message==="string"){message=getMessageFormat(message,locales,formats)}return message.format(hash)}function formatHTMLMessage(){var options=[].slice.call(arguments).pop(),hash=options.hash;var key,value;for(key in hash){if(hash.hasOwnProperty(key)){value=hash[key];if(typeof value==="string"){hash[key]=escape(value)}}}return new SafeString(String(formatMessage.apply(this,arguments)))}function assertIsDate(date,errMsg){if(!isFinite(date)){throw new TypeError(errMsg)}}function assertIsNumber(num,errMsg){if(typeof num!=="number"){throw new TypeError(errMsg)}}function getFormatOptions(type,format,options){var hash=options.hash;var formatOptions;if(format){if(typeof format==="string"){formatOptions=intlGet("formats."+type+"."+format,options)}formatOptions=src$utils$$.extend({},formatOptions,hash)}else{formatOptions=hash}return formatOptions}}exports.registerWith=registerWith},{"./utils.js":9,"intl-format-cache":10,"intl-messageformat":13,"intl-relativeformat":22}],9:[function(require,module,exports){"use strict";function extend(obj){var sources=Array.prototype.slice.call(arguments,1),i,len,source,key;for(i=0,len=sources.length;i<len;i+=1){source=sources[i];if(!source){continue}for(key in source){if(source.hasOwnProperty(key)){obj[key]=source[key]}}}return obj}exports.extend=extend},{}],10:[function(require,module,exports){"use strict";exports=module.exports=require("./lib/memoizer")["default"];exports["default"]=exports},{"./lib/memoizer":12}],11:[function(require,module,exports){"use strict";var bind=Function.prototype.bind||function(oThis){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)))};if(this.prototype){fNOP.prototype=this.prototype}fBound.prototype=new fNOP;return fBound};var hop=Object.prototype.hasOwnProperty;var realDefineProp=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return false}}();var es3=!realDefineProp&&!Object.prototype.__defineGetter__;var defineProperty=realDefineProp?Object.defineProperty:function(obj,name,desc){if("get"in desc&&obj.__defineGetter__){obj.__defineGetter__(name,desc.get)}else if(!hop.call(obj,name)||"value"in desc){obj[name]=desc.value}};var objCreate=Object.create||function(proto,props){var obj,k;function F(){}F.prototype=proto;obj=new F;for(k in props){if(hop.call(props,k)){defineProperty(obj,k,props[k])}}return obj};exports.bind=bind,exports.defineProperty=defineProperty,exports.objCreate=objCreate},{}],12:[function(require,module,exports){"use strict";var src$es5$$=require("./es5");exports["default"]=createFormatCache;function createFormatCache(FormatConstructor){var cache=src$es5$$.objCreate(null);return function(){var args=Array.prototype.slice.call(arguments);var cacheId=getCacheId(args);var format=cacheId&&cache[cacheId];if(!format){format=new(src$es5$$.bind.apply(FormatConstructor,[null].concat(args)));if(cacheId){cache[cacheId]=format}}return format}}function getCacheId(inputs){if(typeof JSON==="undefined"){return}var cacheId=[];var i,len,input;for(i=0,len=inputs.length;i<len;i+=1){input=inputs[i];if(input&&typeof input==="object"){cacheId.push(orderedProps(input))}else{cacheId.push(input)}}return JSON.stringify(cacheId)}function orderedProps(obj){var props=[],keys=[];var key,i,len,prop;for(key in obj){if(obj.hasOwnProperty(key)){keys.push(key)}}var orderedKeys=keys.sort();for(i=0,len=orderedKeys.length;i<len;i+=1){key=orderedKeys[i];prop={};prop[key]=obj[key];props[i]=prop}return props}},{"./es5":11}],13:[function(require,module,exports){"use strict";var IntlMessageFormat=require("./lib/main")["default"];require("./lib/locales");exports=module.exports=IntlMessageFormat;exports["default"]=exports},{"./lib/locales":1,"./lib/main":18}],14:[function(require,module,exports){"use strict";exports["default"]=Compiler;function Compiler(locales,formats,pluralFn){this.locales=locales;this.formats=formats;this.pluralFn=pluralFn}Compiler.prototype.compile=function(ast){this.pluralStack=[];this.currentPlural=null;this.pluralNumberFormat=null;return this.compileMessage(ast)};Compiler.prototype.compileMessage=function(ast){if(!(ast&&ast.type==="messageFormatPattern")){throw new Error('Message AST is not of type: "messageFormatPattern"')}var elements=ast.elements,pattern=[];var i,len,element;for(i=0,len=elements.length;i<len;i+=1){element=elements[i];switch(element.type){case"messageTextElement":pattern.push(this.compileMessageText(element));break;case"argumentElement":pattern.push(this.compileArgument(element));break;default:throw new Error("Message element does not have a valid type")}}return pattern};Compiler.prototype.compileMessageText=function(element){if(this.currentPlural&&/(^|[^\\])#/g.test(element.value)){if(!this.pluralNumberFormat){this.pluralNumberFormat=new Intl.NumberFormat(this.locales)}return new PluralOffsetString(this.currentPlural.id,this.currentPlural.format.offset,this.pluralNumberFormat,element.value)}return element.value.replace(/\\#/g,"#")};Compiler.prototype.compileArgument=function(element){var format=element.format;if(!format){return new StringFormat(element.id)}var formats=this.formats,locales=this.locales,pluralFn=this.pluralFn,options;switch(format.type){case"numberFormat":options=formats.number[format.style];return{id:element.id,format:new Intl.NumberFormat(locales,options).format};case"dateFormat":options=formats.date[format.style];return{id:element.id,format:new Intl.DateTimeFormat(locales,options).format};case"timeFormat":options=formats.time[format.style];return{id:element.id,format:new Intl.DateTimeFormat(locales,options).format};case"pluralFormat":options=this.compileOptions(element);return new PluralFormat(element.id,format.ordinal,format.offset,options,pluralFn);case"selectFormat":options=this.compileOptions(element);return new SelectFormat(element.id,options);default:throw new Error("Message element does not have a valid format type")}};Compiler.prototype.compileOptions=function(element){var format=element.format,options=format.options,optionsHash={};this.pluralStack.push(this.currentPlural);this.currentPlural=format.type==="pluralFormat"?element:null;var i,len,option;for(i=0,len=options.length;i<len;i+=1){option=options[i];optionsHash[option.selector]=this.compileMessage(option.value)}this.currentPlural=this.pluralStack.pop();return optionsHash};function StringFormat(id){this.id=id}StringFormat.prototype.format=function(value){if(!value){return""}return typeof value==="string"?value:String(value)};function PluralFormat(id,useOrdinal,offset,options,pluralFn){this.id=id;this.useOrdinal=useOrdinal;this.offset=offset;this.options=options;this.pluralFn=pluralFn}PluralFormat.prototype.getOption=function(value){var options=this.options;var option=options["="+value]||options[this.pluralFn(value-this.offset,this.useOrdinal)];return option||options.other};function PluralOffsetString(id,offset,numberFormat,string){this.id=id;this.offset=offset;this.numberFormat=numberFormat;this.string=string}PluralOffsetString.prototype.format=function(value){var number=this.numberFormat.format(value-this.offset);return this.string.replace(/(^|[^\\])#/g,"$1"+number).replace(/\\#/g,"#")};function SelectFormat(id,options){this.id=id;this.options=options}SelectFormat.prototype.getOption=function(value){var options=this.options;return options[value]||options.other}},{}],15:[function(require,module,exports){"use strict";var src$utils$$=require("./utils"),src$es5$$=require("./es5"),src$compiler$$=require("./compiler"),intl$messageformat$parser$$=require("intl-messageformat-parser");exports["default"]=MessageFormat;function MessageFormat(message,locales,formats){var ast=typeof message==="string"?MessageFormat.__parse(message):message;if(!(ast&&ast.type==="messageFormatPattern")){throw new TypeError("A message must be provided as a String or AST.")}formats=this._mergeFormats(MessageFormat.formats,formats);src$es5$$.defineProperty(this,"_locale",{value:this._resolveLocale(locales)});var pluralFn=this._findPluralRuleFunction(this._locale);var pattern=this._compilePattern(ast,locales,formats,pluralFn);var messageFormat=this;this.format=function(values){return messageFormat._format(pattern,values)}}src$es5$$.defineProperty(MessageFormat,"formats",{enumerable:true,value:{number:{currency:{style:"currency"},percent:{style:"percent"}},date:{"short":{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},"long":{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{"short":{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},"long":{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}}});src$es5$$.defineProperty(MessageFormat,"__localeData__",{value:src$es5$$.objCreate(null)});src$es5$$.defineProperty(MessageFormat,"__addLocaleData",{value:function(data){if(!(data&&data.locale)){throw new Error("Locale data provided to IntlMessageFormat is missing a "+"`locale` property")}MessageFormat.__localeData__[data.locale.toLowerCase()]=data}});src$es5$$.defineProperty(MessageFormat,"__parse",{value:intl$messageformat$parser$$["default"].parse});src$es5$$.defineProperty(MessageFormat,"defaultLocale",{enumerable:true,writable:true,value:undefined});MessageFormat.prototype.resolvedOptions=function(){return{locale:this._locale}};MessageFormat.prototype._compilePattern=function(ast,locales,formats,pluralFn){var compiler=new src$compiler$$["default"](locales,formats,pluralFn);return compiler.compile(ast)};MessageFormat.prototype._findPluralRuleFunction=function(locale){var localeData=MessageFormat.__localeData__;var data=localeData[locale.toLowerCase()];while(data){if(data.pluralRuleFunction){return data.pluralRuleFunction}data=data.parentLocale&&localeData[data.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlMessageFormat is missing a "+"`pluralRuleFunction` for :"+locale)};MessageFormat.prototype._format=function(pattern,values){var result="",i,len,part,id,value;for(i=0,len=pattern.length;i<len;i+=1){part=pattern[i];if(typeof part==="string"){result+=part;continue}id=part.id;if(!(values&&src$utils$$.hop.call(values,id))){throw new Error("A value must be provided for: "+id)}value=values[id];if(part.options){result+=this._format(part.getOption(value),values)}else{result+=part.format(value)}}return result};MessageFormat.prototype._mergeFormats=function(defaults,formats){var mergedFormats={},type,mergedType;for(type in defaults){if(!src$utils$$.hop.call(defaults,type)){continue}mergedFormats[type]=mergedType=src$es5$$.objCreate(defaults[type]);if(formats&&src$utils$$.hop.call(formats,type)){src$utils$$.extend(mergedType,formats[type])}}return mergedFormats};MessageFormat.prototype._resolveLocale=function(locales){if(typeof locales==="string"){locales=[locales]}locales=(locales||[]).concat(MessageFormat.defaultLocale);var localeData=MessageFormat.__localeData__;var i,len,localeParts,data;for(i=0,len=locales.length;i<len;i+=1){localeParts=locales[i].toLowerCase().split("-");while(localeParts.length){data=localeData[localeParts.join("-")];if(data){return data.locale}localeParts.pop()}}var defaultLocale=locales.pop();throw new Error("No locale data has been added to IntlMessageFormat for: "+locales.join(", ")+", or the default locale: "+defaultLocale)}},{"./compiler":14,"./es5":17,"./utils":19,"intl-messageformat-parser":20}],16:[function(require,module,exports){"use strict";exports["default"]={locale:"en",pluralRuleFunction:function(n,ord){var s=String(n).split("."),v0=!s[1],t0=Number(s[0])==n,n10=t0&&s[0].slice(-1),n100=t0&&s[0].slice(-2);if(ord)return n10==1&&n100!=11?"one":n10==2&&n100!=12?"two":n10==3&&n100!=13?"few":"other";return n==1&&v0?"one":"other"}}},{}],17:[function(require,module,exports){"use strict";var src$utils$$=require("./utils");var realDefineProp=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return false}}();var es3=!realDefineProp&&!Object.prototype.__defineGetter__;var defineProperty=realDefineProp?Object.defineProperty:function(obj,name,desc){if("get"in desc&&obj.__defineGetter__){obj.__defineGetter__(name,desc.get)}else if(!src$utils$$.hop.call(obj,name)||"value"in desc){obj[name]=desc.value}};var objCreate=Object.create||function(proto,props){var obj,k;function F(){}F.prototype=proto;obj=new F;for(k in props){if(src$utils$$.hop.call(props,k)){defineProperty(obj,k,props[k])}}return obj};exports.defineProperty=defineProperty,exports.objCreate=objCreate},{"./utils":19}],18:[function(require,module,exports){"use strict";var src$core$$=require("./core"),src$en$$=require("./en");src$core$$["default"].__addLocaleData(src$en$$["default"]);src$core$$["default"].defaultLocale="en";exports["default"]=src$core$$["default"]},{"./core":15,"./en":16}],19:[function(require,module,exports){"use strict";exports.extend=extend;var hop=Object.prototype.hasOwnProperty;function extend(obj){var sources=Array.prototype.slice.call(arguments,1),i,len,source,key;for(i=0,len=sources.length;i<len;i+=1){source=sources[i];if(!source){continue}for(key in source){if(hop.call(source,key)){obj[key]=source[key]}}}return obj}exports.hop=hop},{}],20:[function(require,module,exports){"use strict";exports=module.exports=require("./lib/parser")["default"];exports["default"]=exports},{"./lib/parser":21}],21:[function(require,module,exports){"use strict";exports["default"]=function(){function peg$subclass(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor}function SyntaxError(message,expected,found,offset,line,column){this.message=message;this.expected=expected;this.found=found;this.offset=offset;this.line=line;this.column=column;this.name="SyntaxError"}peg$subclass(SyntaxError,Error);function parse(input){var options=arguments.length>1?arguments[1]:{},peg$FAILED={},peg$startRuleFunctions={start:peg$parsestart},peg$startRuleFunction=peg$parsestart,peg$c0=[],peg$c1=function(elements){return{type:"messageFormatPattern",elements:elements}},peg$c2=peg$FAILED,peg$c3=function(text){var string="",i,j,outerLen,inner,innerLen;for(i=0,outerLen=text.length;i<outerLen;i+=1){inner=text[i];for(j=0,innerLen=inner.length;j<innerLen;j+=1){string+=inner[j]}}return string},peg$c4=function(messageText){return{type:"messageTextElement",value:messageText}},peg$c5=/^[^ \t\n\r,.+={}#]/,peg$c6={type:"class",value:"[^ \\t\\n\\r,.+={}#]",description:"[^ \\t\\n\\r,.+={}#]"},peg$c7="{",peg$c8={type:"literal",value:"{",description:'"{"'},peg$c9=null,peg$c10=",",peg$c11={type:"literal",value:",",description:'","'},peg$c12="}",peg$c13={type:"literal",value:"}",description:'"}"'},peg$c14=function(id,format){return{type:"argumentElement",id:id,format:format&&format[2]}},peg$c15="number",peg$c16={type:"literal",value:"number",description:'"number"'},peg$c17="date",peg$c18={type:"literal",value:"date",description:'"date"'},peg$c19="time",peg$c20={type:"literal",value:"time",description:'"time"'},peg$c21=function(type,style){return{type:type+"Format",style:style&&style[2]}},peg$c22="plural",peg$c23={type:"literal",value:"plural",description:'"plural"'},peg$c24=function(pluralStyle){return{type:pluralStyle.type,ordinal:false,offset:pluralStyle.offset||0,options:pluralStyle.options}},peg$c25="selectordinal",peg$c26={type:"literal",value:"selectordinal",description:'"selectordinal"'},peg$c27=function(pluralStyle){return{type:pluralStyle.type,ordinal:true,offset:pluralStyle.offset||0,
options:pluralStyle.options}},peg$c28="select",peg$c29={type:"literal",value:"select",description:'"select"'},peg$c30=function(options){return{type:"selectFormat",options:options}},peg$c31="=",peg$c32={type:"literal",value:"=",description:'"="'},peg$c33=function(selector,pattern){return{type:"optionalFormatPattern",selector:selector,value:pattern}},peg$c34="offset:",peg$c35={type:"literal",value:"offset:",description:'"offset:"'},peg$c36=function(number){return number},peg$c37=function(offset,options){return{type:"pluralFormat",offset:offset,options:options}},peg$c38={type:"other",description:"whitespace"},peg$c39=/^[ \t\n\r]/,peg$c40={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},peg$c41={type:"other",description:"optionalWhitespace"},peg$c42=/^[0-9]/,peg$c43={type:"class",value:"[0-9]",description:"[0-9]"},peg$c44=/^[0-9a-f]/i,peg$c45={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},peg$c46="0",peg$c47={type:"literal",value:"0",description:'"0"'},peg$c48=/^[1-9]/,peg$c49={type:"class",value:"[1-9]",description:"[1-9]"},peg$c50=function(digits){return parseInt(digits,10)},peg$c51=/^[^{}\\\0-\x1F \t\n\r]/,peg$c52={type:"class",value:"[^{}\\\\\\0-\\x1F \\t\\n\\r]",description:"[^{}\\\\\\0-\\x1F \\t\\n\\r]"},peg$c53="\\#",peg$c54={type:"literal",value:"\\#",description:'"\\\\#"'},peg$c55=function(){return"\\#"},peg$c56="\\{",peg$c57={type:"literal",value:"\\{",description:'"\\\\{"'},peg$c58=function(){return"{"},peg$c59="\\}",peg$c60={type:"literal",value:"\\}",description:'"\\\\}"'},peg$c61=function(){return"}"},peg$c62="\\u",peg$c63={type:"literal",value:"\\u",description:'"\\\\u"'},peg$c64=function(digits){return String.fromCharCode(parseInt(digits,16))},peg$c65=function(chars){return chars.join("")},peg$currPos=0,peg$reportedPos=0,peg$cachedPos=0,peg$cachedPosDetails={line:1,column:1,seenCR:false},peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0,peg$result;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions)){throw new Error("Can't start parsing from rule \""+options.startRule+'".')}peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}function text(){return input.substring(peg$reportedPos,peg$currPos)}function offset(){return peg$reportedPos}function line(){return peg$computePosDetails(peg$reportedPos).line}function column(){return peg$computePosDetails(peg$reportedPos).column}function expected(description){throw peg$buildException(null,[{type:"other",description:description}],peg$reportedPos)}function error(message){throw peg$buildException(message,null,peg$reportedPos)}function peg$computePosDetails(pos){function advance(details,startPos,endPos){var p,ch;for(p=startPos;p<endPos;p++){ch=input.charAt(p);if(ch==="\n"){if(!details.seenCR){details.line++}details.column=1;details.seenCR=false}else if(ch==="\r"||ch==="\u2028"||ch==="\u2029"){details.line++;details.column=1;details.seenCR=true}else{details.column++;details.seenCR=false}}}if(peg$cachedPos!==pos){if(peg$cachedPos>pos){peg$cachedPos=0;peg$cachedPosDetails={line:1,column:1,seenCR:false}}advance(peg$cachedPosDetails,peg$cachedPos,pos);peg$cachedPos=pos}return peg$cachedPosDetails}function peg$fail(expected){if(peg$currPos<peg$maxFailPos){return}if(peg$currPos>peg$maxFailPos){peg$maxFailPos=peg$currPos;peg$maxFailExpected=[]}peg$maxFailExpected.push(expected)}function peg$buildException(message,expected,pos){function cleanupExpected(expected){var i=1;expected.sort(function(a,b){if(a.description<b.description){return-1}else if(a.description>b.description){return 1}else{return 0}});while(i<expected.length){if(expected[i-1]===expected[i]){expected.splice(i,1)}else{i++}}}function buildMessage(expected,found){function stringEscape(s){function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(ch){return"\\x0"+hex(ch)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(ch){return"\\x"+hex(ch)}).replace(/[\u0180-\u0FFF]/g,function(ch){return"\\u0"+hex(ch)}).replace(/[\u1080-\uFFFF]/g,function(ch){return"\\u"+hex(ch)})}var expectedDescs=new Array(expected.length),expectedDesc,foundDesc,i;for(i=0;i<expected.length;i++){expectedDescs[i]=expected[i].description}expectedDesc=expected.length>1?expectedDescs.slice(0,-1).join(", ")+" or "+expectedDescs[expected.length-1]:expectedDescs[0];foundDesc=found?'"'+stringEscape(found)+'"':"end of input";return"Expected "+expectedDesc+" but "+foundDesc+" found."}var posDetails=peg$computePosDetails(pos),found=pos<input.length?input.charAt(pos):null;if(expected!==null){cleanupExpected(expected)}return new SyntaxError(message!==null?message:buildMessage(expected,found),expected,found,pos,posDetails.line,posDetails.column)}function peg$parsestart(){var s0;s0=peg$parsemessageFormatPattern();return s0}function peg$parsemessageFormatPattern(){var s0,s1,s2;s0=peg$currPos;s1=[];s2=peg$parsemessageFormatElement();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parsemessageFormatElement()}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c1(s1)}s0=s1;return s0}function peg$parsemessageFormatElement(){var s0;s0=peg$parsemessageTextElement();if(s0===peg$FAILED){s0=peg$parseargumentElement()}return s0}function peg$parsemessageText(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=[];s2=peg$currPos;s3=peg$parse_();if(s3!==peg$FAILED){s4=peg$parsechars();if(s4!==peg$FAILED){s5=peg$parse_();if(s5!==peg$FAILED){s3=[s3,s4,s5];s2=s3}else{peg$currPos=s2;s2=peg$c2}}else{peg$currPos=s2;s2=peg$c2}}else{peg$currPos=s2;s2=peg$c2}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);s2=peg$currPos;s3=peg$parse_();if(s3!==peg$FAILED){s4=peg$parsechars();if(s4!==peg$FAILED){s5=peg$parse_();if(s5!==peg$FAILED){s3=[s3,s4,s5];s2=s3}else{peg$currPos=s2;s2=peg$c2}}else{peg$currPos=s2;s2=peg$c2}}else{peg$currPos=s2;s2=peg$c2}}}else{s1=peg$c2}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c3(s1)}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parsews();if(s1!==peg$FAILED){s1=input.substring(s0,peg$currPos)}s0=s1}return s0}function peg$parsemessageTextElement(){var s0,s1;s0=peg$currPos;s1=peg$parsemessageText();if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c4(s1)}s0=s1;return s0}function peg$parseargument(){var s0,s1,s2;s0=peg$parsenumber();if(s0===peg$FAILED){s0=peg$currPos;s1=[];if(peg$c5.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c6)}}if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);if(peg$c5.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c6)}}}}else{s1=peg$c2}if(s1!==peg$FAILED){s1=input.substring(s0,peg$currPos)}s0=s1}return s0}function peg$parseargumentElement(){var s0,s1,s2,s3,s4,s5,s6,s7,s8;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===123){s1=peg$c7;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c8)}}if(s1!==peg$FAILED){s2=peg$parse_();if(s2!==peg$FAILED){s3=peg$parseargument();if(s3!==peg$FAILED){s4=peg$parse_();if(s4!==peg$FAILED){s5=peg$currPos;if(input.charCodeAt(peg$currPos)===44){s6=peg$c10;peg$currPos++}else{s6=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s6!==peg$FAILED){s7=peg$parse_();if(s7!==peg$FAILED){s8=peg$parseelementFormat();if(s8!==peg$FAILED){s6=[s6,s7,s8];s5=s6}else{peg$currPos=s5;s5=peg$c2}}else{peg$currPos=s5;s5=peg$c2}}else{peg$currPos=s5;s5=peg$c2}if(s5===peg$FAILED){s5=peg$c9}if(s5!==peg$FAILED){s6=peg$parse_();if(s6!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s7=peg$c12;peg$currPos++}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c13)}}if(s7!==peg$FAILED){peg$reportedPos=s0;s1=peg$c14(s3,s5);s0=s1}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}return s0}function peg$parseelementFormat(){var s0;s0=peg$parsesimpleFormat();if(s0===peg$FAILED){s0=peg$parsepluralFormat();if(s0===peg$FAILED){s0=peg$parseselectOrdinalFormat();if(s0===peg$FAILED){s0=peg$parseselectFormat()}}}return s0}function peg$parsesimpleFormat(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;if(input.substr(peg$currPos,6)===peg$c15){s1=peg$c15;peg$currPos+=6}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c16)}}if(s1===peg$FAILED){if(input.substr(peg$currPos,4)===peg$c17){s1=peg$c17;peg$currPos+=4}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c18)}}if(s1===peg$FAILED){if(input.substr(peg$currPos,4)===peg$c19){s1=peg$c19;peg$currPos+=4}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c20)}}}}if(s1!==peg$FAILED){s2=peg$parse_();if(s2!==peg$FAILED){s3=peg$currPos;if(input.charCodeAt(peg$currPos)===44){s4=peg$c10;peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s4!==peg$FAILED){s5=peg$parse_();if(s5!==peg$FAILED){s6=peg$parsechars();if(s6!==peg$FAILED){s4=[s4,s5,s6];s3=s4}else{peg$currPos=s3;s3=peg$c2}}else{peg$currPos=s3;s3=peg$c2}}else{peg$currPos=s3;s3=peg$c2}if(s3===peg$FAILED){s3=peg$c9}if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c21(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}return s0}function peg$parsepluralFormat(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.substr(peg$currPos,6)===peg$c22){s1=peg$c22;peg$currPos+=6}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c23)}}if(s1!==peg$FAILED){s2=peg$parse_();if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s3=peg$c10;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s3!==peg$FAILED){s4=peg$parse_();if(s4!==peg$FAILED){s5=peg$parsepluralStyle();if(s5!==peg$FAILED){peg$reportedPos=s0;s1=peg$c24(s5);s0=s1}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}return s0}function peg$parseselectOrdinalFormat(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.substr(peg$currPos,13)===peg$c25){s1=peg$c25;peg$currPos+=13}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c26)}}if(s1!==peg$FAILED){s2=peg$parse_();if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s3=peg$c10;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s3!==peg$FAILED){s4=peg$parse_();if(s4!==peg$FAILED){s5=peg$parsepluralStyle();if(s5!==peg$FAILED){peg$reportedPos=s0;s1=peg$c27(s5);s0=s1}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}return s0}function peg$parseselectFormat(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;if(input.substr(peg$currPos,6)===peg$c28){s1=peg$c28;peg$currPos+=6}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c29)}}if(s1!==peg$FAILED){s2=peg$parse_();if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s3=peg$c10;peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}if(s3!==peg$FAILED){s4=peg$parse_();if(s4!==peg$FAILED){s5=[];s6=peg$parseoptionalFormatPattern();if(s6!==peg$FAILED){while(s6!==peg$FAILED){s5.push(s6);s6=peg$parseoptionalFormatPattern()}}else{s5=peg$c2}if(s5!==peg$FAILED){peg$reportedPos=s0;s1=peg$c30(s5);s0=s1}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}return s0}function peg$parseselector(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$currPos;if(input.charCodeAt(peg$currPos)===61){s2=peg$c31;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c32)}}if(s2!==peg$FAILED){s3=peg$parsenumber();if(s3!==peg$FAILED){s2=[s2,s3];s1=s2}else{peg$currPos=s1;s1=peg$c2}}else{peg$currPos=s1;s1=peg$c2}if(s1!==peg$FAILED){s1=input.substring(s0,peg$currPos)}s0=s1;if(s0===peg$FAILED){s0=peg$parsechars()}return s0}function peg$parseoptionalFormatPattern(){var s0,s1,s2,s3,s4,s5,s6,s7,s8;s0=peg$currPos;s1=peg$parse_();if(s1!==peg$FAILED){s2=peg$parseselector();if(s2!==peg$FAILED){s3=peg$parse_();if(s3!==peg$FAILED){if(input.charCodeAt(peg$currPos)===123){s4=peg$c7;peg$currPos++}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c8)}}if(s4!==peg$FAILED){s5=peg$parse_();if(s5!==peg$FAILED){s6=peg$parsemessageFormatPattern();if(s6!==peg$FAILED){s7=peg$parse_();if(s7!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s8=peg$c12;peg$currPos++}else{s8=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c13)}}if(s8!==peg$FAILED){peg$reportedPos=s0;s1=peg$c33(s2,s6);s0=s1}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}return s0}function peg$parseoffset(){var s0,s1,s2,s3;s0=peg$currPos;if(input.substr(peg$currPos,7)===peg$c34){s1=peg$c34;peg$currPos+=7}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c35)}}if(s1!==peg$FAILED){s2=peg$parse_();if(s2!==peg$FAILED){s3=peg$parsenumber();if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c36(s3);s0=s1}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}return s0}function peg$parsepluralStyle(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseoffset();if(s1===peg$FAILED){s1=peg$c9}if(s1!==peg$FAILED){s2=peg$parse_();if(s2!==peg$FAILED){s3=[];s4=peg$parseoptionalFormatPattern();if(s4!==peg$FAILED){while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseoptionalFormatPattern()}}else{s3=peg$c2}if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c37(s1,s3);s0=s1}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}return s0}function peg$parsews(){var s0,s1;peg$silentFails++;s0=[];if(peg$c39.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c40)}}if(s1!==peg$FAILED){while(s1!==peg$FAILED){s0.push(s1);if(peg$c39.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c40)}}}}else{s0=peg$c2}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c38)}}return s0}function peg$parse_(){var s0,s1,s2;peg$silentFails++;s0=peg$currPos;s1=[];s2=peg$parsews();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parsews()}if(s1!==peg$FAILED){s1=input.substring(s0,peg$currPos)}s0=s1;peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c41)}}return s0}function peg$parsedigit(){var s0;if(peg$c42.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c43)}}return s0}function peg$parsehexDigit(){var s0;if(peg$c44.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c45)}}return s0}function peg$parsenumber(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===48){s1=peg$c46;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c47)}}if(s1===peg$FAILED){s1=peg$currPos;s2=peg$currPos;if(peg$c48.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c49)}}if(s3!==peg$FAILED){s4=[];s5=peg$parsedigit();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parsedigit()}if(s4!==peg$FAILED){s3=[s3,s4];s2=s3}else{peg$currPos=s2;s2=peg$c2}}else{peg$currPos=s2;s2=peg$c2}if(s2!==peg$FAILED){s2=input.substring(s1,peg$currPos)}s1=s2}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c50(s1)}s0=s1;return s0}function peg$parsechar(){var s0,s1,s2,s3,s4,s5,s6,s7;if(peg$c51.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c52)}}if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c53){s1=peg$c53;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c54)}}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c55()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c56){s1=peg$c56;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c57)}}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c58()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c59){s1=peg$c59;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c60)}}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c61()}s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c62){s1=peg$c62;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c63)}}if(s1!==peg$FAILED){s2=peg$currPos;s3=peg$currPos;s4=peg$parsehexDigit();if(s4!==peg$FAILED){s5=peg$parsehexDigit();if(s5!==peg$FAILED){s6=peg$parsehexDigit();if(s6!==peg$FAILED){s7=peg$parsehexDigit();if(s7!==peg$FAILED){s4=[s4,s5,s6,s7];s3=s4}else{peg$currPos=s3;s3=peg$c2}}else{peg$currPos=s3;s3=peg$c2}}else{peg$currPos=s3;s3=peg$c2}}else{peg$currPos=s3;s3=peg$c2}if(s3!==peg$FAILED){s3=input.substring(s2,peg$currPos)}s2=s3;if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c64(s2);s0=s1}else{peg$currPos=s0;s0=peg$c2}}else{peg$currPos=s0;s0=peg$c2}}}}}return s0}function peg$parsechars(){var s0,s1,s2;s0=peg$currPos;s1=[];s2=peg$parsechar();if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);s2=peg$parsechar()}}else{s1=peg$c2}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c65(s1)}s0=s1;return s0}peg$result=peg$startRuleFunction();if(peg$result!==peg$FAILED&&peg$currPos===input.length){return peg$result}else{if(peg$result!==peg$FAILED&&peg$currPos<input.length){peg$fail({type:"end",description:"end of input"})}throw peg$buildException(null,peg$maxFailExpected,peg$maxFailPos)}}return{SyntaxError:SyntaxError,parse:parse}}()},{}],22:[function(require,module,exports){"use strict";var IntlRelativeFormat=require("./lib/main")["default"];require("./lib/locales");exports=module.exports=IntlRelativeFormat;exports["default"]=exports},{"./lib/locales":1,"./lib/main":27}],23:[function(require,module,exports){"use strict";var intl$messageformat$$=require("intl-messageformat"),src$diff$$=require("./diff"),src$es5$$=require("./es5");exports["default"]=RelativeFormat;var FIELDS=["second","minute","hour","day","month","year"];var STYLES=["best fit","numeric"];function RelativeFormat(locales,options){options=options||{};if(src$es5$$.isArray(locales)){locales=locales.concat()}src$es5$$.defineProperty(this,"_locale",{value:this._resolveLocale(locales)});src$es5$$.defineProperty(this,"_options",{value:{style:this._resolveStyle(options.style),units:this._isValidUnits(options.units)&&options.units}});src$es5$$.defineProperty(this,"_locales",{value:locales});src$es5$$.defineProperty(this,"_fields",{value:this._findFields(this._locale)});src$es5$$.defineProperty(this,"_messages",{value:src$es5$$.objCreate(null)});var relativeFormat=this;this.format=function format(date,options){return relativeFormat._format(date,options)}}src$es5$$.defineProperty(RelativeFormat,"__localeData__",{value:src$es5$$.objCreate(null)});src$es5$$.defineProperty(RelativeFormat,"__addLocaleData",{value:function(data){if(!(data&&data.locale)){throw new Error("Locale data provided to IntlRelativeFormat is missing a "+"`locale` property value")}RelativeFormat.__localeData__[data.locale.toLowerCase()]=data;intl$messageformat$$["default"].__addLocaleData(data)}});src$es5$$.defineProperty(RelativeFormat,"defaultLocale",{enumerable:true,writable:true,value:undefined});src$es5$$.defineProperty(RelativeFormat,"thresholds",{enumerable:true,value:{second:45,minute:45,hour:22,day:26,month:11}});RelativeFormat.prototype.resolvedOptions=function(){return{locale:this._locale,style:this._options.style,units:this._options.units}};RelativeFormat.prototype._compileMessage=function(units){var locales=this._locales;var resolvedLocale=this._locale;var field=this._fields[units];var relativeTime=field.relativeTime;var future="";var past="";var i;for(i in relativeTime.future){if(relativeTime.future.hasOwnProperty(i)){future+=" "+i+" {"+relativeTime.future[i].replace("{0}","#")+"}"}}for(i in relativeTime.past){if(relativeTime.past.hasOwnProperty(i)){past+=" "+i+" {"+relativeTime.past[i].replace("{0}","#")+"}"}}var message="{when, select, future {{0, plural, "+future+"}}"+"past {{0, plural, "+past+"}}}";return new intl$messageformat$$["default"](message,locales)};RelativeFormat.prototype._getMessage=function(units){var messages=this._messages;if(!messages[units]){messages[units]=this._compileMessage(units)}return messages[units]};RelativeFormat.prototype._getRelativeUnits=function(diff,units){var field=this._fields[units];if(field.relative){return field.relative[diff]}};RelativeFormat.prototype._findFields=function(locale){var localeData=RelativeFormat.__localeData__;var data=localeData[locale.toLowerCase()];while(data){if(data.fields){return data.fields}data=data.parentLocale&&localeData[data.parentLocale.toLowerCase()]}throw new Error("Locale data added to IntlRelativeFormat is missing `fields` for :"+locale)};RelativeFormat.prototype._format=function(date,options){var now=options&&options.now!==undefined?options.now:src$es5$$.dateNow();if(date===undefined){date=now}if(!isFinite(now)){throw new RangeError("The `now` option provided to IntlRelativeFormat#format() is not "+"in valid range.")}if(!isFinite(date)){throw new RangeError("The date value provided to IntlRelativeFormat#format() is not "+"in valid range.")}var diffReport=src$diff$$["default"](now,date);var units=this._options.units||this._selectUnits(diffReport);var diffInUnits=diffReport[units];if(this._options.style!=="numeric"){var relativeUnits=this._getRelativeUnits(diffInUnits,units);if(relativeUnits){return relativeUnits}}return this._getMessage(units).format({0:Math.abs(diffInUnits),when:diffInUnits<0?"past":"future"})};RelativeFormat.prototype._isValidUnits=function(units){if(!units||src$es5$$.arrIndexOf.call(FIELDS,units)>=0){return true}if(typeof units==="string"){var suggestion=/s$/.test(units)&&units.substr(0,units.length-1);if(suggestion&&src$es5$$.arrIndexOf.call(FIELDS,suggestion)>=0){throw new Error('"'+units+'" is not a valid IntlRelativeFormat `units` '+"value, did you mean: "+suggestion)}}throw new Error('"'+units+'" is not a valid IntlRelativeFormat `units` value, it '+'must be one of: "'+FIELDS.join('", "')+'"')};RelativeFormat.prototype._resolveLocale=function(locales){if(typeof locales==="string"){locales=[locales]}locales=(locales||[]).concat(RelativeFormat.defaultLocale);var localeData=RelativeFormat.__localeData__;var i,len,localeParts,data;for(i=0,len=locales.length;i<len;i+=1){localeParts=locales[i].toLowerCase().split("-");while(localeParts.length){data=localeData[localeParts.join("-")];if(data){return data.locale}localeParts.pop()}}var defaultLocale=locales.pop();throw new Error("No locale data has been added to IntlRelativeFormat for: "+locales.join(", ")+", or the default locale: "+defaultLocale)};RelativeFormat.prototype._resolveStyle=function(style){if(!style){return STYLES[0]}if(src$es5$$.arrIndexOf.call(STYLES,style)>=0){return style}throw new Error('"'+style+'" is not a valid IntlRelativeFormat `style` value, it '+'must be one of: "'+STYLES.join('", "')+'"')};RelativeFormat.prototype._selectUnits=function(diffReport){var i,l,units;for(i=0,l=FIELDS.length;i<l;i+=1){units=FIELDS[i];if(Math.abs(diffReport[units])<RelativeFormat.thresholds[units]){break}}return units}},{"./diff":24,"./es5":26,"intl-messageformat":13}],24:[function(require,module,exports){"use strict";var round=Math.round;function daysToYears(days){return days*400/146097}exports["default"]=function(from,to){from=+from;to=+to;var millisecond=round(to-from),second=round(millisecond/1e3),minute=round(second/60),hour=round(minute/60),day=round(hour/24),week=round(day/7);var rawYears=daysToYears(day),month=round(rawYears*12),year=round(rawYears);return{millisecond:millisecond,second:second,minute:minute,hour:hour,day:day,week:week,month:month,year:year}}},{}],25:[function(require,module,exports){arguments[4][6][0].apply(exports,arguments)},{dup:6}],26:[function(require,module,exports){"use strict";var hop=Object.prototype.hasOwnProperty;var toString=Object.prototype.toString;var realDefineProp=function(){try{return!!Object.defineProperty({},"a",{})}catch(e){return false}}();var es3=!realDefineProp&&!Object.prototype.__defineGetter__;var defineProperty=realDefineProp?Object.defineProperty:function(obj,name,desc){if("get"in desc&&obj.__defineGetter__){obj.__defineGetter__(name,desc.get)}else if(!hop.call(obj,name)||"value"in desc){obj[name]=desc.value}};var objCreate=Object.create||function(proto,props){var obj,k;function F(){}F.prototype=proto;obj=new F;for(k in props){if(hop.call(props,k)){defineProperty(obj,k,props[k])}}return obj};var arrIndexOf=Array.prototype.indexOf||function(search,fromIndex){var arr=this;if(!arr.length){return-1}for(var i=fromIndex||0,max=arr.length;i<max;i++){if(arr[i]===search){return i}}return-1};var isArray=Array.isArray||function(obj){return toString.call(obj)==="[object Array]"};var dateNow=Date.now||function(){return(new Date).getTime()};exports.defineProperty=defineProperty,exports.objCreate=objCreate,exports.arrIndexOf=arrIndexOf,exports.isArray=isArray,exports.dateNow=dateNow},{}],27:[function(require,module,exports){arguments[4][18][0].apply(exports,arguments)},{"./core":23,"./en":25,dup:18}],28:[function(require,module,exports){/**!

 @license
 handlebars v4.0.13

Copyright (C) 2011-2017 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.Handlebars=b():a.Handlebars=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";function d(){var a=r();return a.compile=function(b,c){return k.compile(b,c,a)},a.precompile=function(b,c){return k.precompile(b,c,a)},a.AST=i["default"],a.Compiler=k.Compiler,a.JavaScriptCompiler=m["default"],a.Parser=j.parser,a.parse=j.parse,a}var e=c(1)["default"];b.__esModule=!0;var f=c(2),g=e(f),h=c(35),i=e(h),j=c(36),k=c(41),l=c(42),m=e(l),n=c(39),o=e(n),p=c(34),q=e(p),r=g["default"].create,s=d();s.create=d,q["default"](s),s.Visitor=o["default"],s["default"]=s,b["default"]=s,a.exports=b["default"]},function(a,b){"use strict";b["default"]=function(a){return a&&a.__esModule?a:{"default":a}},b.__esModule=!0},function(a,b,c){"use strict";function d(){var a=new h.HandlebarsEnvironment;return n.extend(a,h),a.SafeString=j["default"],a.Exception=l["default"],a.Utils=n,a.escapeExpression=n.escapeExpression,a.VM=p,a.template=function(b){return p.template(b,a)},a}var e=c(3)["default"],f=c(1)["default"];b.__esModule=!0;var g=c(4),h=e(g),i=c(21),j=f(i),k=c(6),l=f(k),m=c(5),n=e(m),o=c(22),p=e(o),q=c(34),r=f(q),s=d();s.create=d,r["default"](s),s["default"]=s,b["default"]=s,a.exports=b["default"]},function(a,b){"use strict";b["default"]=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b},b.__esModule=!0},function(a,b,c){"use strict";function d(a,b,c){this.helpers=a||{},this.partials=b||{},this.decorators=c||{},i.registerDefaultHelpers(this),j.registerDefaultDecorators(this)}var e=c(1)["default"];b.__esModule=!0,b.HandlebarsEnvironment=d;var f=c(5),g=c(6),h=e(g),i=c(10),j=c(18),k=c(20),l=e(k),m="4.0.13";b.VERSION=m;var n=7;b.COMPILER_REVISION=n;var o={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};b.REVISION_CHANGES=o;var p="[object Object]";d.prototype={constructor:d,logger:l["default"],log:l["default"].log,registerHelper:function(a,b){if(f.toString.call(a)===p){if(b)throw new h["default"]("Arg not supported with multiple helpers");f.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){if(f.toString.call(a)===p)f.extend(this.partials,a);else{if("undefined"==typeof b)throw new h["default"]('Attempting to register a partial called "'+a+'" as undefined');this.partials[a]=b}},unregisterPartial:function(a){delete this.partials[a]},registerDecorator:function(a,b){if(f.toString.call(a)===p){if(b)throw new h["default"]("Arg not supported with multiple decorators");f.extend(this.decorators,a)}else this.decorators[a]=b},unregisterDecorator:function(a){delete this.decorators[a]}};var q=l["default"].log;b.log=q,b.createFrame=f.createFrame,b.logger=l["default"]},function(a,b){"use strict";function c(a){return k[a]}function d(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function e(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}function f(a){if("string"!=typeof a){if(a&&a.toHTML)return a.toHTML();if(null==a)return"";if(!a)return a+"";a=""+a}return m.test(a)?a.replace(l,c):a}function g(a){return!a&&0!==a||!(!p(a)||0!==a.length)}function h(a){var b=d({},a);return b._parent=a,b}function i(a,b){return a.path=b,a}function j(a,b){return(a?a+".":"")+b}b.__esModule=!0,b.extend=d,b.indexOf=e,b.escapeExpression=f,b.isEmpty=g,b.createFrame=h,b.blockParams=i,b.appendContextPath=j;var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},l=/[&<>"'`=]/g,m=/[&<>"'`=]/,n=Object.prototype.toString;b.toString=n;var o=function(a){return"function"==typeof a};o(/x/)&&(b.isFunction=o=function(a){return"function"==typeof a&&"[object Function]"===n.call(a)}),b.isFunction=o;var p=Array.isArray||function(a){return!(!a||"object"!=typeof a)&&"[object Array]"===n.call(a)};b.isArray=p},function(a,b,c){"use strict";function d(a,b){var c=b&&b.loc,g=void 0,h=void 0;c&&(g=c.start.line,h=c.start.column,a+=" - "+g+":"+h);for(var i=Error.prototype.constructor.call(this,a),j=0;j<f.length;j++)this[f[j]]=i[f[j]];Error.captureStackTrace&&Error.captureStackTrace(this,d);try{c&&(this.lineNumber=g,e?Object.defineProperty(this,"column",{value:h,enumerable:!0}):this.column=h)}catch(k){}}var e=c(7)["default"];b.__esModule=!0;var f=["description","fileName","lineNumber","message","name","number","stack"];d.prototype=new Error,b["default"]=d,a.exports=b["default"]},function(a,b,c){a.exports={"default":c(8),__esModule:!0}},function(a,b,c){var d=c(9);a.exports=function(a,b,c){return d.setDesc(a,b,c)}},function(a,b){var c=Object;a.exports={create:c.create,getProto:c.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:c.getOwnPropertyDescriptor,setDesc:c.defineProperty,setDescs:c.defineProperties,getKeys:c.keys,getNames:c.getOwnPropertyNames,getSymbols:c.getOwnPropertySymbols,each:[].forEach}},function(a,b,c){"use strict";function d(a){g["default"](a),i["default"](a),k["default"](a),m["default"](a),o["default"](a),q["default"](a),s["default"](a)}var e=c(1)["default"];b.__esModule=!0,b.registerDefaultHelpers=d;var f=c(11),g=e(f),h=c(12),i=e(h),j=c(13),k=e(j),l=c(14),m=e(l),n=c(15),o=e(n),p=c(16),q=e(p),r=c(17),s=e(r)},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5);b["default"]=function(a){a.registerHelper("blockHelperMissing",function(b,c){var e=c.inverse,f=c.fn;if(b===!0)return f(this);if(b===!1||null==b)return e(this);if(d.isArray(b))return b.length>0?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):e(this);if(c.data&&c.ids){var g=d.createFrame(c.data);g.contextPath=d.appendContextPath(c.data.contextPath,c.name),c={data:g}}return f(b,c)})},a.exports=b["default"]},function(a,b,c){"use strict";var d=c(1)["default"];b.__esModule=!0;var e=c(5),f=c(6),g=d(f);b["default"]=function(a){a.registerHelper("each",function(a,b){function c(b,c,f){j&&(j.key=b,j.index=c,j.first=0===c,j.last=!!f,k&&(j.contextPath=k+b)),i+=d(a[b],{data:j,blockParams:e.blockParams([a[b],b],[k+b,null])})}if(!b)throw new g["default"]("Must pass iterator to #each");var d=b.fn,f=b.inverse,h=0,i="",j=void 0,k=void 0;if(b.data&&b.ids&&(k=e.appendContextPath(b.data.contextPath,b.ids[0])+"."),e.isFunction(a)&&(a=a.call(this)),b.data&&(j=e.createFrame(b.data)),a&&"object"==typeof a)if(e.isArray(a))for(var l=a.length;h<l;h++)h in a&&c(h,h,h===a.length-1);else{var m=void 0;for(var n in a)a.hasOwnProperty(n)&&(void 0!==m&&c(m,h-1),m=n,h++);void 0!==m&&c(m,h-1,!0)}return 0===h&&(i=f(this)),i})},a.exports=b["default"]},function(a,b,c){"use strict";var d=c(1)["default"];b.__esModule=!0;var e=c(6),f=d(e);b["default"]=function(a){a.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new f["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5);b["default"]=function(a){a.registerHelper("if",function(a,b){return d.isFunction(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||d.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})})},a.exports=b["default"]},function(a,b){"use strict";b.__esModule=!0,b["default"]=function(a){a.registerHelper("log",function(){for(var b=[void 0],c=arguments[arguments.length-1],d=0;d<arguments.length-1;d++)b.push(arguments[d]);var e=1;null!=c.hash.level?e=c.hash.level:c.data&&null!=c.data.level&&(e=c.data.level),b[0]=e,a.log.apply(a,b)})},a.exports=b["default"]},function(a,b){"use strict";b.__esModule=!0,b["default"]=function(a){a.registerHelper("lookup",function(a,b){return a&&a[b]})},a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5);b["default"]=function(a){a.registerHelper("with",function(a,b){d.isFunction(a)&&(a=a.call(this));var c=b.fn;if(d.isEmpty(a))return b.inverse(this);var e=b.data;return b.data&&b.ids&&(e=d.createFrame(b.data),e.contextPath=d.appendContextPath(b.data.contextPath,b.ids[0])),c(a,{data:e,blockParams:d.blockParams([a],[e&&e.contextPath])})})},a.exports=b["default"]},function(a,b,c){"use strict";function d(a){g["default"](a)}var e=c(1)["default"];b.__esModule=!0,b.registerDefaultDecorators=d;var f=c(19),g=e(f)},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5);b["default"]=function(a){a.registerDecorator("inline",function(a,b,c,e){var f=a;return b.partials||(b.partials={},f=function(e,f){var g=c.partials;c.partials=d.extend({},g,b.partials);var h=a(e,f);return c.partials=g,h}),b.partials[e.args[0]]=e.fn,f})},a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5),e={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(a){if("string"==typeof a){var b=d.indexOf(e.methodMap,a.toLowerCase());a=b>=0?b:parseInt(a,10)}return a},log:function(a){if(a=e.lookupLevel(a),"undefined"!=typeof console&&e.lookupLevel(e.level)<=a){var b=e.methodMap[a];console[b]||(b="log");for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];console[b].apply(console,d)}}};b["default"]=e,a.exports=b["default"]},function(a,b){"use strict";function c(a){this.string=a}b.__esModule=!0,c.prototype.toString=c.prototype.toHTML=function(){return""+this.string},b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=s.COMPILER_REVISION;if(b!==c){if(b<c){var d=s.REVISION_CHANGES[c],e=s.REVISION_CHANGES[b];throw new r["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new r["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){function c(c,d,e){e.hash&&(d=p.extend({},d,e.hash),e.ids&&(e.ids[0]=!0)),c=b.VM.resolvePartial.call(this,c,d,e);var f=b.VM.invokePartial.call(this,c,d,e);if(null==f&&b.compile&&(e.partials[e.name]=b.compile(c,a.compilerOptions,b),f=e.partials[e.name](d,e)),null!=f){if(e.indent){for(var g=f.split("\n"),h=0,i=g.length;h<i&&(g[h]||h+1!==i);h++)g[h]=e.indent+g[h];f=g.join("\n")}return f}throw new r["default"]("The partial "+e.name+" could not be compiled when running in runtime-only mode")}function d(b){function c(b){return""+a.main(e,b,e.helpers,e.partials,g,i,h)}var f=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],g=f.data;d._setup(f),!f.partial&&a.useData&&(g=j(b,g));var h=void 0,i=a.useBlockParams?[]:void 0;return a.useDepths&&(h=f.depths?b!=f.depths[0]?[b].concat(f.depths):f.depths:[b]),(c=k(a.main,c,e,f.depths||[],g,i))(b,f)}if(!b)throw new r["default"]("No environment passed to template");if(!a||!a.main)throw new r["default"]("Unknown template object: "+typeof a);a.main.decorator=a.main_d,b.VM.checkRevision(a.compiler);var e={strict:function(a,b){if(!(b in a))throw new r["default"]('"'+b+'" not defined in '+a);return a[b]},lookup:function(a,b){for(var c=a.length,d=0;d<c;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:p.escapeExpression,invokePartial:c,fn:function(b){var c=a[b];return c.decorator=a[b+"_d"],c},programs:[],program:function(a,b,c,d,e){var g=this.programs[a],h=this.fn(a);return b||e||d||c?g=f(this,a,h,b,c,d,e):g||(g=this.programs[a]=f(this,a,h)),g},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=p.extend({},b,a)),c},nullContext:l({}),noop:b.VM.noop,compilerInfo:a.compiler};return d.isTop=!0,d._setup=function(c){c.partial?(e.helpers=c.helpers,e.partials=c.partials,e.decorators=c.decorators):(e.helpers=e.merge(c.helpers,b.helpers),a.usePartial&&(e.partials=e.merge(c.partials,b.partials)),(a.usePartial||a.useDecorators)&&(e.decorators=e.merge(c.decorators,b.decorators)))},d._child=function(b,c,d,g){if(a.useBlockParams&&!d)throw new r["default"]("must pass block params");if(a.useDepths&&!g)throw new r["default"]("must pass parent depths");return f(e,b,a[b],c,0,d,g)},d}function f(a,b,c,d,e,f,g){function h(b){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],h=g;return!g||b==g[0]||b===a.nullContext&&null===g[0]||(h=[b].concat(g)),c(a,b,a.helpers,a.partials,e.data||d,f&&[e.blockParams].concat(f),h)}return h=k(c,h,a,g,d,f),h.program=b,h.depth=g?g.length:0,h.blockParams=e||0,h}function g(a,b,c){return a?a.call||c.name||(c.name=a,a=c.partials[a]):a="@partial-block"===c.name?c.data["partial-block"]:c.partials[c.name],a}function h(a,b,c){var d=c.data&&c.data["partial-block"];c.partial=!0,c.ids&&(c.data.contextPath=c.ids[0]||c.data.contextPath);var e=void 0;if(c.fn&&c.fn!==i&&!function(){c.data=s.createFrame(c.data);var a=c.fn;e=c.data["partial-block"]=function(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return c.data=s.createFrame(c.data),c.data["partial-block"]=d,a(b,c)},a.partials&&(c.partials=p.extend({},c.partials,a.partials))}(),void 0===a&&e&&(a=e),void 0===a)throw new r["default"]("The partial "+c.name+" could not be found");if(a instanceof Function)return a(b,c)}function i(){return""}function j(a,b){return b&&"root"in b||(b=b?s.createFrame(b):{},b.root=a),b}function k(a,b,c,d,e,f){if(a.decorator){var g={};b=a.decorator(b,g,c,d&&d[0],e,f,d),p.extend(b,g)}return b}var l=c(23)["default"],m=c(3)["default"],n=c(1)["default"];b.__esModule=!0,b.checkRevision=d,b.template=e,b.wrapProgram=f,b.resolvePartial=g,b.invokePartial=h,b.noop=i;var o=c(5),p=m(o),q=c(6),r=n(q),s=c(4)},function(a,b,c){a.exports={"default":c(24),__esModule:!0}},function(a,b,c){c(25),a.exports=c(30).Object.seal},function(a,b,c){var d=c(26);c(27)("seal",function(a){return function(b){return a&&d(b)?a(b):b}})},function(a,b){a.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},function(a,b,c){var d=c(28),e=c(30),f=c(33);a.exports=function(a,b){var c=(e.Object||{})[a]||Object[a],g={};g[a]=b(c),d(d.S+d.F*f(function(){c(1)}),"Object",g)}},function(a,b,c){var d=c(29),e=c(30),f=c(31),g="prototype",h=function(a,b,c){var i,j,k,l=a&h.F,m=a&h.G,n=a&h.S,o=a&h.P,p=a&h.B,q=a&h.W,r=m?e:e[b]||(e[b]={}),s=m?d:n?d[b]:(d[b]||{})[g];m&&(c=b);for(i in c)j=!l&&s&&i in s,j&&i in r||(k=j?s[i]:c[i],r[i]=m&&"function"!=typeof s[i]?c[i]:p&&j?f(k,d):q&&s[i]==k?function(a){var b=function(b){return this instanceof a?new a(b):a(b)};return b[g]=a[g],b}(k):o&&"function"==typeof k?f(Function.call,k):k,o&&((r[g]||(r[g]={}))[i]=k))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,a.exports=h},function(a,b){var c=a.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=c)},function(a,b){var c=a.exports={version:"1.2.6"};"number"==typeof __e&&(__e=c)},function(a,b,c){var d=c(32);a.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},function(a,b){a.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},function(a,b){a.exports=function(a){try{return!!a()}catch(b){return!0}}},function(a,b){(function(c){"use strict";b.__esModule=!0,b["default"]=function(a){var b="undefined"!=typeof c?c:window,d=b.Handlebars;a.noConflict=function(){return b.Handlebars===a&&(b.Handlebars=d),a}},a.exports=b["default"]}).call(b,function(){return this}())},function(a,b){"use strict";b.__esModule=!0;var c={helpers:{helperExpression:function(a){return"SubExpression"===a.type||("MustacheStatement"===a.type||"BlockStatement"===a.type)&&!!(a.params&&a.params.length||a.hash)},scopedId:function(a){return/^\.|this\b/.test(a.original)},simpleId:function(a){return 1===a.parts.length&&!c.helpers.scopedId(a)&&!a.depth}}};b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b){if("Program"===a.type)return a;h["default"].yy=n,n.locInfo=function(a){return new n.SourceLocation(b&&b.srcName,a)};var c=new j["default"](b);return c.accept(h["default"].parse(a))}var e=c(1)["default"],f=c(3)["default"];b.__esModule=!0,b.parse=d;var g=c(37),h=e(g),i=c(38),j=e(i),k=c(40),l=f(k),m=c(5);b.parser=h["default"];var n={};m.extend(n,l)},function(a,b){"use strict";b.__esModule=!0;var c=function(){function a(){this.yy={}}var b={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(a,b,c,d,e,f,g){var h=f.length-1;switch(e){case 1:return f[h-1];case 2:this.$=d.prepareProgram(f[h]);break;case 3:this.$=f[h];break;case 4:this.$=f[h];break;case 5:this.$=f[h];break;case 6:this.$=f[h];break;case 7:this.$=f[h];break;case 8:this.$=f[h];break;case 9:this.$={type:"CommentStatement",value:d.stripComment(f[h]),strip:d.stripFlags(f[h],f[h]),loc:d.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:f[h],value:f[h],loc:d.locInfo(this._$)};break;case 11:this.$=d.prepareRawBlock(f[h-2],f[h-1],f[h],this._$);break;case 12:this.$={path:f[h-3],params:f[h-2],hash:f[h-1]};break;case 13:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!1,this._$);break;case 14:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!0,this._$);break;case 15:this.$={open:f[h-5],path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 16:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 17:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 18:this.$={strip:d.stripFlags(f[h-1],f[h-1]),program:f[h]};break;case 19:var i=d.prepareBlock(f[h-2],f[h-1],f[h],f[h],!1,this._$),j=d.prepareProgram([i],f[h-1].loc);j.chained=!0,this.$={strip:f[h-2].strip,program:j,chain:!0};break;case 20:this.$=f[h];break;case 21:this.$={path:f[h-1],strip:d.stripFlags(f[h-2],f[h])};break;case 22:this.$=d.prepareMustache(f[h-3],f[h-2],f[h-1],f[h-4],d.stripFlags(f[h-4],f[h]),this._$);break;case 23:this.$=d.prepareMustache(f[h-3],f[h-2],f[h-1],f[h-4],d.stripFlags(f[h-4],f[h]),this._$);break;case 24:this.$={type:"PartialStatement",name:f[h-3],params:f[h-2],hash:f[h-1],indent:"",strip:d.stripFlags(f[h-4],f[h]),loc:d.locInfo(this._$)};break;case 25:this.$=d.preparePartialBlock(f[h-2],f[h-1],f[h],this._$);break;case 26:this.$={path:f[h-3],params:f[h-2],hash:f[h-1],strip:d.stripFlags(f[h-4],f[h])};break;case 27:this.$=f[h];break;case 28:this.$=f[h];break;case 29:this.$={type:"SubExpression",path:f[h-3],params:f[h-2],hash:f[h-1],loc:d.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:f[h],loc:d.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:d.id(f[h-2]),value:f[h],loc:d.locInfo(this._$)};break;case 32:this.$=d.id(f[h-1]);break;case 33:this.$=f[h];break;case 34:this.$=f[h];break;case 35:this.$={type:"StringLiteral",value:f[h],original:f[h],loc:d.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(f[h]),original:Number(f[h]),loc:d.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===f[h],original:"true"===f[h],loc:d.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:d.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:d.locInfo(this._$)};break;case 40:this.$=f[h];break;case 41:this.$=f[h];break;case 42:this.$=d.preparePath(!0,f[h],this._$);break;case 43:this.$=d.preparePath(!1,f[h],this._$);break;case 44:f[h-2].push({part:d.id(f[h]),original:f[h],separator:f[h-1]}),this.$=f[h-2];break;case 45:this.$=[{part:d.id(f[h]),original:f[h]}];break;case 46:this.$=[];break;case 47:f[h-1].push(f[h]);break;case 48:this.$=[f[h]];break;case 49:f[h-1].push(f[h]);break;case 50:this.$=[];break;case 51:f[h-1].push(f[h]);break;case 58:this.$=[];break;case 59:f[h-1].push(f[h]);break;case 64:this.$=[];break;case 65:f[h-1].push(f[h]);break;case 70:this.$=[];break;case 71:f[h-1].push(f[h]);break;case 78:this.$=[];break;case 79:f[h-1].push(f[h]);break;case 82:this.$=[];break;case 83:f[h-1].push(f[h]);break;case 86:this.$=[];break;case 87:f[h-1].push(f[h]);break;case 90:this.$=[];break;case 91:f[h-1].push(f[h]);break;case 94:this.$=[];break;case 95:f[h-1].push(f[h]);break;case 98:this.$=[f[h]];break;case 99:f[h-1].push(f[h]);break;case 100:this.$=[f[h]];break;case 101:f[h-1].push(f[h])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],
85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:(null!==n&&"undefined"!=typeof n||(n=b()),q=g[p]&&g[p][n]),"undefined"==typeof q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),"undefined"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},c=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:if("\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(e(0,1),this.begin("emu")):this.begin("mu"),b.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(b.yytext=b.yytext.substr(5,b.yyleng-9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(b.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return b.yytext=e(1,2).replace(/\\"/g,'"'),80;case 32:return b.yytext=e(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return b.yytext=b.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},a.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},a}();return b.lexer=c,a.prototype=b,b.Parser=a,new a}();b["default"]=c,a.exports=b["default"]},function(a,b,c){"use strict";function d(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=a}function e(a,b,c){void 0===b&&(b=a.length);var d=a[b-1],e=a[b-2];return d?"ContentStatement"===d.type?(e||!c?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(d.original):void 0:c}function f(a,b,c){void 0===b&&(b=-1);var d=a[b+1],e=a[b+2];return d?"ContentStatement"===d.type?(e||!c?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(d.original):void 0:c}function g(a,b,c){var d=a[null==b?0:b+1];if(d&&"ContentStatement"===d.type&&(c||!d.rightStripped)){var e=d.value;d.value=d.value.replace(c?/^\s+/:/^[ \t]*\r?\n?/,""),d.rightStripped=d.value!==e}}function h(a,b,c){var d=a[null==b?a.length-1:b-1];if(d&&"ContentStatement"===d.type&&(c||!d.leftStripped)){var e=d.value;return d.value=d.value.replace(c?/\s+$/:/[ \t]+$/,""),d.leftStripped=d.value!==e,d.leftStripped}}var i=c(1)["default"];b.__esModule=!0;var j=c(39),k=i(j);d.prototype=new k["default"],d.prototype.Program=function(a){var b=!this.options.ignoreStandalone,c=!this.isRootSeen;this.isRootSeen=!0;for(var d=a.body,i=0,j=d.length;i<j;i++){var k=d[i],l=this.accept(k);if(l){var m=e(d,i,c),n=f(d,i,c),o=l.openStandalone&&m,p=l.closeStandalone&&n,q=l.inlineStandalone&&m&&n;l.close&&g(d,i,!0),l.open&&h(d,i,!0),b&&q&&(g(d,i),h(d,i)&&"PartialStatement"===k.type&&(k.indent=/([ \t]+$)/.exec(d[i-1].original)[1])),b&&o&&(g((k.program||k.inverse).body),h(d,i)),b&&p&&(g(d,i),h((k.inverse||k.program).body))}}return a},d.prototype.BlockStatement=d.prototype.DecoratorBlock=d.prototype.PartialBlockStatement=function(a){this.accept(a.program),this.accept(a.inverse);var b=a.program||a.inverse,c=a.program&&a.inverse,d=c,i=c;if(c&&c.chained)for(d=c.body[0].program;i.chained;)i=i.body[i.body.length-1].program;var j={open:a.openStrip.open,close:a.closeStrip.close,openStandalone:f(b.body),closeStandalone:e((d||b).body)};if(a.openStrip.close&&g(b.body,null,!0),c){var k=a.inverseStrip;k.open&&h(b.body,null,!0),k.close&&g(d.body,null,!0),a.closeStrip.open&&h(i.body,null,!0),!this.options.ignoreStandalone&&e(b.body)&&f(d.body)&&(h(b.body),g(d.body))}else a.closeStrip.open&&h(b.body,null,!0);return j},d.prototype.Decorator=d.prototype.MustacheStatement=function(a){return a.strip},d.prototype.PartialStatement=d.prototype.CommentStatement=function(a){var b=a.strip||{};return{inlineStandalone:!0,open:b.open,close:b.close}},b["default"]=d,a.exports=b["default"]},function(a,b,c){"use strict";function d(){this.parents=[]}function e(a){this.acceptRequired(a,"path"),this.acceptArray(a.params),this.acceptKey(a,"hash")}function f(a){e.call(this,a),this.acceptKey(a,"program"),this.acceptKey(a,"inverse")}function g(a){this.acceptRequired(a,"name"),this.acceptArray(a.params),this.acceptKey(a,"hash")}var h=c(1)["default"];b.__esModule=!0;var i=c(6),j=h(i);d.prototype={constructor:d,mutating:!1,acceptKey:function(a,b){var c=this.accept(a[b]);if(this.mutating){if(c&&!d.prototype[c.type])throw new j["default"]('Unexpected node type "'+c.type+'" found when accepting '+b+" on "+a.type);a[b]=c}},acceptRequired:function(a,b){if(this.acceptKey(a,b),!a[b])throw new j["default"](a.type+" requires "+b)},acceptArray:function(a){for(var b=0,c=a.length;b<c;b++)this.acceptKey(a,b),a[b]||(a.splice(b,1),b--,c--)},accept:function(a){if(a){if(!this[a.type])throw new j["default"]("Unknown type: "+a.type,a);this.current&&this.parents.unshift(this.current),this.current=a;var b=this[a.type](a);return this.current=this.parents.shift(),!this.mutating||b?b:b!==!1?a:void 0}},Program:function(a){this.acceptArray(a.body)},MustacheStatement:e,Decorator:e,BlockStatement:f,DecoratorBlock:f,PartialStatement:g,PartialBlockStatement:function(a){g.call(this,a),this.acceptKey(a,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:e,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(a){this.acceptArray(a.pairs)},HashPair:function(a){this.acceptRequired(a,"value")}},b["default"]=d,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b){if(b=b.path?b.path.original:b,a.path.original!==b){var c={loc:a.path.loc};throw new q["default"](a.path.original+" doesn't match "+b,c)}}function e(a,b){this.source=a,this.start={line:b.first_line,column:b.first_column},this.end={line:b.last_line,column:b.last_column}}function f(a){return/^\[.*\]$/.test(a)?a.substr(1,a.length-2):a}function g(a,b){return{open:"~"===a.charAt(2),close:"~"===b.charAt(b.length-3)}}function h(a){return a.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function i(a,b,c){c=this.locInfo(c);for(var d=a?"@":"",e=[],f=0,g=0,h=b.length;g<h;g++){var i=b[g].part,j=b[g].original!==i;if(d+=(b[g].separator||"")+i,j||".."!==i&&"."!==i&&"this"!==i)e.push(i);else{if(e.length>0)throw new q["default"]("Invalid path: "+d,{loc:c});".."===i&&f++}}return{type:"PathExpression",data:a,depth:f,parts:e,original:d,loc:c}}function j(a,b,c,d,e,f){var g=d.charAt(3)||d.charAt(2),h="{"!==g&&"&"!==g,i=/\*/.test(d);return{type:i?"Decorator":"MustacheStatement",path:a,params:b,hash:c,escaped:h,strip:e,loc:this.locInfo(f)}}function k(a,b,c,e){d(a,c),e=this.locInfo(e);var f={type:"Program",body:b,strip:{},loc:e};return{type:"BlockStatement",path:a.path,params:a.params,hash:a.hash,program:f,openStrip:{},inverseStrip:{},closeStrip:{},loc:e}}function l(a,b,c,e,f,g){e&&e.path&&d(a,e);var h=/\*/.test(a.open);b.blockParams=a.blockParams;var i=void 0,j=void 0;if(c){if(h)throw new q["default"]("Unexpected inverse block on decorator",c);c.chain&&(c.program.body[0].closeStrip=e.strip),j=c.strip,i=c.program}return f&&(f=i,i=b,b=f),{type:h?"DecoratorBlock":"BlockStatement",path:a.path,params:a.params,hash:a.hash,program:b,inverse:i,openStrip:a.strip,inverseStrip:j,closeStrip:e&&e.strip,loc:this.locInfo(g)}}function m(a,b){if(!b&&a.length){var c=a[0].loc,d=a[a.length-1].loc;c&&d&&(b={source:c.source,start:{line:c.start.line,column:c.start.column},end:{line:d.end.line,column:d.end.column}})}return{type:"Program",body:a,strip:{},loc:b}}function n(a,b,c,e){return d(a,c),{type:"PartialBlockStatement",name:a.path,params:a.params,hash:a.hash,program:b,openStrip:a.strip,closeStrip:c&&c.strip,loc:this.locInfo(e)}}var o=c(1)["default"];b.__esModule=!0,b.SourceLocation=e,b.id=f,b.stripFlags=g,b.stripComment=h,b.preparePath=i,b.prepareMustache=j,b.prepareRawBlock=k,b.prepareBlock=l,b.prepareProgram=m,b.preparePartialBlock=n;var p=c(6),q=o(p)},function(a,b,c){"use strict";function d(){}function e(a,b,c){if(null==a||"string"!=typeof a&&"Program"!==a.type)throw new k["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);b=b||{},"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var d=c.parse(a,b),e=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(e,b)}function f(a,b,c){function d(){var d=c.parse(a,b),e=(new c.Compiler).compile(d,b),f=(new c.JavaScriptCompiler).compile(e,b,void 0,!0);return c.template(f)}function e(a,b){return f||(f=d()),f.call(this,a,b)}if(void 0===b&&(b={}),null==a||"string"!=typeof a&&"Program"!==a.type)throw new k["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);b=l.extend({},b),"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var f=void 0;return e._setup=function(a){return f||(f=d()),f._setup(a)},e._child=function(a,b,c,e){return f||(f=d()),f._child(a,b,c,e)},e}function g(a,b){if(a===b)return!0;if(l.isArray(a)&&l.isArray(b)&&a.length===b.length){for(var c=0;c<a.length;c++)if(!g(a[c],b[c]))return!1;return!0}}function h(a){if(!a.path.parts){var b=a.path;a.path={type:"PathExpression",data:!1,depth:0,parts:[b.original+""],original:b.original+"",loc:b.loc}}}var i=c(1)["default"];b.__esModule=!0,b.Compiler=d,b.precompile=e,b.compile=f;var j=c(6),k=i(j),l=c(5),m=c(35),n=i(m),o=[].slice;d.prototype={compiler:d,equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;c<b;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||!g(d.args,e.args))return!1}b=this.children.length;for(var c=0;c<b;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=b,this.stringParams=b.stringParams,this.trackIds=b.trackIds,b.blockParams=b.blockParams||[];var c=b.knownHelpers;if(b.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},c)for(var d in c)this.options.knownHelpers[d]=c[d];return this.accept(a)},compileProgram:function(a){var b=new this.compiler,c=b.compile(a,this.options),d=this.guid++;return this.usePartial=this.usePartial||c.usePartial,this.children[d]=c,this.useDepths=this.useDepths||c.useDepths,d},accept:function(a){if(!this[a.type])throw new k["default"]("Unknown type: "+a.type,a);this.sourceNode.unshift(a);var b=this[a.type](a);return this.sourceNode.shift(),b},Program:function(a){this.options.blockParams.unshift(a.blockParams);for(var b=a.body,c=b.length,d=0;d<c;d++)this.accept(b[d]);return this.options.blockParams.shift(),this.isSimple=1===c,this.blockParams=a.blockParams?a.blockParams.length:0,this},BlockStatement:function(a){h(a);var b=a.program,c=a.inverse;b=b&&this.compileProgram(b),c=c&&this.compileProgram(c);var d=this.classifySexpr(a);"helper"===d?this.helperSexpr(a,b,c):"simple"===d?(this.simpleSexpr(a),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("blockValue",a.path.original)):(this.ambiguousSexpr(a,b,c),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(a){var b=a.program&&this.compileProgram(a.program),c=this.setupFullMustacheParams(a,b,void 0),d=a.path;this.useDecorators=!0,this.opcode("registerDecorator",c.length,d.original)},PartialStatement:function(a){this.usePartial=!0;var b=a.program;b&&(b=this.compileProgram(a.program));var c=a.params;if(c.length>1)throw new k["default"]("Unsupported number of partial arguments: "+c.length,a);c.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):c.push({type:"PathExpression",parts:[],depth:0}));var d=a.name.original,e="SubExpression"===a.name.type;e&&this.accept(a.name),this.setupFullMustacheParams(a,b,void 0,!0);var f=a.indent||"";this.options.preventIndent&&f&&(this.opcode("appendContent",f),f=""),this.opcode("invokePartial",e,d,f),this.opcode("append")},PartialBlockStatement:function(a){this.PartialStatement(a)},MustacheStatement:function(a){this.SubExpression(a),a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(a){this.DecoratorBlock(a)},ContentStatement:function(a){a.value&&this.opcode("appendContent",a.value)},CommentStatement:function(){},SubExpression:function(a){h(a);var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ambiguousSexpr:function(a,b,c){var d=a.path,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),d.strict=!0,this.accept(d),this.opcode("invokeAmbiguous",e,f)},simpleSexpr:function(a){var b=a.path;b.strict=!0,this.accept(b),this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.path,f=e.parts[0];if(this.options.knownHelpers[f])this.opcode("invokeKnownHelper",d.length,f);else{if(this.options.knownHelpersOnly)throw new k["default"]("You specified knownHelpersOnly, but used the unknown helper "+f,a);e.strict=!0,e.falsy=!0,this.accept(e),this.opcode("invokeHelper",d.length,e.original,n["default"].helpers.simpleId(e))}},PathExpression:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0],c=n["default"].helpers.scopedId(a),d=!a.depth&&!c&&this.blockParamIndex(b);d?this.opcode("lookupBlockParam",d,a.parts):b?a.data?(this.options.data=!0,this.opcode("lookupData",a.depth,a.parts,a.strict)):this.opcode("lookupOnContext",a.parts,a.falsy,a.strict,c):this.opcode("pushContext")},StringLiteral:function(a){this.opcode("pushString",a.value)},NumberLiteral:function(a){this.opcode("pushLiteral",a.value)},BooleanLiteral:function(a){this.opcode("pushLiteral",a.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(a){var b=a.pairs,c=0,d=b.length;for(this.opcode("pushHash");c<d;c++)this.pushParam(b[c].value);for(;c--;)this.opcode("assignToHash",b[c].key);this.opcode("popHash")},opcode:function(a){this.opcodes.push({opcode:a,args:o.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(a){a&&(this.useDepths=!0)},classifySexpr:function(a){var b=n["default"].helpers.simpleId(a.path),c=b&&!!this.blockParamIndex(a.path.parts[0]),d=!c&&n["default"].helpers.helperExpression(a),e=!c&&(d||b);if(e&&!d){var f=a.path.parts[0],g=this.options;g.knownHelpers[f]?d=!0:g.knownHelpersOnly&&(e=!1)}return d?"helper":e?"ambiguous":"simple"},pushParams:function(a){for(var b=0,c=a.length;b<c;b++)this.pushParam(a[b])},pushParam:function(a){var b=null!=a.value?a.value:a.original||"";if(this.stringParams)b.replace&&(b=b.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),a.depth&&this.addDepth(a.depth),this.opcode("getContext",a.depth||0),this.opcode("pushStringParam",b,a.type),"SubExpression"===a.type&&this.accept(a);else{if(this.trackIds){var c=void 0;if(!a.parts||n["default"].helpers.scopedId(a)||a.depth||(c=this.blockParamIndex(a.parts[0])),c){var d=a.parts.slice(1).join(".");this.opcode("pushId","BlockParam",c,d)}else b=a.original||b,b.replace&&(b=b.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",a.type,b)}this.accept(a)}},setupFullMustacheParams:function(a,b,c,d){var e=a.params;return this.pushParams(e),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.accept(a.hash):this.opcode("emptyHash",d),e},blockParamIndex:function(a){for(var b=0,c=this.options.blockParams.length;b<c;b++){var d=this.options.blockParams[b],e=d&&l.indexOf(d,a);if(d&&e>=0)return[b,e]}}}},function(a,b,c){"use strict";function d(a){this.value=a}function e(){}function f(a,b,c,d){var e=b.popStack(),f=0,g=c.length;for(a&&g--;f<g;f++)e=b.nameLookup(e,c[f],d);return a?[b.aliasable("container.strict"),"(",e,", ",b.quotedString(c[f]),")"]:e}var g=c(1)["default"];b.__esModule=!0;var h=c(4),i=c(6),j=g(i),k=c(5),l=c(43),m=g(l);e.prototype={nameLookup:function(a,b){return"constructor"===b?["(",a,".propertyIsEnumerable('constructor') ? ",a,".constructor : undefined",")"]:e.isValidJavaScriptVariableName(b)?[a,".",b]:[a,"[",JSON.stringify(b),"]"]},depthedLookup:function(a){return[this.aliasable("container.lookup"),'(depths, "',a,'")']},compilerInfo:function(){var a=h.COMPILER_REVISION,b=h.REVISION_CHANGES[a];return[a,b]},appendToBuffer:function(a,b,c){return k.isArray(a)||(a=[a]),a=this.source.wrap(a,b),this.environment.isSimple?["return ",a,";"]:c?["buffer += ",a,";"]:(a.appendToBuffer=!0,a)},initializeBuffer:function(){return this.quotedString("")},compile:function(a,b,c,d){this.environment=a,this.options=b,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!d,this.name=this.environment.name,this.isChild=!!c,this.context=c||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(a,b),this.useDepths=this.useDepths||a.useDepths||a.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||a.useBlockParams;var e=a.opcodes,f=void 0,g=void 0,h=void 0,i=void 0;for(h=0,i=e.length;h<i;h++)f=e[h],this.source.currentLocation=f.loc,g=g||f.loc,this[f.opcode].apply(this,f.args);if(this.source.currentLocation=g,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new j["default"]("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),d?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var k=this.createFunctionContext(d);if(this.isChild)return k;var l={compiler:this.compilerInfo(),main:k};this.decorators&&(l.main_d=this.decorators,l.useDecorators=!0);var m=this.context,n=m.programs,o=m.decorators;for(h=0,i=n.length;h<i;h++)n[h]&&(l[h]=n[h],o[h]&&(l[h+"_d"]=o[h],l.useDecorators=!0));return this.environment.usePartial&&(l.usePartial=!0),this.options.data&&(l.useData=!0),this.useDepths&&(l.useDepths=!0),this.useBlockParams&&(l.useBlockParams=!0),this.options.compat&&(l.compat=!0),d?l.compilerOptions=this.options:(l.compiler=JSON.stringify(l.compiler),this.source.currentLocation={start:{line:1,column:0}},l=this.objectLiteral(l),b.srcName?(l=l.toStringWithSourceMap({file:b.destName}),l.map=l.map&&l.map.toString()):l=l.toString()),l},preamble:function(){this.lastContext=0,this.source=new m["default"](this.options.srcName),this.decorators=new m["default"](this.options.srcName)},createFunctionContext:function(a){var b="",c=this.stackVars.concat(this.registers.list);c.length>0&&(b+=", "+c.join(", "));var d=0;for(var e in this.aliases){var f=this.aliases[e];this.aliases.hasOwnProperty(e)&&f.children&&f.referenceCount>1&&(b+=", alias"+ ++d+"="+e,f.children[0]="alias"+d)}var g=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&g.push("blockParams"),this.useDepths&&g.push("depths");var h=this.mergeSource(b);return a?(g.push(h),Function.apply(this,g)):this.source.wrap(["function(",g.join(","),") {\n  ",h,"}"])},mergeSource:function(a){var b=this.environment.isSimple,c=!this.forceBuffer,d=void 0,e=void 0,f=void 0,g=void 0;return this.source.each(function(a){a.appendToBuffer?(f?a.prepend("  + "):f=a,g=a):(f&&(e?f.prepend("buffer += "):d=!0,g.add(";"),f=g=void 0),e=!0,b||(c=!1))}),c?f?(f.prepend("return "),g.add(";")):e||this.source.push('return "";'):(a+=", buffer = "+(d?"":this.initializeBuffer()),f?(f.prepend("return buffer + "),g.add(";")):this.source.push("return buffer;")),a&&this.source.prepend("var "+a.substring(2)+(d?"":";\n")),this.source.merge()},blockValue:function(a){var b=this.aliasable("helpers.blockHelperMissing"),c=[this.contextName(0)];this.setupHelperArgs(a,0,c);var d=this.popStack();c.splice(1,0,d),this.push(this.source.functionCall(b,"call",c))},ambiguousBlockValue:function(){var a=this.aliasable("helpers.blockHelperMissing"),b=[this.contextName(0)];this.setupHelperArgs("",0,b,!0),this.flushInline();var c=this.topStack();b.splice(1,0,c),this.pushSource(["if (!",this.lastHelper,") { ",c," = ",this.source.functionCall(a,"call",b),"}"])},appendContent:function(a){this.pendingContent?a=this.pendingContent+a:this.pendingLocation=this.source.currentLocation,this.pendingContent=a},append:function(){if(this.isInline())this.replaceStack(function(a){return[" != null ? ",a,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var a=this.popStack();this.pushSource(["if (",a," != null) { ",this.appendToBuffer(a,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(a){this.lastContext=a},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(a,b,c,d){var e=0;d||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(a[e++])),this.resolvePath("context",a,e,b,c)},lookupBlockParam:function(a,b){this.useBlockParams=!0,this.push(["blockParams[",a[0],"][",a[1],"]"]),this.resolvePath("context",b,1)},lookupData:function(a,b,c){a?this.pushStackLiteral("container.data(data, "+a+")"):this.pushStackLiteral("data"),this.resolvePath("data",b,0,!0,c)},resolvePath:function(a,b,c,d,e){var g=this;if(this.options.strict||this.options.assumeObjects)return void this.push(f(this.options.strict&&e,this,b,a));
for(var h=b.length;c<h;c++)this.replaceStack(function(e){var f=g.nameLookup(e,b[c],a);return d?[" && ",f]:[" != null ? ",f," : ",e]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(a,b){this.pushContext(),this.pushString(b),"SubExpression"!==b&&("string"==typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(a){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(a?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(a.ids)),this.stringParams&&(this.push(this.objectLiteral(a.contexts)),this.push(this.objectLiteral(a.types))),this.push(this.objectLiteral(a.values))},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},registerDecorator:function(a,b){var c=this.nameLookup("decorators",b,"decorator"),d=this.setupHelperArgs(b,a);this.decorators.push(["fn = ",this.decorators.functionCall(c,"",["fn","props","container",d])," || fn;"])},invokeHelper:function(a,b,c){var d=this.popStack(),e=this.setupHelper(a,b),f=c?[e.name," || "]:"",g=["("].concat(f,d);this.options.strict||g.push(" || ",this.aliasable("helpers.helperMissing")),g.push(")"),this.push(this.source.functionCall(g,"call",e.callParams))},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(this.source.functionCall(c.name,"call",c.callParams))},invokeAmbiguous:function(a,b){this.useRegister("helper");var c=this.popStack();this.emptyHash();var d=this.setupHelper(0,a,b),e=this.lastHelper=this.nameLookup("helpers",a,"helper"),f=["(","(helper = ",e," || ",c,")"];this.options.strict||(f[0]="(helper = ",f.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",f,d.paramsInit?["),(",d.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",d.callParams)," : helper))"])},invokePartial:function(a,b,c){var d=[],e=this.setupParams(b,1,d);a&&(b=this.popStack(),delete e.name),c&&(e.indent=JSON.stringify(c)),e.helpers="helpers",e.partials="partials",e.decorators="container.decorators",a?d.unshift(b):d.unshift(this.nameLookup("partials",b,"partial")),this.options.compat&&(e.depths="depths"),e=this.objectLiteral(e),d.push(e),this.push(this.source.functionCall("container.invokePartial","",d))},assignToHash:function(a){var b=this.popStack(),c=void 0,d=void 0,e=void 0;this.trackIds&&(e=this.popStack()),this.stringParams&&(d=this.popStack(),c=this.popStack());var f=this.hash;c&&(f.contexts[a]=c),d&&(f.types[a]=d),e&&(f.ids[a]=e),f.values[a]=b},pushId:function(a,b,c){"BlockParam"===a?this.pushStackLiteral("blockParams["+b[0]+"].path["+b[1]+"]"+(c?" + "+JSON.stringify("."+c):"")):"PathExpression"===a?this.pushString(b):"SubExpression"===a?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:e,compileChildren:function(a,b){for(var c=a.children,d=void 0,e=void 0,f=0,g=c.length;f<g;f++){d=c[f],e=new this.compiler;var h=this.matchExistingProgram(d);if(null==h){this.context.programs.push("");var i=this.context.programs.length;d.index=i,d.name="program"+i,this.context.programs[i]=e.compile(d,b,this.context,!this.precompile),this.context.decorators[i]=e.decorators,this.context.environments[i]=d,this.useDepths=this.useDepths||e.useDepths,this.useBlockParams=this.useBlockParams||e.useBlockParams,d.useDepths=this.useDepths,d.useBlockParams=this.useBlockParams}else d.index=h.index,d.name="program"+h.index,this.useDepths=this.useDepths||h.useDepths,this.useBlockParams=this.useBlockParams||h.useBlockParams}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;b<c;b++){var d=this.context.environments[b];if(d&&d.equals(a))return d}},programExpression:function(a){var b=this.environment.children[a],c=[b.index,"data",b.blockParams];return(this.useBlockParams||this.useDepths)&&c.push("blockParams"),this.useDepths&&c.push("depths"),"container.program("+c.join(", ")+")"},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},push:function(a){return a instanceof d||(a=this.source.wrap(a)),this.inlineStack.push(a),a},pushStackLiteral:function(a){this.push(new d(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),a&&this.source.push(a)},replaceStack:function(a){var b=["("],c=void 0,e=void 0,f=void 0;if(!this.isInline())throw new j["default"]("replaceStack on non-inline");var g=this.popStack(!0);if(g instanceof d)c=[g.value],b=["(",c],f=!0;else{e=!0;var h=this.incrStack();b=["((",this.push(h)," = ",g,")"],c=this.topStack()}var i=a.call(this,c);f||this.popStack(),e&&this.stackSlot--,this.push(b.concat(i,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;this.inlineStack=[];for(var b=0,c=a.length;b<c;b++){var e=a[b];if(e instanceof d)this.compileStack.push(e);else{var f=this.incrStack();this.pushSource([f," = ",e,";"]),this.compileStack.push(f)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),c=(b?this.inlineStack:this.compileStack).pop();if(!a&&c instanceof d)return c.value;if(!b){if(!this.stackSlot)throw new j["default"]("Invalid stack pop");this.stackSlot--}return c},topStack:function(){var a=this.isInline()?this.inlineStack:this.compileStack,b=a[a.length-1];return b instanceof d?b.value:b},contextName:function(a){return this.useDepths&&a?"depths["+a+"]":"depth"+a},quotedString:function(a){return this.source.quotedString(a)},objectLiteral:function(a){return this.source.objectLiteral(a)},aliasable:function(a){var b=this.aliases[a];return b?(b.referenceCount++,b):(b=this.aliases[a]=this.source.wrap(a),b.aliasable=!0,b.referenceCount=1,b)},setupHelper:function(a,b,c){var d=[],e=this.setupHelperArgs(b,a,d,c),f=this.nameLookup("helpers",b,"helper"),g=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:d,paramsInit:e,name:f,callParams:[g].concat(d)}},setupParams:function(a,b,c){var d={},e=[],f=[],g=[],h=!c,i=void 0;h&&(c=[]),d.name=this.quotedString(a),d.hash=this.popStack(),this.trackIds&&(d.hashIds=this.popStack()),this.stringParams&&(d.hashTypes=this.popStack(),d.hashContexts=this.popStack());var j=this.popStack(),k=this.popStack();(k||j)&&(d.fn=k||"container.noop",d.inverse=j||"container.noop");for(var l=b;l--;)i=this.popStack(),c[l]=i,this.trackIds&&(g[l]=this.popStack()),this.stringParams&&(f[l]=this.popStack(),e[l]=this.popStack());return h&&(d.args=this.source.generateArray(c)),this.trackIds&&(d.ids=this.source.generateArray(g)),this.stringParams&&(d.types=this.source.generateArray(f),d.contexts=this.source.generateArray(e)),this.options.data&&(d.data="data"),this.useBlockParams&&(d.blockParams="blockParams"),d},setupHelperArgs:function(a,b,c,d){var e=this.setupParams(a,b,c);return e=this.objectLiteral(e),d?(this.useRegister("options"),c.push("options"),["options=",e]):c?(c.push(e),""):e}},function(){for(var a="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),b=e.RESERVED_WORDS={},c=0,d=a.length;c<d;c++)b[a[c]]=!0}(),e.isValidJavaScriptVariableName=function(a){return!e.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)},b["default"]=e,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b,c){if(f.isArray(a)){for(var d=[],e=0,g=a.length;e<g;e++)d.push(b.wrap(a[e],c));return d}return"boolean"==typeof a||"number"==typeof a?a+"":a}function e(a){this.srcFile=a,this.source=[]}b.__esModule=!0;var f=c(5),g=void 0;try{}catch(h){}g||(g=function(a,b,c,d){this.src="",d&&this.add(d)},g.prototype={add:function(a){f.isArray(a)&&(a=a.join("")),this.src+=a},prepend:function(a){f.isArray(a)&&(a=a.join("")),this.src=a+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),e.prototype={isEmpty:function(){return!this.source.length},prepend:function(a,b){this.source.unshift(this.wrap(a,b))},push:function(a,b){this.source.push(this.wrap(a,b))},merge:function(){var a=this.empty();return this.each(function(b){a.add(["  ",b,"\n"])}),a},each:function(a){for(var b=0,c=this.source.length;b<c;b++)a(this.source[b])},empty:function(){var a=this.currentLocation||{start:{}};return new g(a.start.line,a.start.column,this.srcFile)},wrap:function(a){var b=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return a instanceof g?a:(a=d(a,this,b),new g(b.start.line,b.start.column,this.srcFile,a))},functionCall:function(a,b,c){return c=this.generateList(c),this.wrap([a,b?"."+b+"(":"(",c,")"])},quotedString:function(a){return'"'+(a+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(a){var b=[];for(var c in a)if(a.hasOwnProperty(c)){var e=d(a[c],this);"undefined"!==e&&b.push([this.quotedString(c),":",e])}var f=this.generateList(b);return f.prepend("{"),f.add("}"),f},generateList:function(a){for(var b=this.empty(),c=0,e=a.length;c<e;c++)c&&b.add(","),b.add(d(a[c],this));return b},generateArray:function(a){var b=this.generateList(a);return b.prepend("["),b.add("]"),b}},b["default"]=e,a.exports=b["default"]}])})},{}],29:[function(require,module,exports){module.exports=function buildAttributePolicy(attrName,tagName,valuePolicy){var policy={attr:attrName.toLowerCase()};if(tagName){policy.tag=tagName.toLowerCase()}if(valuePolicy){policy.valuePolicy=valuePolicy}return policy}},{}],30:[function(require,module,exports){var insane=require("insane");var configBuilder=require("./insane-config-builder");module.exports=function create(config){var insaneConfig=configBuilder(config);return function sanitize(htmlStr){return insane(htmlStr,insaneConfig,true)}}},{"./insane-config-builder":31,insane:37}],31:[function(require,module,exports){var attrPolicyBuilder=require("./attribute-policy-builder");var isDefined=require("./utils").isDefined;function normalizeAttrValue(value){return isDefined(value)?String(value):""}function getAttrNameFromToken(attr,token){var origAttrNames=Object.keys(token.attrs);var normalizedAttrNames=origAttrNames.map(function(attrName){return attrName.toLowerCase()});var attrPositionInList=normalizedAttrNames.indexOf(attr);return attrPositionInList>-1?origAttrNames[attrPositionInList]:undefined}function convertTagPoliciesToTags(tagPolicies){return tagPolicies.map(function(policy){return policy.name.toLowerCase()})}function convertAttrPoliciesToAttrOptions(attrPolicies,tags){var globalPolicies=attrPolicies.global.reduce(function(policies,globalPolicy){var taggedPolicies=tags.map(function(tag){return attrPolicyBuilder(globalPolicy.attr,tag,globalPolicy.valuePolicy)});return policies.concat(taggedPolicies)},[]);return attrPolicies.tagSpecific.concat(globalPolicies).reduce(function(config,policy){var tagAttrConfig=config[policy.tag];var attrName=policy.attr;if(!tagAttrConfig){tagAttrConfig=config[policy.tag]=[]}if(tagAttrConfig.indexOf(attrName)===-1){tagAttrConfig.push(attrName)}return config},{})}function convertAttrPoliciesToFilters(attrPolicies){return attrPolicies.tagSpecific.concat(attrPolicies.global).filter(function(policy){var filter=policy.valuePolicy;return filter&&isDefined(filter.values)}).map(function(policy){var tag=policy.tag;var attr=policy.attr;var filter=policy.valuePolicy;var ignoreCase=filter.ignoreCase!==false;var possibleValues=[].concat(filter.values).map(function(value){var strValue=normalizeAttrValue(value);return ignoreCase?strValue.toLowerCase():strValue});return function filterAttrByValue(token){var rawAttrName=getAttrNameFromToken(attr,token);var attrValue=normalizeAttrValue(token.attrs[rawAttrName]);var value=ignoreCase?attrValue.toLowerCase():attrValue;if((!tag||token.tag===tag)&&rawAttrName){if(possibleValues.indexOf(value)===-1){delete token.attrs[rawAttrName]}}return true}})}function createNofollowFilter(){return function noFollowFilter(token){var relAttr=getAttrNameFromToken("rel",token);var relValue=token.attrs[relAttr];if(token.tag==="a"){if(!relAttr){relAttr="rel"}if(!isDefined(relValue)){relValue=""}token.attrs[relAttr]=relValue+(relValue.length?" ":"")+"nofollow noopener noreferrer"}return true}}module.exports=function build(config){var insaneConfig={};var tags=convertTagPoliciesToTags(config.tagPolicies);var attrs=convertAttrPoliciesToAttrOptions(config.attrPolicies,tags);var filters=convertAttrPoliciesToFilters(config.attrPolicies);if(config.requireNofollowOnAnchors){filters.push(createNofollowFilter())}insaneConfig.allowedTags=tags;insaneConfig.allowedAttributes=attrs;insaneConfig.allowedSchemes=config.urlProtocols;if(filters.length){insaneConfig.filter=function runAllFilters(token){return filters.reduce(function(proceed,filterFunc){return proceed?filterFunc(token):false},true)}}return insaneConfig}},{"./attribute-policy-builder":29,"./utils":33}],32:[function(require,module,exports){var attrPolicyBuilder=require("./attribute-policy-builder");var isDefined=require("./utils").isDefined;var sanitizer=require("./insane-adapter");function getTagPolicies(config){var tags=isDefined(config.elements)?[].concat(config.elements):[];return tags.filter(function(tag){return typeof tag==="string"}).map(function(tag){return{name:tag.toLowerCase()}})}function getAttrPolicies(config){var attributes=isDefined(config.attributes)?[].concat(config.attributes):[];var policies={global:[],tagSpecific:[]};attributes.filter(function(attrConfig){return isDefined(attrConfig.names)}).forEach(function(attrConfig){var onElements=isDefined(attrConfig.on)?[].concat(attrConfig.on):[];[].concat(attrConfig.names).filter(function(attrName){return typeof attrName==="string"}).forEach(function(attrName){if(onElements.length>0){onElements.forEach(function(tagName){policies.tagSpecific.push(attrPolicyBuilder(attrName,tagName,attrConfig.matching))})}else{policies.global.push(attrPolicyBuilder(attrName,null,attrConfig.matching))}})});return policies}function normalizeConfig(config){var _config=typeof config==="object"?config:{};var normalConfig={};normalConfig.tagPolicies=getTagPolicies(_config);normalConfig.attrPolicies=getAttrPolicies(_config);normalConfig.urlProtocols=_config.urlProtocols;normalConfig.requireNofollowOnAnchors=_config.requireRelNofollowOnLinks!==false;return normalConfig}function create(config){var normalConfig=normalizeConfig(config);return sanitizer(normalConfig)}module.exports={create:create}},{"./attribute-policy-builder":29,"./insane-adapter":30,"./utils":33}],33:[function(require,module,exports){function isDefined(value){return value!==undefined&&value!==null}module.exports={isDefined:isDefined}},{}],34:[function(require,module,exports){"use strict";var toMap=require("./toMap");var uris=["background","base","cite","href","longdesc","src","usemap"];module.exports={uris:toMap(uris)}},{"./toMap":43}],35:[function(require,module,exports){"use strict";var defaults={allowedAttributes:{a:["href","name","target","title","aria-label"],iframe:["allowfullscreen","frameborder","src"],img:["src","alt","title","aria-label"]},allowedClasses:{},allowedSchemes:["http","https","mailto"],allowedTags:["a","abbr","article","b","blockquote","br","caption","code","del","details","div","em","h1","h2","h3","h4","h5","h6","hr","i","img","ins","kbd","li","main","mark","ol","p","pre","section","span","strike","strong","sub","summary","sup","table","tbody","td","th","thead","tr","u","ul"],filter:null};module.exports=defaults},{}],36:[function(require,module,exports){"use strict";var toMap=require("./toMap");var voids=["area","br","col","hr","img","wbr","input","base","basefont","link","meta"];module.exports={voids:toMap(voids)}},{"./toMap":43}],37:[function(require,module,exports){"use strict";var he=require("he");var assign=require("assignment");var parser=require("./parser");var sanitizer=require("./sanitizer");var defaults=require("./defaults");function insane(html,options,strict){var buffer=[];var configuration=strict===true?options:assign({},defaults,options);var handler=sanitizer(buffer,configuration);parser(html,handler);return buffer.join("")}insane.defaults=defaults;module.exports=insane},{"./defaults":35,"./parser":40,"./sanitizer":41,assignment:39,he:42}],38:[function(require,module,exports){"use strict";module.exports=function lowercase(string){return typeof string==="string"?string.toLowerCase():string}},{}],39:[function(require,module,exports){"use strict";function assignment(result){var stack=Array.prototype.slice.call(arguments,1);var item;var key;while(stack.length){item=stack.shift();for(key in item){if(item.hasOwnProperty(key)){if(Object.prototype.toString.call(result[key])==="[object Object]"){result[key]=assignment(result[key],item[key])}else{result[key]=item[key]}}}}return result}module.exports=assignment},{}],40:[function(require,module,exports){"use strict";var he=require("he");var lowercase=require("./lowercase");var attributes=require("./attributes");var elements=require("./elements");var rstart=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/;var rend=/^<\s*\/\s*([\w:-]+)[^>]*>/;var rattrs=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g;var rtag=/^</;var rtagend=/^<\s*\//;function createStack(){var stack=[];stack.lastItem=function lastItem(){return stack[stack.length-1]};return stack}function parser(html,handler){var stack=createStack();var last=html;var chars;while(html){parsePart()}parseEndTag();function parsePart(){chars=true;parseTag();var same=html===last;last=html;if(same){html=""}}function parseTag(){if(html.substr(0,4)==="<!--"){parseComment()}else if(rtagend.test(html)){parseEdge(rend,parseEndTag)}else if(rtag.test(html)){parseEdge(rstart,parseStartTag)}parseTagDecode()}function parseEdge(regex,parser){var match=html.match(regex);if(match){html=html.substring(match[0].length);match[0].replace(regex,parser);chars=false}}function parseComment(){var index=html.indexOf("-->");if(index>=0){if(handler.comment){handler.comment(html.substring(4,index))}html=html.substring(index+3);chars=false}}function parseTagDecode(){if(!chars){return}var text;var index=html.indexOf("<");if(index>=0){text=html.substring(0,index);html=html.substring(index)}else{text=html;html=""}if(handler.chars){handler.chars(text)}}function parseStartTag(tag,tagName,rest,unary){var attrs={};var low=lowercase(tagName);var u=elements.voids[low]||!!unary;rest.replace(rattrs,attrReplacer);if(!u){stack.push(low)}if(handler.start){handler.start(low,attrs,u)}function attrReplacer(match,name,doubleQuotedValue,singleQuotedValue,unquotedValue){if(doubleQuotedValue===void 0&&singleQuotedValue===void 0&&unquotedValue===void 0){attrs[name]=void 0}else{attrs[name]=he.decode(doubleQuotedValue||singleQuotedValue||unquotedValue||"")}}}function parseEndTag(tag,tagName){var i;var pos=0;var low=lowercase(tagName);if(low){for(pos=stack.length-1;pos>=0;pos--){if(stack[pos]===low){break}}}if(pos>=0){for(i=stack.length-1;i>=pos;i--){if(handler.end){handler.end(stack[i])}}stack.length=pos}}}module.exports=parser},{"./attributes":34,"./elements":36,"./lowercase":38,he:42}],41:[function(require,module,exports){"use strict";var he=require("he");var lowercase=require("./lowercase");var attributes=require("./attributes");var elements=require("./elements");function sanitizer(buffer,options){var last;var context;var o=options||{};reset();return{start:start,end:end,chars:chars};function out(value){buffer.push(value)}function start(tag,attrs,unary){var low=lowercase(tag);if(context.ignoring){ignore(low);return}if((o.allowedTags||[]).indexOf(low)===-1){ignore(low);return}if(o.filter&&!o.filter({tag:low,attrs:attrs})){ignore(low);return}out("<");out(low);Object.keys(attrs).forEach(parse);out(unary?"/>":">");function parse(key){var value=attrs[key];var classesOk=(o.allowedClasses||{})[low]||[];var attrsOk=(o.allowedAttributes||{})[low]||[];var valid;var lkey=lowercase(key);if(lkey==="class"&&attrsOk.indexOf(lkey)===-1){value=value.split(" ").filter(isValidClass).join(" ").trim();valid=value.length}else{valid=attrsOk.indexOf(lkey)!==-1&&(attributes.uris[lkey]!==true||testUrl(value))}if(valid){out(" ");out(key);if(typeof value==="string"){out('="');out(he.encode(value));out('"')}}function isValidClass(className){return classesOk&&classesOk.indexOf(className)!==-1}}}function end(tag){var low=lowercase(tag);var allowed=(o.allowedTags||[]).indexOf(low)!==-1;if(allowed){if(context.ignoring===false){out("</");out(low);out(">")}else{unignore(low)}}else{unignore(low)}}function testUrl(text){var start=text[0];if(start==="#"||start==="/"){return true}var colon=text.indexOf(":");if(colon===-1){return true}var questionmark=text.indexOf("?");if(questionmark!==-1&&colon>questionmark){return true}var hash=text.indexOf("#");if(hash!==-1&&colon>hash){return true}return o.allowedSchemes.some(matches);function matches(scheme){return text.indexOf(scheme+":")===0}}function chars(text){if(context.ignoring===false){out(o.transformText?o.transformText(text):text)}}function ignore(tag){if(elements.voids[tag]){return}if(context.ignoring===false){context={ignoring:tag,depth:1}}else if(context.ignoring===tag){context.depth++}}function unignore(tag){if(context.ignoring===tag){if(--context.depth<=0){reset()}}}function reset(){context={ignoring:false,depth:0}}}module.exports=sanitizer},{"./attributes":34,"./elements":36,"./lowercase":38,he:42}],42:[function(require,module,exports){"use strict";var escapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var unescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};var rescaped=/(&amp;|&lt;|&gt;|&quot;|&#39;)/g;var runescaped=/[&<>"']/g;function escapeHtmlChar(match){return escapes[match]}function unescapeHtmlChar(match){return unescapes[match]}function escapeHtml(text){return text==null?"":String(text).replace(runescaped,escapeHtmlChar)}function unescapeHtml(html){return html==null?"":String(html).replace(rescaped,unescapeHtmlChar)}escapeHtml.options=unescapeHtml.options={};module.exports={encode:escapeHtml,escape:escapeHtml,decode:unescapeHtml,unescape:unescapeHtml,version:"1.0.0-browser"}},{}],43:[function(require,module,exports){"use strict";function toMap(list){return list.reduce(asKey,{})}function asKey(accumulator,item){accumulator[item]=true;return accumulator}module.exports=toMap},{}],44:[function(require,module,exports){var getNative=require("./_getNative"),root=require("./_root");var DataView=getNative(root,"DataView");module.exports=DataView},{"./_getNative":111,"./_root":152}],45:[function(require,module,exports){var hashClear=require("./_hashClear"),hashDelete=require("./_hashDelete"),hashGet=require("./_hashGet"),hashHas=require("./_hashHas"),hashSet=require("./_hashSet");function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;module.exports=Hash},{"./_hashClear":118,"./_hashDelete":119,"./_hashGet":120,"./_hashHas":121,"./_hashSet":122}],46:[function(require,module,exports){var listCacheClear=require("./_listCacheClear"),listCacheDelete=require("./_listCacheDelete"),listCacheGet=require("./_listCacheGet"),listCacheHas=require("./_listCacheHas"),listCacheSet=require("./_listCacheSet");function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;module.exports=ListCache},{"./_listCacheClear":133,"./_listCacheDelete":134,"./_listCacheGet":135,"./_listCacheHas":136,"./_listCacheSet":137}],47:[function(require,module,exports){var getNative=require("./_getNative"),root=require("./_root");var Map=getNative(root,"Map");module.exports=Map},{"./_getNative":111,"./_root":152}],48:[function(require,module,exports){var mapCacheClear=require("./_mapCacheClear"),mapCacheDelete=require("./_mapCacheDelete"),mapCacheGet=require("./_mapCacheGet"),mapCacheHas=require("./_mapCacheHas"),mapCacheSet=require("./_mapCacheSet");function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;module.exports=MapCache},{"./_mapCacheClear":138,"./_mapCacheDelete":139,"./_mapCacheGet":140,"./_mapCacheHas":141,"./_mapCacheSet":142}],49:[function(require,module,exports){var getNative=require("./_getNative"),root=require("./_root");var Promise=getNative(root,"Promise");module.exports=Promise},{"./_getNative":111,"./_root":152}],50:[function(require,module,exports){var getNative=require("./_getNative"),root=require("./_root");var Set=getNative(root,"Set");module.exports=Set},{"./_getNative":111,"./_root":152}],51:[function(require,module,exports){var ListCache=require("./_ListCache"),stackClear=require("./_stackClear"),stackDelete=require("./_stackDelete"),stackGet=require("./_stackGet"),stackHas=require("./_stackHas"),stackSet=require("./_stackSet");function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;module.exports=Stack},{"./_ListCache":46,"./_stackClear":156,"./_stackDelete":157,"./_stackGet":158,"./_stackHas":159,"./_stackSet":160}],52:[function(require,module,exports){var root=require("./_root");var Symbol=root.Symbol;module.exports=Symbol},{"./_root":152}],53:[function(require,module,exports){var root=require("./_root");var Uint8Array=root.Uint8Array;module.exports=Uint8Array},{"./_root":152}],54:[function(require,module,exports){var getNative=require("./_getNative"),root=require("./_root");var WeakMap=getNative(root,"WeakMap");module.exports=WeakMap},{"./_getNative":111,"./_root":152}],55:[function(require,module,exports){function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}module.exports=apply},{}],56:[function(require,module,exports){function arrayEach(array,iteratee){var index=-1,length=array==null?0:array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}module.exports=arrayEach},{}],57:[function(require,module,exports){function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value}}return result}module.exports=arrayFilter},{}],58:[function(require,module,exports){var baseTimes=require("./_baseTimes"),isArguments=require("./isArguments"),isArray=require("./isArray"),isBuffer=require("./isBuffer"),isIndex=require("./_isIndex"),isTypedArray=require("./isTypedArray");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length)))){result.push(key)}}return result}module.exports=arrayLikeKeys},{"./_baseTimes":86,"./_isIndex":127,"./isArguments":170,"./isArray":171,"./isBuffer":174,"./isTypedArray":183}],59:[function(require,module,exports){function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}module.exports=arrayMap},{}],60:[function(require,module,exports){function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}module.exports=arrayPush},{}],61:[function(require,module,exports){var baseAssignValue=require("./_baseAssignValue"),eq=require("./eq");function assignMergeValue(object,key,value){if(value!==undefined&&!eq(object[key],value)||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}module.exports=assignMergeValue},{"./_baseAssignValue":66,"./eq":167}],62:[function(require,module,exports){var baseAssignValue=require("./_baseAssignValue"),eq=require("./eq");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}module.exports=assignValue},{"./_baseAssignValue":66,"./eq":167}],63:[function(require,module,exports){var eq=require("./eq");function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}module.exports=assocIndexOf},{"./eq":167}],64:[function(require,module,exports){var copyObject=require("./_copyObject"),keys=require("./keys");function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}module.exports=baseAssign},{"./_copyObject":98,"./keys":184}],65:[function(require,module,exports){var copyObject=require("./_copyObject"),keysIn=require("./keysIn");function baseAssignIn(object,source){return object&&copyObject(source,keysIn(source),object)}module.exports=baseAssignIn},{"./_copyObject":98,"./keysIn":185}],66:[function(require,module,exports){var defineProperty=require("./_defineProperty");function baseAssignValue(object,key,value){if(key=="__proto__"&&defineProperty){defineProperty(object,key,{configurable:true,enumerable:true,value:value,writable:true})}else{object[key]=value}}module.exports=baseAssignValue},{"./_defineProperty":105}],67:[function(require,module,exports){var Stack=require("./_Stack"),arrayEach=require("./_arrayEach"),assignValue=require("./_assignValue"),baseAssign=require("./_baseAssign"),baseAssignIn=require("./_baseAssignIn"),cloneBuffer=require("./_cloneBuffer"),copyArray=require("./_copyArray"),copySymbols=require("./_copySymbols"),copySymbolsIn=require("./_copySymbolsIn"),getAllKeys=require("./_getAllKeys"),getAllKeysIn=require("./_getAllKeysIn"),getTag=require("./_getTag"),initCloneArray=require("./_initCloneArray"),initCloneByTag=require("./_initCloneByTag"),initCloneObject=require("./_initCloneObject"),isArray=require("./isArray"),isBuffer=require("./isBuffer"),isMap=require("./isMap"),isObject=require("./isObject"),isSet=require("./isSet"),keys=require("./keys");
var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4;var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=false;function baseClone(value,bitmask,customizer,key,object,stack){var result,isDeep=bitmask&CLONE_DEEP_FLAG,isFlat=bitmask&CLONE_FLAT_FLAG,isFull=bitmask&CLONE_SYMBOLS_FLAG;if(customizer){result=object?customizer(value,key,object,stack):customizer(value)}if(result!==undefined){return result}if(!isObject(value)){return value}var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep){return copyArray(value,result)}}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value)){return cloneBuffer(value,isDeep)}if(tag==objectTag||tag==argsTag||isFunc&&!object){result=isFlat||isFunc?{}:initCloneObject(value);if(!isDeep){return isFlat?copySymbolsIn(value,baseAssignIn(result,value)):copySymbols(value,baseAssign(result,value))}}else{if(!cloneableTags[tag]){return object?value:{}}result=initCloneByTag(value,tag,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked){return stacked}stack.set(value,result);if(isSet(value)){value.forEach(function(subValue){result.add(baseClone(subValue,bitmask,customizer,subValue,value,stack))})}else if(isMap(value)){value.forEach(function(subValue,key){result.set(key,baseClone(subValue,bitmask,customizer,key,value,stack))})}var keysFunc=isFull?isFlat?getAllKeysIn:getAllKeys:isFlat?keysIn:keys;var props=isArr?undefined:keysFunc(value);arrayEach(props||value,function(subValue,key){if(props){key=subValue;subValue=value[key]}assignValue(result,key,baseClone(subValue,bitmask,customizer,key,value,stack))});return result}module.exports=baseClone},{"./_Stack":51,"./_arrayEach":56,"./_assignValue":62,"./_baseAssign":64,"./_baseAssignIn":65,"./_cloneBuffer":92,"./_copyArray":97,"./_copySymbols":99,"./_copySymbolsIn":100,"./_getAllKeys":108,"./_getAllKeysIn":109,"./_getTag":116,"./_initCloneArray":123,"./_initCloneByTag":124,"./_initCloneObject":125,"./isArray":171,"./isBuffer":174,"./isMap":177,"./isObject":178,"./isSet":181,"./keys":184}],68:[function(require,module,exports){var isObject=require("./isObject");var objectCreate=Object.create;var baseCreate=function(){function object(){}return function(proto){if(!isObject(proto)){return{}}if(objectCreate){return objectCreate(proto)}object.prototype=proto;var result=new object;object.prototype=undefined;return result}}();module.exports=baseCreate},{"./isObject":178}],69:[function(require,module,exports){var arrayPush=require("./_arrayPush"),isFlattenable=require("./_isFlattenable");function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;predicate||(predicate=isFlattenable);result||(result=[]);while(++index<length){var value=array[index];if(depth>0&&predicate(value)){if(depth>1){baseFlatten(value,depth-1,predicate,isStrict,result)}else{arrayPush(result,value)}}else if(!isStrict){result[result.length]=value}}return result}module.exports=baseFlatten},{"./_arrayPush":60,"./_isFlattenable":126}],70:[function(require,module,exports){var createBaseFor=require("./_createBaseFor");var baseFor=createBaseFor();module.exports=baseFor},{"./_createBaseFor":103}],71:[function(require,module,exports){var castPath=require("./_castPath"),toKey=require("./_toKey");function baseGet(object,path){path=castPath(path,object);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])]}return index&&index==length?object:undefined}module.exports=baseGet},{"./_castPath":90,"./_toKey":162}],72:[function(require,module,exports){var arrayPush=require("./_arrayPush"),isArray=require("./isArray");function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}module.exports=baseGetAllKeys},{"./_arrayPush":60,"./isArray":171}],73:[function(require,module,exports){var Symbol=require("./_Symbol"),getRawTag=require("./_getRawTag"),objectToString=require("./_objectToString");var nullTag="[object Null]",undefinedTag="[object Undefined]";var symToStringTag=Symbol?Symbol.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}module.exports=baseGetTag},{"./_Symbol":52,"./_getRawTag":113,"./_objectToString":148}],74:[function(require,module,exports){var baseGetTag=require("./_baseGetTag"),isObjectLike=require("./isObjectLike");var argsTag="[object Arguments]";function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}module.exports=baseIsArguments},{"./_baseGetTag":73,"./isObjectLike":179}],75:[function(require,module,exports){var getTag=require("./_getTag"),isObjectLike=require("./isObjectLike");var mapTag="[object Map]";function baseIsMap(value){return isObjectLike(value)&&getTag(value)==mapTag}module.exports=baseIsMap},{"./_getTag":116,"./isObjectLike":179}],76:[function(require,module,exports){var isFunction=require("./isFunction"),isMasked=require("./_isMasked"),isObject=require("./isObject"),toSource=require("./_toSource");var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var funcProto=Function.prototype,objectProto=Object.prototype;var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}module.exports=baseIsNative},{"./_isMasked":131,"./_toSource":163,"./isFunction":175,"./isObject":178}],77:[function(require,module,exports){var getTag=require("./_getTag"),isObjectLike=require("./isObjectLike");var setTag="[object Set]";function baseIsSet(value){return isObjectLike(value)&&getTag(value)==setTag}module.exports=baseIsSet},{"./_getTag":116,"./isObjectLike":179}],78:[function(require,module,exports){var baseGetTag=require("./_baseGetTag"),isLength=require("./isLength"),isObjectLike=require("./isObjectLike");var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}module.exports=baseIsTypedArray},{"./_baseGetTag":73,"./isLength":176,"./isObjectLike":179}],79:[function(require,module,exports){var isPrototype=require("./_isPrototype"),nativeKeys=require("./_nativeKeys");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty.call(object,key)&&key!="constructor"){result.push(key)}}return result}module.exports=baseKeys},{"./_isPrototype":132,"./_nativeKeys":145}],80:[function(require,module,exports){var isObject=require("./isObject"),isPrototype=require("./_isPrototype"),nativeKeysIn=require("./_nativeKeysIn");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function baseKeysIn(object){if(!isObject(object)){return nativeKeysIn(object)}var isProto=isPrototype(object),result=[];for(var key in object){if(!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}module.exports=baseKeysIn},{"./_isPrototype":132,"./_nativeKeysIn":146,"./isObject":178}],81:[function(require,module,exports){var Stack=require("./_Stack"),assignMergeValue=require("./_assignMergeValue"),baseFor=require("./_baseFor"),baseMergeDeep=require("./_baseMergeDeep"),isObject=require("./isObject"),keysIn=require("./keysIn"),safeGet=require("./_safeGet");function baseMerge(object,source,srcIndex,customizer,stack){if(object===source){return}baseFor(source,function(srcValue,key){stack||(stack=new Stack);if(isObject(srcValue)){baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack)}else{var newValue=customizer?customizer(safeGet(object,key),srcValue,key+"",object,source,stack):undefined;if(newValue===undefined){newValue=srcValue}assignMergeValue(object,key,newValue)}},keysIn)}module.exports=baseMerge},{"./_Stack":51,"./_assignMergeValue":61,"./_baseFor":70,"./_baseMergeDeep":82,"./_safeGet":153,"./isObject":178,"./keysIn":185}],82:[function(require,module,exports){var assignMergeValue=require("./_assignMergeValue"),cloneBuffer=require("./_cloneBuffer"),cloneTypedArray=require("./_cloneTypedArray"),copyArray=require("./_copyArray"),initCloneObject=require("./_initCloneObject"),isArguments=require("./isArguments"),isArray=require("./isArray"),isArrayLikeObject=require("./isArrayLikeObject"),isBuffer=require("./isBuffer"),isFunction=require("./isFunction"),isObject=require("./isObject"),isPlainObject=require("./isPlainObject"),isTypedArray=require("./isTypedArray"),safeGet=require("./_safeGet"),toPlainObject=require("./toPlainObject");function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=safeGet(object,key),srcValue=safeGet(source,key),stacked=stack.get(srcValue);if(stacked){assignMergeValue(object,key,stacked);return}var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):undefined;var isCommon=newValue===undefined;if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue;if(isArr||isBuff||isTyped){if(isArray(objValue)){newValue=objValue}else if(isArrayLikeObject(objValue)){newValue=copyArray(objValue)}else if(isBuff){isCommon=false;newValue=cloneBuffer(srcValue,true)}else if(isTyped){isCommon=false;newValue=cloneTypedArray(srcValue,true)}else{newValue=[]}}else if(isPlainObject(srcValue)||isArguments(srcValue)){newValue=objValue;if(isArguments(objValue)){newValue=toPlainObject(objValue)}else if(!isObject(objValue)||isFunction(objValue)){newValue=initCloneObject(srcValue)}}else{isCommon=false}}if(isCommon){stack.set(srcValue,newValue);mergeFunc(newValue,srcValue,srcIndex,customizer,stack);stack["delete"](srcValue)}assignMergeValue(object,key,newValue)}module.exports=baseMergeDeep},{"./_assignMergeValue":61,"./_cloneBuffer":92,"./_cloneTypedArray":96,"./_copyArray":97,"./_initCloneObject":125,"./_safeGet":153,"./isArguments":170,"./isArray":171,"./isArrayLikeObject":173,"./isBuffer":174,"./isFunction":175,"./isObject":178,"./isPlainObject":180,"./isTypedArray":183,"./toPlainObject":192}],83:[function(require,module,exports){var identity=require("./identity"),overRest=require("./_overRest"),setToString=require("./_setToString");function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}module.exports=baseRest},{"./_overRest":150,"./_setToString":154,"./identity":169}],84:[function(require,module,exports){var constant=require("./constant"),defineProperty=require("./_defineProperty"),identity=require("./identity");var baseSetToString=!defineProperty?identity:function(func,string){return defineProperty(func,"toString",{configurable:true,enumerable:false,value:constant(string),writable:true})};module.exports=baseSetToString},{"./_defineProperty":105,"./constant":166,"./identity":169}],85:[function(require,module,exports){function baseSlice(array,start,end){var index=-1,length=array.length;if(start<0){start=-start>length?0:length+start}end=end>length?length:end;if(end<0){end+=length}length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start]}return result}module.exports=baseSlice},{}],86:[function(require,module,exports){function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}module.exports=baseTimes},{}],87:[function(require,module,exports){var Symbol=require("./_Symbol"),arrayMap=require("./_arrayMap"),isArray=require("./isArray"),isSymbol=require("./isSymbol");var INFINITY=1/0;var symbolProto=Symbol?Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function baseToString(value){if(typeof value=="string"){return value}if(isArray(value)){return arrayMap(value,baseToString)+""}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=baseToString},{"./_Symbol":52,"./_arrayMap":59,"./isArray":171,"./isSymbol":182}],88:[function(require,module,exports){function baseUnary(func){return function(value){return func(value)}}module.exports=baseUnary},{}],89:[function(require,module,exports){var castPath=require("./_castPath"),last=require("./last"),parent=require("./_parent"),toKey=require("./_toKey");function baseUnset(object,path){path=castPath(path,object);object=parent(object,path);return object==null||delete object[toKey(last(path))]}module.exports=baseUnset},{"./_castPath":90,"./_parent":151,"./_toKey":162,"./last":186}],90:[function(require,module,exports){var isArray=require("./isArray"),isKey=require("./_isKey"),stringToPath=require("./_stringToPath"),toString=require("./toString");function castPath(value,object){if(isArray(value)){return value}return isKey(value,object)?[value]:stringToPath(toString(value))}module.exports=castPath},{"./_isKey":129,"./_stringToPath":161,"./isArray":171,"./toString":193}],91:[function(require,module,exports){var Uint8Array=require("./_Uint8Array");function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);new Uint8Array(result).set(new Uint8Array(arrayBuffer));return result}module.exports=cloneArrayBuffer},{"./_Uint8Array":53}],92:[function(require,module,exports){var root=require("./_root");var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Buffer:undefined,allocUnsafe=Buffer?Buffer.allocUnsafe:undefined;function cloneBuffer(buffer,isDeep){if(isDeep){return buffer.slice()}var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);buffer.copy(result);return result}module.exports=cloneBuffer},{"./_root":152}],93:[function(require,module,exports){var cloneArrayBuffer=require("./_cloneArrayBuffer");function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}module.exports=cloneDataView},{"./_cloneArrayBuffer":91}],94:[function(require,module,exports){var reFlags=/\w*$/;function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));result.lastIndex=regexp.lastIndex;return result}module.exports=cloneRegExp},{}],95:[function(require,module,exports){var Symbol=require("./_Symbol");var symbolProto=Symbol?Symbol.prototype:undefined,symbolValueOf=symbolProto?symbolProto.valueOf:undefined;function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}module.exports=cloneSymbol},{"./_Symbol":52}],96:[function(require,module,exports){var cloneArrayBuffer=require("./_cloneArrayBuffer");function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}module.exports=cloneTypedArray},{"./_cloneArrayBuffer":91}],97:[function(require,module,exports){function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index]}return array}module.exports=copyArray},{}],98:[function(require,module,exports){var assignValue=require("./_assignValue"),baseAssignValue=require("./_baseAssignValue");function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;if(newValue===undefined){newValue=source[key]}if(isNew){baseAssignValue(object,key,newValue)}else{assignValue(object,key,newValue)}}return object}module.exports=copyObject},{"./_assignValue":62,"./_baseAssignValue":66}],99:[function(require,module,exports){var copyObject=require("./_copyObject"),getSymbols=require("./_getSymbols");function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}module.exports=copySymbols},{"./_copyObject":98,"./_getSymbols":114}],100:[function(require,module,exports){var copyObject=require("./_copyObject"),getSymbolsIn=require("./_getSymbolsIn");function copySymbolsIn(source,object){return copyObject(source,getSymbolsIn(source),object)}module.exports=copySymbolsIn},{"./_copyObject":98,"./_getSymbolsIn":115}],101:[function(require,module,exports){var root=require("./_root");var coreJsData=root["__core-js_shared__"];module.exports=coreJsData},{"./_root":152}],102:[function(require,module,exports){var baseRest=require("./_baseRest"),isIterateeCall=require("./_isIterateeCall");function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;customizer=assigner.length>3&&typeof customizer=="function"?(length--,customizer):undefined;if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1}object=Object(object);while(++index<length){var source=sources[index];if(source){assigner(object,source,index,customizer)}}return object})}module.exports=createAssigner},{"./_baseRest":83,"./_isIterateeCall":128}],103:[function(require,module,exports){function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}module.exports=createBaseFor},{}],104:[function(require,module,exports){var isPlainObject=require("./isPlainObject");function customOmitClone(value){return isPlainObject(value)?undefined:value}module.exports=customOmitClone},{"./isPlainObject":180}],105:[function(require,module,exports){var getNative=require("./_getNative");var defineProperty=function(){try{var func=getNative(Object,"defineProperty");func({},"",{});return func}catch(e){}}();module.exports=defineProperty},{"./_getNative":111}],106:[function(require,module,exports){var flatten=require("./flatten"),overRest=require("./_overRest"),setToString=require("./_setToString");function flatRest(func){return setToString(overRest(func,undefined,flatten),func+"")}module.exports=flatRest},{"./_overRest":150,"./_setToString":154,"./flatten":168}],107:[function(require,module,exports){(function(global){var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;module.exports=freeGlobal}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],108:[function(require,module,exports){var baseGetAllKeys=require("./_baseGetAllKeys"),getSymbols=require("./_getSymbols"),keys=require("./keys");function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}module.exports=getAllKeys},{"./_baseGetAllKeys":72,"./_getSymbols":114,"./keys":184}],109:[function(require,module,exports){var baseGetAllKeys=require("./_baseGetAllKeys"),getSymbolsIn=require("./_getSymbolsIn"),keysIn=require("./keysIn");function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}module.exports=getAllKeysIn},{"./_baseGetAllKeys":72,"./_getSymbolsIn":115,"./keysIn":185}],110:[function(require,module,exports){var isKeyable=require("./_isKeyable");function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}module.exports=getMapData},{"./_isKeyable":130}],111:[function(require,module,exports){var baseIsNative=require("./_baseIsNative"),getValue=require("./_getValue");function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}module.exports=getNative},{"./_baseIsNative":76,"./_getValue":117}],112:[function(require,module,exports){var overArg=require("./_overArg");var getPrototype=overArg(Object.getPrototypeOf,Object);module.exports=getPrototype},{"./_overArg":149}],113:[function(require,module,exports){var Symbol=require("./_Symbol");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=Symbol?Symbol.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}module.exports=getRawTag},{"./_Symbol":52}],114:[function(require,module,exports){var arrayFilter=require("./_arrayFilter"),stubArray=require("./stubArray");var objectProto=Object.prototype;var propertyIsEnumerable=objectProto.propertyIsEnumerable;var nativeGetSymbols=Object.getOwnPropertySymbols;var getSymbols=!nativeGetSymbols?stubArray:function(object){if(object==null){return[]}object=Object(object);return arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable.call(object,symbol)})};module.exports=getSymbols},{"./_arrayFilter":57,"./stubArray":190}],115:[function(require,module,exports){var arrayPush=require("./_arrayPush"),getPrototype=require("./_getPrototype"),getSymbols=require("./_getSymbols"),stubArray=require("./stubArray");var nativeGetSymbols=Object.getOwnPropertySymbols;var getSymbolsIn=!nativeGetSymbols?stubArray:function(object){var result=[];while(object){arrayPush(result,getSymbols(object));object=getPrototype(object)}return result};module.exports=getSymbolsIn},{"./_arrayPush":60,"./_getPrototype":112,"./_getSymbols":114,"./stubArray":190}],116:[function(require,module,exports){var DataView=require("./_DataView"),Map=require("./_Map"),Promise=require("./_Promise"),Set=require("./_Set"),WeakMap=require("./_WeakMap"),baseGetTag=require("./_baseGetTag"),toSource=require("./_toSource");var mapTag="[object Map]",objectTag="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]";var dataViewTag="[object DataView]";var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag){getTag=function(value){var result=baseGetTag(value),Ctor=result==objectTag?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}}return result}}module.exports=getTag},{"./_DataView":44,"./_Map":47,"./_Promise":49,"./_Set":50,"./_WeakMap":54,"./_baseGetTag":73,"./_toSource":163}],117:[function(require,module,exports){function getValue(object,key){return object==null?undefined:object[key]}module.exports=getValue},{}],118:[function(require,module,exports){var nativeCreate=require("./_nativeCreate");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}module.exports=hashClear},{"./_nativeCreate":144}],119:[function(require,module,exports){function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}module.exports=hashDelete},{}],120:[function(require,module,exports){var nativeCreate=require("./_nativeCreate");var HASH_UNDEFINED="__lodash_hash_undefined__";var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}module.exports=hashGet},{"./_nativeCreate":144}],121:[function(require,module,exports){var nativeCreate=require("./_nativeCreate");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}module.exports=hashHas},{"./_nativeCreate":144}],122:[function(require,module,exports){var nativeCreate=require("./_nativeCreate");var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}module.exports=hashSet},{"./_nativeCreate":144}],123:[function(require,module,exports){var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function initCloneArray(array){var length=array.length,result=new array.constructor(length);if(length&&typeof array[0]=="string"&&hasOwnProperty.call(array,"index")){result.index=array.index;result.input=array.input}return result}module.exports=initCloneArray},{}],124:[function(require,module,exports){var cloneArrayBuffer=require("./_cloneArrayBuffer"),cloneDataView=require("./_cloneDataView"),cloneRegExp=require("./_cloneRegExp"),cloneSymbol=require("./_cloneSymbol"),cloneTypedArray=require("./_cloneTypedArray");var boolTag="[object Boolean]",dateTag="[object Date]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return new Ctor;case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return new Ctor;case symbolTag:return cloneSymbol(object)}}module.exports=initCloneByTag},{"./_cloneArrayBuffer":91,"./_cloneDataView":93,"./_cloneRegExp":94,"./_cloneSymbol":95,"./_cloneTypedArray":96}],125:[function(require,module,exports){var baseCreate=require("./_baseCreate"),getPrototype=require("./_getPrototype"),isPrototype=require("./_isPrototype");function initCloneObject(object){return typeof object.constructor=="function"&&!isPrototype(object)?baseCreate(getPrototype(object)):{}}module.exports=initCloneObject},{"./_baseCreate":68,"./_getPrototype":112,"./_isPrototype":132}],126:[function(require,module,exports){var Symbol=require("./_Symbol"),isArguments=require("./isArguments"),isArray=require("./isArray");var spreadableSymbol=Symbol?Symbol.isConcatSpreadable:undefined;function isFlattenable(value){return isArray(value)||isArguments(value)||!!(spreadableSymbol&&value&&value[spreadableSymbol])}module.exports=isFlattenable},{"./_Symbol":52,"./isArguments":170,"./isArray":171}],127:[function(require,module,exports){var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(value,length){var type=typeof value;length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(type=="number"||type!="symbol"&&reIsUint.test(value))&&(value>-1&&value%1==0&&value<length)}module.exports=isIndex},{}],128:[function(require,module,exports){var eq=require("./eq"),isArrayLike=require("./isArrayLike"),isIndex=require("./_isIndex"),isObject=require("./isObject");function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index;if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){return eq(object[index],value)}return false}module.exports=isIterateeCall},{"./_isIndex":127,"./eq":167,"./isArrayLike":172,"./isObject":178}],129:[function(require,module,exports){var isArray=require("./isArray"),isSymbol=require("./isSymbol");var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(value,object){if(isArray(value)){return false}var type=typeof value;if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object);
}module.exports=isKey},{"./isArray":171,"./isSymbol":182}],130:[function(require,module,exports){function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}module.exports=isKeyable},{}],131:[function(require,module,exports){var coreJsData=require("./_coreJsData");var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}module.exports=isMasked},{"./_coreJsData":101}],132:[function(require,module,exports){var objectProto=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}module.exports=isPrototype},{}],133:[function(require,module,exports){function listCacheClear(){this.__data__=[];this.size=0}module.exports=listCacheClear},{}],134:[function(require,module,exports){var assocIndexOf=require("./_assocIndexOf");var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}module.exports=listCacheDelete},{"./_assocIndexOf":63}],135:[function(require,module,exports){var assocIndexOf=require("./_assocIndexOf");function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}module.exports=listCacheGet},{"./_assocIndexOf":63}],136:[function(require,module,exports){var assocIndexOf=require("./_assocIndexOf");function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}module.exports=listCacheHas},{"./_assocIndexOf":63}],137:[function(require,module,exports){var assocIndexOf=require("./_assocIndexOf");function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}module.exports=listCacheSet},{"./_assocIndexOf":63}],138:[function(require,module,exports){var Hash=require("./_Hash"),ListCache=require("./_ListCache"),Map=require("./_Map");function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}module.exports=mapCacheClear},{"./_Hash":45,"./_ListCache":46,"./_Map":47}],139:[function(require,module,exports){var getMapData=require("./_getMapData");function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}module.exports=mapCacheDelete},{"./_getMapData":110}],140:[function(require,module,exports){var getMapData=require("./_getMapData");function mapCacheGet(key){return getMapData(this,key).get(key)}module.exports=mapCacheGet},{"./_getMapData":110}],141:[function(require,module,exports){var getMapData=require("./_getMapData");function mapCacheHas(key){return getMapData(this,key).has(key)}module.exports=mapCacheHas},{"./_getMapData":110}],142:[function(require,module,exports){var getMapData=require("./_getMapData");function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}module.exports=mapCacheSet},{"./_getMapData":110}],143:[function(require,module,exports){var memoize=require("./memoize");var MAX_MEMOIZE_SIZE=500;function memoizeCapped(func){var result=memoize(func,function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear()}return key});var cache=result.cache;return result}module.exports=memoizeCapped},{"./memoize":187}],144:[function(require,module,exports){var getNative=require("./_getNative");var nativeCreate=getNative(Object,"create");module.exports=nativeCreate},{"./_getNative":111}],145:[function(require,module,exports){var overArg=require("./_overArg");var nativeKeys=overArg(Object.keys,Object);module.exports=nativeKeys},{"./_overArg":149}],146:[function(require,module,exports){function nativeKeysIn(object){var result=[];if(object!=null){for(var key in Object(object)){result.push(key)}}return result}module.exports=nativeKeysIn},{}],147:[function(require,module,exports){var freeGlobal=require("./_freeGlobal");var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;if(types){return types}return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();module.exports=nodeUtil},{"./_freeGlobal":107}],148:[function(require,module,exports){var objectProto=Object.prototype;var nativeObjectToString=objectProto.toString;function objectToString(value){return nativeObjectToString.call(value)}module.exports=objectToString},{}],149:[function(require,module,exports){function overArg(func,transform){return function(arg){return func(transform(arg))}}module.exports=overArg},{}],150:[function(require,module,exports){var apply=require("./_apply");var nativeMax=Math.max;function overRest(func,start,transform){start=nativeMax(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index]}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=transform(array);return apply(func,this,otherArgs)}}module.exports=overRest},{"./_apply":55}],151:[function(require,module,exports){var baseGet=require("./_baseGet"),baseSlice=require("./_baseSlice");function parent(object,path){return path.length<2?object:baseGet(object,baseSlice(path,0,-1))}module.exports=parent},{"./_baseGet":71,"./_baseSlice":85}],152:[function(require,module,exports){var freeGlobal=require("./_freeGlobal");var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();module.exports=root},{"./_freeGlobal":107}],153:[function(require,module,exports){function safeGet(object,key){if(key==="constructor"&&typeof object[key]==="function"){return}if(key=="__proto__"){return}return object[key]}module.exports=safeGet},{}],154:[function(require,module,exports){var baseSetToString=require("./_baseSetToString"),shortOut=require("./_shortOut");var setToString=shortOut(baseSetToString);module.exports=setToString},{"./_baseSetToString":84,"./_shortOut":155}],155:[function(require,module,exports){var HOT_COUNT=800,HOT_SPAN=16;var nativeNow=Date.now;function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return arguments[0]}}else{count=0}return func.apply(undefined,arguments)}}module.exports=shortOut},{}],156:[function(require,module,exports){var ListCache=require("./_ListCache");function stackClear(){this.__data__=new ListCache;this.size=0}module.exports=stackClear},{"./_ListCache":46}],157:[function(require,module,exports){function stackDelete(key){var data=this.__data__,result=data["delete"](key);this.size=data.size;return result}module.exports=stackDelete},{}],158:[function(require,module,exports){function stackGet(key){return this.__data__.get(key)}module.exports=stackGet},{}],159:[function(require,module,exports){function stackHas(key){return this.__data__.has(key)}module.exports=stackHas},{}],160:[function(require,module,exports){var ListCache=require("./_ListCache"),Map=require("./_Map"),MapCache=require("./_MapCache");var LARGE_ARRAY_SIZE=200;function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this}data=this.__data__=new MapCache(pairs)}data.set(key,value);this.size=data.size;return this}module.exports=stackSet},{"./_ListCache":46,"./_Map":47,"./_MapCache":48}],161:[function(require,module,exports){var memoizeCapped=require("./_memoizeCapped");var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reEscapeChar=/\\(\\)?/g;var stringToPath=memoizeCapped(function(string){var result=[];if(string.charCodeAt(0)===46){result.push("")}string.replace(rePropName,function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)});return result});module.exports=stringToPath},{"./_memoizeCapped":143}],162:[function(require,module,exports){var isSymbol=require("./isSymbol");var INFINITY=1/0;function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}module.exports=toKey},{"./isSymbol":182}],163:[function(require,module,exports){var funcProto=Function.prototype;var funcToString=funcProto.toString;function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}module.exports=toSource},{}],164:[function(require,module,exports){var assignValue=require("./_assignValue"),copyObject=require("./_copyObject"),createAssigner=require("./_createAssigner"),isArrayLike=require("./isArrayLike"),isPrototype=require("./_isPrototype"),keys=require("./keys");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var assign=createAssigner(function(object,source){if(isPrototype(source)||isArrayLike(source)){copyObject(source,keys(source),object);return}for(var key in source){if(hasOwnProperty.call(source,key)){assignValue(object,key,source[key])}}});module.exports=assign},{"./_assignValue":62,"./_copyObject":98,"./_createAssigner":102,"./_isPrototype":132,"./isArrayLike":172,"./keys":184}],165:[function(require,module,exports){var baseClone=require("./_baseClone");var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(value){return baseClone(value,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}module.exports=cloneDeep},{"./_baseClone":67}],166:[function(require,module,exports){function constant(value){return function(){return value}}module.exports=constant},{}],167:[function(require,module,exports){function eq(value,other){return value===other||value!==value&&other!==other}module.exports=eq},{}],168:[function(require,module,exports){var baseFlatten=require("./_baseFlatten");function flatten(array){var length=array==null?0:array.length;return length?baseFlatten(array,1):[]}module.exports=flatten},{"./_baseFlatten":69}],169:[function(require,module,exports){function identity(value){return value}module.exports=identity},{}],170:[function(require,module,exports){var baseIsArguments=require("./_baseIsArguments"),isObjectLike=require("./isObjectLike");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var propertyIsEnumerable=objectProto.propertyIsEnumerable;var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};module.exports=isArguments},{"./_baseIsArguments":74,"./isObjectLike":179}],171:[function(require,module,exports){var isArray=Array.isArray;module.exports=isArray},{}],172:[function(require,module,exports){var isFunction=require("./isFunction"),isLength=require("./isLength");function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}module.exports=isArrayLike},{"./isFunction":175,"./isLength":176}],173:[function(require,module,exports){var isArrayLike=require("./isArrayLike"),isObjectLike=require("./isObjectLike");function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}module.exports=isArrayLikeObject},{"./isArrayLike":172,"./isObjectLike":179}],174:[function(require,module,exports){var root=require("./_root"),stubFalse=require("./stubFalse");var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Buffer:undefined;var nativeIsBuffer=Buffer?Buffer.isBuffer:undefined;var isBuffer=nativeIsBuffer||stubFalse;module.exports=isBuffer},{"./_root":152,"./stubFalse":191}],175:[function(require,module,exports){var baseGetTag=require("./_baseGetTag"),isObject=require("./isObject");var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}module.exports=isFunction},{"./_baseGetTag":73,"./isObject":178}],176:[function(require,module,exports){var MAX_SAFE_INTEGER=9007199254740991;function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}module.exports=isLength},{}],177:[function(require,module,exports){var baseIsMap=require("./_baseIsMap"),baseUnary=require("./_baseUnary"),nodeUtil=require("./_nodeUtil");var nodeIsMap=nodeUtil&&nodeUtil.isMap;var isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;module.exports=isMap},{"./_baseIsMap":75,"./_baseUnary":88,"./_nodeUtil":147}],178:[function(require,module,exports){function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}module.exports=isObject},{}],179:[function(require,module,exports){function isObjectLike(value){return value!=null&&typeof value=="object"}module.exports=isObjectLike},{}],180:[function(require,module,exports){var baseGetTag=require("./_baseGetTag"),getPrototype=require("./_getPrototype"),isObjectLike=require("./isObjectLike");var objectTag="[object Object]";var funcProto=Function.prototype,objectProto=Object.prototype;var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objectCtorString=funcToString.call(Object);function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag){return false}var proto=getPrototype(value);if(proto===null){return true}var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return typeof Ctor=="function"&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}module.exports=isPlainObject},{"./_baseGetTag":73,"./_getPrototype":112,"./isObjectLike":179}],181:[function(require,module,exports){var baseIsSet=require("./_baseIsSet"),baseUnary=require("./_baseUnary"),nodeUtil=require("./_nodeUtil");var nodeIsSet=nodeUtil&&nodeUtil.isSet;var isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;module.exports=isSet},{"./_baseIsSet":77,"./_baseUnary":88,"./_nodeUtil":147}],182:[function(require,module,exports){var baseGetTag=require("./_baseGetTag"),isObjectLike=require("./isObjectLike");var symbolTag="[object Symbol]";function isSymbol(value){return typeof value=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag}module.exports=isSymbol},{"./_baseGetTag":73,"./isObjectLike":179}],183:[function(require,module,exports){var baseIsTypedArray=require("./_baseIsTypedArray"),baseUnary=require("./_baseUnary"),nodeUtil=require("./_nodeUtil");var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=isTypedArray},{"./_baseIsTypedArray":78,"./_baseUnary":88,"./_nodeUtil":147}],184:[function(require,module,exports){var arrayLikeKeys=require("./_arrayLikeKeys"),baseKeys=require("./_baseKeys"),isArrayLike=require("./isArrayLike");function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}module.exports=keys},{"./_arrayLikeKeys":58,"./_baseKeys":79,"./isArrayLike":172}],185:[function(require,module,exports){var arrayLikeKeys=require("./_arrayLikeKeys"),baseKeysIn=require("./_baseKeysIn"),isArrayLike=require("./isArrayLike");function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,true):baseKeysIn(object)}module.exports=keysIn},{"./_arrayLikeKeys":58,"./_baseKeysIn":80,"./isArrayLike":172}],186:[function(require,module,exports){function last(array){var length=array==null?0:array.length;return length?array[length-1]:undefined}module.exports=last},{}],187:[function(require,module,exports){var MapCache=require("./_MapCache");var FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;module.exports=memoize},{"./_MapCache":48}],188:[function(require,module,exports){var baseMerge=require("./_baseMerge"),createAssigner=require("./_createAssigner");var merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex)});module.exports=merge},{"./_baseMerge":81,"./_createAssigner":102}],189:[function(require,module,exports){var arrayMap=require("./_arrayMap"),baseClone=require("./_baseClone"),baseUnset=require("./_baseUnset"),castPath=require("./_castPath"),copyObject=require("./_copyObject"),customOmitClone=require("./_customOmitClone"),flatRest=require("./_flatRest"),getAllKeysIn=require("./_getAllKeysIn");var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4;var omit=flatRest(function(object,paths){var result={};if(object==null){return result}var isDeep=false;paths=arrayMap(paths,function(path){path=castPath(path,object);isDeep||(isDeep=path.length>1);return path});copyObject(object,getAllKeysIn(object),result);if(isDeep){result=baseClone(result,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone)}var length=paths.length;while(length--){baseUnset(result,paths[length])}return result});module.exports=omit},{"./_arrayMap":59,"./_baseClone":67,"./_baseUnset":89,"./_castPath":90,"./_copyObject":98,"./_customOmitClone":104,"./_flatRest":106,"./_getAllKeysIn":109}],190:[function(require,module,exports){function stubArray(){return[]}module.exports=stubArray},{}],191:[function(require,module,exports){function stubFalse(){return false}module.exports=stubFalse},{}],192:[function(require,module,exports){var copyObject=require("./_copyObject"),keysIn=require("./keysIn");function toPlainObject(value){return copyObject(value,keysIn(value))}module.exports=toPlainObject},{"./_copyObject":98,"./keysIn":185}],193:[function(require,module,exports){var baseToString=require("./_baseToString");function toString(value){return value==null?"":baseToString(value)}module.exports=toString},{"./_baseToString":87}],194:[function(require,module,exports){(function(global){var setImmediate=function setImmediateImpl(){"use strict";if(setImmediate){return setImmediate}else if({}.toString.call(global.process)==="[object process]"){return global.process.nextTick.bind(global.process)}else{return function(handler){setTimeout(handler,0)}}}();var convertToArray=function(){"use strict";var toArray=Array.prototype.slice;return function $convertToArray(obj){return obj?toArray.call(obj):[]}}();function createInspectionObject(resolved,valueOrReason){"use strict";var insp={isRejected:function(){return!resolved},isFulfilled:function(){return resolved}};insp.isResolved=insp.isFulfilled;if(resolved){Object.defineProperty(insp,"value",{enumerable:true,value:valueOrReason})}else{Object.defineProperty(insp,"reason",{enumerable:true,value:valueOrReason})}return insp}function applyExtensions(Promise){"use strict";Promise.prototype.spread=function(fn){return this.then(function(args){return Promise.all(args)}).then(function(array){return fn.apply(null,array)})};Promise.prototype.delay=function(timeout){return this.then(function(args){return new Promise(function(resolve){setTimeout(function(){resolve(args)},timeout)})})};Promise.delay=function(resolveValue,timeout){if(timeout===undefined){timeout=resolveValue;resolveValue=undefined}return this.resolve(resolveValue).delay(timeout)};Promise.prototype["finally"]=function(fn){var noop=function(){};var fnAsPromise=new Promise(function(resolve){var val;try{val=fn()}finally{resolve(val)}}).then(noop,noop);return this.then(function(value){return fnAsPromise.then(function(){return value})},function(reason){return fnAsPromise.then(function(){throw reason})})};Promise.prototype.reflect=function(){return this.then(function(value){return createInspectionObject(true,value)},function(reason){return createInspectionObject(false,reason)})};Promise.settleAll=function(array){var values=Array.isArray(array)?array:[array];return this.all(values.map(function(value){return Promise.resolve(value).reflect()}))};Promise.prototype.done=function(){this.catch(function(error){setImmediate(function(){throw error})})};return Promise}function delegateToInstance(decorator,methods){"use strict";methods.forEach(function(method){decorator.prototype[method]=function(){var ins=this.__instance;var promise=ins[method].apply(ins,convertToArray(arguments));return decorator.resolve(promise)}})}function delegateToStatic(decorator,delegate,methods){"use strict";methods.forEach(function(method){decorator[method]=function(){var promise=delegate[method].apply(delegate,convertToArray(arguments));return decorator.resolve(promise)}})}function decorate(promiseFunc){"use strict";var PromiseExtensions=function PromiseExtensions(executor){var promise=new promiseFunc(executor);Object.defineProperty(this,"__instance",{value:promise})};PromiseExtensions.resolve=function resolve(msg){var Constructor=this;if(msg&&msg.__instance&&typeof msg.__instance==="object"){return msg}return new Constructor(function(resolve){resolve(msg)})};delegateToStatic(PromiseExtensions,promiseFunc,["all","reject","race"]);delegateToInstance(PromiseExtensions,["then","catch"]);return applyExtensions(PromiseExtensions)}module.exports=function(promiseImpl){"use strict";var Promise=promiseImpl||global.Promise;if(!Promise){throw new Error("No Promise implementation found.")}if(typeof Promise!=="function"){throw new TypeError("Not supported. The argument provided is not a constructor.")}return decorate(Promise)}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],195:[function(require,module,exports){"use strict";var util=require("../util/util");var loggerFactory=require("../util/logger-factory");var bunyan=require("browser-bunyan");var defaultWidgetModel=require("./default-widget-model");var ConfigAggregator=function(){this.log=loggerFactory.getLogger()};ConfigAggregator.prototype.combine=function(models){var log=this.log;var combinedModel=util.cloneDeep(defaultWidgetModel);models.forEach(function(model){util.merge(combinedModel,util.omit(model,["preferences","viewmodes"]));if(model.viewmodes){combinedModel.viewmodes=model.viewmodes}if(model.preferences){combinedModel.preferences=model.preferences}});log.debug("Aggregated model created.");if(log.level()<=bunyan.TRACE){log.trace("Aggregated model is this:\n %s",JSON.stringify(combinedModel,null,"	"))}return combinedModel};module.exports=ConfigAggregator},{"../util/logger-factory":248,"../util/util":250,"./default-widget-model":198,"browser-bunyan":2}],196:[function(require,module,exports){"use strict";var ConfigParser=function(opts){};ConfigParser.prototype.parse=function(configText){throw new Error("ConfigParser#parse must be overridden.")};module.exports=ConfigParser},{}],197:[function(require,module,exports){"use strict";var ConfigReader=function(opts){};ConfigReader.prototype.read=function(location){throw new Error("ConfigReader#read must be overridden.")};module.exports=ConfigReader},{}],198:[function(require,module,exports){"use strict";var widgetModel={id:null,version:null,height:null,width:null,viewmodes:[],name:null,shortName:null,description:null,author:null,authorHref:null,authorEmail:null,preferences:{},license:null,licenseHref:null,icons:[],content:{src:"index.html",type:"text/html",encoding:"UTF-8"},features:[]};module.exports=widgetModel},{}],199:[function(require,module,exports){"use strict";var ExtPromise=require("promise-extensions")(Promise);var util=require("../util/util");var loggerFactory=require("../util/logger-factory");var WidgetRenderer=require("./widget-renderer");var ConfigReader=require("./config-reader");var ConfigParser=require("./config-parser");var WidgetStorage=require("./widget-storage");var WidgetInstanceFactory=require("./widget-instance-factory");var WidgetFeatureAugmenter=require("./widget-feature-augmenter");var ConfigAggregator=require("./config-aggregator");var VError=require("../util/verror");var DestroyEvent=require("../events/destroy-event");var CONFIG_FILE_NAME="model.xml";var pluginPhases={POST_READ:"postRead",PRE_RENDER:"preRender",POST_RENDER:"postRender"};var mimeTypes={html:"text/html",hbs:"text/x-handlebars-template",handlebars:"text/x-handlebars-template","hbs.js":"application/x-handlebars-template"};var WidgetEngine=function(config){this.config=config;this.plugins=[];this.features=[];this.widgetInstanceFactory=new WidgetInstanceFactory;this.widgetFeatureAugmenter=new WidgetFeatureAugmenter;this._widgetInstance=null;this.log=loggerFactory.getLogger();var failureMessages=validateConfig(this.config);if(failureMessages.warnings.length){this.log.debug(failureMessages.warnings.join("\n"))}if(failureMessages.errors.length){var message="Problems with widget config:\n	"+failureMessages.errors.join("	\n");throw new VError(message)}};WidgetEngine.prototype.start=function(){var startTime=(new Date).getTime();var log=this.log;var config=this.config;var plugins=this.plugins;var features=this.features;var initialModel=config.initialModel||{};var widgetPath=config.widgetPath;var configFile=config.configFile||CONFIG_FILE_NAME;if(widgetPath===""){widgetPath="."}var widgetInstanceFactory=this.widgetInstanceFactory;var widgetFeatureAugmenter=this.widgetFeatureAugmenter;log.info("Starting widget @ %s...",widgetPath);log.info("Entering READ phase.");var result=Promise.resolve({});if(config.reader){result=result.then(function(){var resolvedConfigFile=(util.endsWith(widgetPath,"/")?widgetPath:widgetPath+"/")+configFile;return config.reader.read(resolvedConfigFile)})}if(config.parser){result=result.then(function(configText){return config.parser.parse(configText)})}return ExtPromise.all([initialModel,result]).then(function aggregateModels(configModels){log.debug("Aggregating models...");var configAggregator=new ConfigAggregator({log:log});return configAggregator.combine(configModels)}).then(function postRead(widgetModel){log.info("Invoking plugins for POST READ phase...");return invokePluginsForPhase(plugins,log,pluginPhases.POST_READ,[widgetModel])}).spread(function createInstance(widgetModel){if(!widgetModel.content.type||widgetModel.content.type===mimeTypes.html){widgetModel.content.type=guessContentType(widgetModel);log.debug("The start file type was inferred as [%s]",widgetModel.content.type)}widgetModel.content.src=WidgetRenderer.getResolvedStartFilePath(widgetPath,widgetModel);log.info("Widget config read for: %s (%s).",widgetModel.id,widgetModel.name);log.info("Entering INSTANCE CREATION phase...");var renderer=config.renderer;var storage=config.storage;widgetModel.id=widgetModel.id||util.randomId();storage.init(widgetModel.name,widgetModel.preferences,widgetModel.type);log.debug("Widget storage initialized.");var widgetInstance=widgetInstanceFactory.makeWidget(widgetModel,storage,renderer,widgetPath);log.debug("Widget instance created.");widgetFeatureAugmenter.addFeaturesToWidget(widgetInstance,features,widgetModel);log.debug("%s feature(s) added to widget.",features.length);return[widgetInstance,renderer,widgetModel]}).spread(function preRender(widgetInstance,renderer,widgetModel){log.info("Invoking plugins for PRE RENDER phase...");var widgetPluginPromises=invokePluginsForPhase(plugins,log,pluginPhases.PRE_RENDER,[widgetInstance,renderer,widgetModel]);return widgetPluginPromises}).spread(function render(widgetInstance,renderer,widgetModel){log.info("Entering RENDERING phase...");var renderingPromise=renderer.render(widgetModel,widgetInstance);return[widgetInstance,renderer,widgetModel,renderingPromise]}).spread(function postRender(widgetInstance,renderer,widgetModel){log.info("Invoking plugins for POST RENDER phase...");var widgetPluginPromises=invokePluginsForPhase(plugins,log,pluginPhases.POST_RENDER,[widgetInstance,renderer,widgetModel]);return widgetPluginPromises}).spread(function renderingComplete(widgetInstance,renderer,widgetModel){this._widgetInstance=widgetInstance;var details={};var endTime=(new Date).getTime();details.time=endTime-startTime;details.id=widgetModel.id;details.message="Widget rendering for ["+widgetModel.name+"] completed in "+details.time+"ms.";details.areaNodes=typeof renderer.getAreaNodes==="function"?renderer.getAreaNodes():null;log.info(details.message);return details}.bind(this)).catch(function(e){log.error(e);throw new VError(e,"An error occurred whilst starting the widget")})};WidgetEngine.prototype.addFeature=function(feature){this.log.info("Adding feature for widget, %s",feature.name||"[Anonymous feature]");if(typeof feature==="object"){this.features.push(feature)}return this};WidgetEngine.prototype.addPlugin=function(plugin){this.log.info("Adding plugin for widget, %s",plugin.name||"[Anonymous plugin]");if(typeof plugin==="object"){this.plugins.push(plugin)}return this};WidgetEngine.prototype.destroy=function(){var widgetInstance=this._widgetInstance;if(widgetInstance&&widgetInstance.dispatchEvent){var destroyEvent=new DestroyEvent;this._widgetInstance.dispatchEvent(destroyEvent);this._widgetInstance=null}this.plugins.forEach(function(plugin){if(typeof plugin.destroy==="function"){plugin.destroy()}});this.config.renderer.destroy()};var validateConfig=function(config){var messages={warnings:[],errors:[]};if(typeof config.widgetPath!=="string"){messages.errors.push("You must supply a valid widget path")}else if(config.widgetPath.indexOf(CONFIG_FILE_NAME)>=0){messages.errors.push("Please supply the base path of your widget, not its configuration file path")}if(!config.initialModel&&!config.reader){messages.warnings.push("No initial model or widget reader was provided. Can't get any config")}if(config.reader&&!config.parser){messages.warnings.push("A widget reader was provided, but not a widget config parser")}if(config.reader&&!(config.reader instanceof ConfigReader)){messages.warnings.push("The configured widget reader might not be a valid ConfigReader instance")}if(config.parser&&!(config.parser instanceof ConfigParser)){messages.warnings.push("The configured widget parser might not be a valid ConfigParser instance")}if(!config.storage){messages.errors.push("No widget storage is configured")}else if(!(config.storage instanceof WidgetStorage)){messages.warnings.push("The configured widget storage might not be a valid WidgetStorage instance")}if(!config.renderer){messages.errors.push("No widget renderer is configured")}else if(!(config.renderer instanceof WidgetRenderer)){messages.warnings.push("The configured widget renderer might not be a valid WidgetRenderer instance")}return messages};var invokePluginsForPhase=function(plugins,log,phase,pluginArgs){var result=ExtPromise.all(pluginArgs);plugins.filter(function(plugin){return typeof plugin[phase]==="function"}).forEach(function(plugin){var pluginName=plugin.name||"Anonymous plugin";var lastArgs;result=result.then(function(args){lastArgs=args;var promise=plugin[phase].apply(plugin,args);return[promise,args]}).spread(function(pluginReturnValue,args){return pluginReturnValue===undefined?args:[pluginReturnValue].concat(args.slice(1));
}).catch(function(e){var message="Failed to invoke plugin ["+pluginName+"] for ["+phase+"]";log.error(e,message);return lastArgs})});return result};var guessContentType=function(widgetModel){var results=widgetModel.content.src.match(/\.([A-z0-9]+)$/);return results&&results[1]&&mimeTypes[results[1]]||widgetModel.content.type};module.exports=WidgetEngine},{"../events/destroy-event":210,"../util/logger-factory":248,"../util/util":250,"../util/verror":251,"./config-aggregator":195,"./config-parser":196,"./config-reader":197,"./widget-feature-augmenter":200,"./widget-instance-factory":201,"./widget-renderer":202,"./widget-storage":203,"promise-extensions":194}],200:[function(require,module,exports){"use strict";var WidgetFeatureAugmenter=function(){};WidgetFeatureAugmenter.prototype.addFeaturesToWidget=function(widgetInstance,featureInstances,widgetModel){featureInstances=featureInstances||[];function findFeatureInstance(featureName,featureInstances){return featureInstances.filter(function(featureInstance){return featureInstance.name===featureName})[0]||null}function findFeatureConfig(featureName,widgetModel){return widgetModel.features.filter(function(featureConfig){return featureConfig.name===featureName})[0]||null}widgetModel.features=widgetModel.features||[];featureInstances.forEach(function(featureInstance){if(featureInstance.name&&!findFeatureConfig(featureInstance.name,widgetModel)){widgetModel.features.push({name:featureInstance.name,params:[],required:false})}});var featureMap={};for(var i=0;i<widgetModel.features.length;i++){var featureConfig=widgetModel.features[i];var instance=findFeatureInstance(featureConfig.name,featureInstances);if(instance){if(typeof instance._init==="function"){instance._init(featureConfig.params,widgetInstance,widgetModel)}Object.defineProperty(featureMap,instance.name,{enumerable:true,value:instance})}else if(featureConfig.required){var message="Unable to render widget. A required feature is not available ("+featureConfig.name+")";throw new Error(message)}}Object.defineProperty(widgetInstance,"features",{enumerable:false,value:featureMap});return widgetInstance};module.exports=WidgetFeatureAugmenter},{}],201:[function(require,module,exports){"use strict";var util=require("../util/util");var STRING_PROPS=["author","version","id","authorEmail","authorHref","locale"];var LOCALIZABLE_STRING_PROPS=["description","name","shortName"];var WidgetInstanceFactory=function(){};WidgetInstanceFactory.prototype.makeWidget=function(widgetModel,storage,renderer,widgetPath){var widget={};var locale=widgetModel.locale||null;Object.defineProperty(widget,"baseURI",{enumerable:true,value:widgetPath});STRING_PROPS.forEach(function(propName){Object.defineProperty(widget,propName,{enumerable:true,value:typeof widgetModel[propName]!=="undefined"?widgetModel[propName]:""})});LOCALIZABLE_STRING_PROPS.forEach(function(propName){var value=null;if(locale&&widgetModel._lang){var possibleLocales=util.getDescendantLocales(locale);var localizedWidgetModels=possibleLocales.map(function(possibleLocale){return widgetModel._lang[possibleLocale]});var getValueFromLocalizedWidgetModels=function(localizedWidgetModels){var value;if(localizedWidgetModels.length){var model=localizedWidgetModels.pop();if(model){value=model[propName]}if(typeof value!=="string"){return getValueFromLocalizedWidgetModels(localizedWidgetModels)}}return value};value=getValueFromLocalizedWidgetModels(localizedWidgetModels)}if(typeof value!=="string"&&typeof widgetModel[propName]==="string"){value=widgetModel[propName]}else if(typeof value!=="string"&&widgetModel.defaultlocale){var defaultLocalizedWidgetModel=widgetModel._lang[widgetModel.defaultlocale];if(defaultLocalizedWidgetModel){value=defaultLocalizedWidgetModel[propName]}}Object.defineProperty(widget,propName,{enumerable:true,value:typeof value==="string"?value:""})});Object.defineProperty(widget,"width",{enumerable:true,get:function(){return renderer.getWidth()}});Object.defineProperty(widget,"height",{enumerable:true,get:function(){return renderer.getHeight()}});Object.defineProperty(widget,"preferences",{enumerable:false,value:storage});return widget};module.exports=WidgetInstanceFactory},{"../util/util":250}],202:[function(require,module,exports){"use strict";var util=require("../util/util");var WidgetRenderer=function(opts){};WidgetRenderer.prototype.render=function(widgetModel,widgetInstance){throw new Error("WidgetRenderer#render must be overridden.")};WidgetRenderer.prototype.process=function(widgetModel,widgetInstance,startFileContent){throw new Error("WidgetRenderer#process must be overridden.")};WidgetRenderer.prototype.getWidth=function(){throw new Error("WidgetRenderer#getWidth must be overridden.")};WidgetRenderer.prototype.getHeight=function(){throw new Error("WidgetRenderer#getHeight must be overridden.")};WidgetRenderer.prototype.getWidgetNode=function(){throw new Error("WidgetRenderer#getWidgetNode must be overridden.")};WidgetRenderer.prototype.getParentNode=function(){throw new Error("WidgetRenderer#getContainerNode must be overridden.")};WidgetRenderer.prototype.setParentNode=function(){throw new Error("WidgetRenderer#setContainerNode must be overridden.")};WidgetRenderer.prototype.getAreaNodes=function(){if(this.isContainer){throw new Error("WidgetRenderer#getAreaNodes must be overridden.")}};WidgetRenderer.prototype.destroy=function(){throw new Error("WidgetRenderer#destroy must be overriden.")};WidgetRenderer.prototype.isRendered=function(){throw new Error("WidgetRenderer#isRendered must be overridden.")};WidgetRenderer.prototype.getType=function(){return"text/html"};WidgetRenderer.getResolvedStartFilePath=function(widgetPath,widgetModel){var startFileName=widgetModel.content&&widgetModel.content.src?widgetModel.content.src:"index.html";return makeFullPath(widgetPath,startFileName)};function makeFullPath(widgetPath,startFile){var noResolve=util.isUrlAbsolute(startFile)||util.isUrlSiteRelative(widgetPath)&&util.isUrlSiteRelative(startFile)||widgetPath&&util.startsWith(startFile,widgetPath);if(noResolve){return startFile}else{var joinWithSlash=!util.endsWith(widgetPath,"/")&&!util.startsWith(startFile,"/");return joinWithSlash?widgetPath+"/"+startFile:widgetPath+startFile}}module.exports=WidgetRenderer},{"../util/util":250}],203:[function(require,module,exports){"use strict";function WidgetStorage(storage){}WidgetStorage.prototype.init=function(widgetInstanceId,preferences){throw new Error("WidgetStorage#init must be overridden.")};WidgetStorage.prototype.getItem=function(key){throw new Error("WidgetStorage#getItem must be overridden.")};WidgetStorage.prototype.setItem=function(key,value,readonly){throw new Error("WidgetStorage#setItem must be overridden.")};WidgetStorage.prototype.removeItem=function(key){throw new Error("WidgetStorage#removeItem must be overridden.")};WidgetStorage.prototype.clear=function(key){throw new Error("WidgetStorage#removeItem must be overridden.")};WidgetStorage.prototype.key=function(n){throw new Error("WidgetStorage#key must be overridden.")};module.exports=WidgetStorage},{}],204:[function(require,module,exports){"use strict";module.exports=DatasourceResolverFactory;function DatasourceResolverFactory(){this._resolvers=[]}DatasourceResolverFactory.prototype.addResolver=function addResolver(resolverFunc){if(typeof resolverFunc!=="function"){throw new TypeError("resolverFunc argument must be a function")}this._resolvers.push(resolverFunc)};DatasourceResolverFactory.prototype.getResolver=function getResolver(datasource){var suitableResolvers=this._resolvers.map(function(resolverFunc){return resolverFunc(datasource)}).filter(function(resolver){return!!resolver});var len=suitableResolvers.length;if(len===0){throw new Error("No datasource resolver found which can handle ["+datasource.uri+"] URI")}return suitableResolvers[len-1]}},{}],205:[function(require,module,exports){(function(global){"use strict";var EXPRESSION_TOKENIZER=/\$\{([^}\s]+)}/g;var SLASHES_REGEXP=/^\/+|\/+$/g;function resolveExpression(context,templateString){if(!templateString){return""}return templateString.replace(EXPRESSION_TOKENIZER,function(token,content){var replaceValue=resolveValue(context,content);return replaceValue===undefined||replaceValue===null?"":replaceValue})}function resolveValue(obj,path){var fields=typeof path==="string"?path.split("."):path;var index=0;var value=obj;var length=fields.length;while(value!=null&&index<length){value=value[fields[index++]]}return index&&index===length?value:undefined}function encodeURIComponent(str){var decodedStr=str;try{decodedStr=global.decodeURIComponent(str)}catch(err){}return global.encodeURIComponent(decodedStr)}function trimSlashes(source){return source.trim().replace(SLASHES_REGEXP,"")}function resolveParameter(context,parameter){var param=parameter||{};var value=param.value;return{name:resolveExpression(context,param.name),value:typeof value==="string"?resolveExpression(context,value):value}}function buildQueryString(params){return(params||[]).map(function(param){return encodeURIComponent(param.name)+"="+encodeURIComponent(param.value)}).join("&")}function resolveQueryString(context,params){var resolvedParams=(params||[]).map(function(param){return resolveParameter(context,param)}).filter(function(param){return!!param.name});return buildQueryString(resolvedParams)}module.exports={resolveExpression:resolveExpression,resolveParameter:resolveParameter,buildQueryString:buildQueryString,resolveQueryString:resolveQueryString,encodeURIComponent:encodeURIComponent,trimSlashes:trimSlashes}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],206:[function(require,module,exports){"use strict";var loggerFactory=require("../util/logger-factory");var fetch=require("../fetch/filtering-fetch");var responseHelpers=require("../util/response-helpers");function defaultTestFunc(schema,datasource){var uri=datasource&&datasource.uri;return uri&&uri.slice(0,schema.length).toLowerCase()===schema}function getPreferenceValue(preferences,preferenceName){var preference=preferences[preferenceName];return preference?preference.value:null}module.exports=DatasourceResolver;function DatasourceResolver(strategy){this._resolverImpl=strategy;var parentLog=loggerFactory.getLogger();this._log=parentLog.child({childName:"datasource-resolver"})}DatasourceResolver.prototype.loadData=function(context){var resolver=this._resolverImpl;var url=resolver.resolveUrl(context);var preferences=context.preferences||{};var locale=getPreferenceValue(preferences,"locale");var requestHeaders={"Cache-control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"};if(locale){requestHeaders["Accept-Language"]=locale}return fetch(url,{headers:requestHeaders}).then(function(response){return responseHelpers.isResponseOk(response)?Promise.resolve(response):Promise.reject(responseHelpers.createError(response))}).then(function(response){return resolver.processResponse(response,context)})};DatasourceResolver.createFactoryFunction=function factoryFunc(datasourceSchema,Resolver){var log=this._log;var testFunc=typeof datasourceSchema==="function"?datasourceSchema:defaultTestFunc.bind(null,datasourceSchema);return function(datasource){if(testFunc(datasource)){var resolverImpl=new Resolver(datasource,log);return new DatasourceResolver(resolverImpl)}}}},{"../fetch/filtering-fetch":214,"../util/logger-factory":248,"../util/response-helpers":249}],207:[function(require,module,exports){"use strict";var eventWrapper=require("./event-wrapper");var helpers=require("./helpers");var createEventWrapper=eventWrapper.createEventWrapper;var STOP_IMMEDIATE_PROPAGATION_FLAG=eventWrapper.STOP_IMMEDIATE_PROPAGATION_FLAG;var PASSIVE_LISTENER_FLAG=eventWrapper.PASSIVE_LISTENER_FLAG;var PREFIX="@@";function on(self,type,listener,options){var handlerFunc=helpers.normalizeListener(listener);if(!handlerFunc){throw new TypeError('Unrecognized "listener" argument. It must be a function or an object with handleEvent method.')}var opts=helpers.normalizeOptions(options);var handlers;if(Object.prototype.hasOwnProperty.call(self,type)){handlers=self[type]}else{handlers=[];Object.defineProperty(self,type,{writable:true,configurable:true,value:handlers})}var handlerExists=handlers.some(function(handler){return handler.func===handlerFunc&&handler.opts.capture===opts.capture});if(!handlerExists){handlers.push({func:handlerFunc,opts:opts})}}function off(self,type,listener,options){var handlerFunc=helpers.normalizeListener(listener);if(!handlerFunc){throw new TypeError('Unrecognized "listener" argument. It must be a function or an object with handleEvent method.')}var opts=helpers.normalizeOptions(options);if(Object.prototype.hasOwnProperty.call(self,type)){var handlers=self[type]=self[type].filter(function(handler){return handler.func!==handlerFunc||handler.opts.capture!==opts.capture});if(handlers.length===0){delete self[type]}}}function dispatch(self,type,ev){if(!Object.prototype.hasOwnProperty.call(self,type)){return true}var handlers=self[type];var wrappedEv=createEventWrapper(ev,self);var returnValue=handlers.filter(function(handler){return!handler.opts.capture}).reduce(function(acc,handler){if(wrappedEv[STOP_IMMEDIATE_PROPAGATION_FLAG]){return acc}wrappedEv[PASSIVE_LISTENER_FLAG]=handler.opts.passive;handler.func.call(self,wrappedEv);if(handler.opts.once){handler.remove=true}return!wrappedEv.defaultPrevented},true);handlers=self[type]=handlers.filter(function(handler){return!handler.remove});if(handlers.length===0){delete self[type]}return returnValue}module.exports=Object.create(Object.prototype,{addEventListener:{value:function addEventListener(type,listener,options){if(helpers.isEmpty(type)){throw TypeError("Type argument cannot be empty")}if(typeof listener==="undefined"){throw TypeError("Listener argument is required")}on(this,PREFIX+type,listener,options)}},removeEventListener:{value:function removeEventListener(type,listener,options){if(helpers.isEmpty(type)){throw TypeError("Type argument cannot be empty")}if(typeof listener==="undefined"){throw TypeError("Listener argument is required")}off(this,PREFIX+type,listener,options)}},dispatchEvent:{value:function dispatchEvent(event){if(!helpers.isObject(event)){throw new TypeError("Event argument is not an object")}if(helpers.isEmpty(event.type)){throw new TypeError('Event object must have non-empty "type" property')}return dispatch(this,PREFIX+event.type,event)}}})},{"./event-wrapper":208,"./helpers":209}],208:[function(require,module,exports){"use strict";var STOP_IMMEDIATE_PROPAGATION_FLAG="__STOP_IP";var CANCELED_FLAG="__CANCELED";var PASSIVE_LISTENER_FLAG="__PASSIVE_LISTENER";var ORIGINAL_EVENT="__ORIG_EVENT";var wrapperPrototypeDefinition={stopPropagation:{value:function stopPropagation(){var e=this[ORIGINAL_EVENT];if(typeof e.stopPropagation==="function"){e.stopPropagation()}},writable:true,configurable:true},stopImmediatePropagation:{value:function stopImmediatePropagation(){this[STOP_IMMEDIATE_PROPAGATION_FLAG]=true;var e=this[ORIGINAL_EVENT];if(typeof e.stopImmediatePropagation==="function"){e.stopImmediatePropagation()}},writable:true,configurable:true},preventDefault:{value:function preventDefault(){if(this[PASSIVE_LISTENER_FLAG]){return}if(this.cancelable===true){this[CANCELED_FLAG]=true}var e=this[ORIGINAL_EVENT];if(typeof e.preventDefault==="function"){e.preventDefault()}},writable:true,configurable:true},defaultPrevented:{get:function defaultPrevented(){return this[CANCELED_FLAG]},enumerable:true,configurable:true}};module.exports.STOP_IMMEDIATE_PROPAGATION_FLAG=STOP_IMMEDIATE_PROPAGATION_FLAG;module.exports.PASSIVE_LISTENER_FLAG=PASSIVE_LISTENER_FLAG;module.exports.createEventWrapper=function createEventWrapper(event,eventTarget){var timeStamp=typeof event.timeStamp==="number"?event.timeStamp:Date.now();var propertyDefinition={target:{value:eventTarget},currentTarget:{value:eventTarget},eventPhase:{value:2},bubbles:{value:event.bubbles===true},cancelable:{value:event.cancelable===true},timeStamp:{value:timeStamp},isTrusted:{value:false,enumerable:true}};propertyDefinition[STOP_IMMEDIATE_PROPAGATION_FLAG]={value:false,writable:true};propertyDefinition[CANCELED_FLAG]={value:false,writable:true};propertyDefinition[PASSIVE_LISTENER_FLAG]={value:false,writable:true};propertyDefinition[ORIGINAL_EVENT]={value:event};return Object.create(Object.create(event,wrapperPrototypeDefinition),propertyDefinition)}},{}],209:[function(require,module,exports){"use strict";function isObject(value){return value!==null&&typeof value==="object"}function isEmpty(value){return typeof value==="undefined"||value===null||value===""}function normalizeListener(listener){var handler=typeof listener==="function"?listener:null;if(isObject(listener)&&typeof listener.handleEvent==="function"){handler=listener.handleEvent}return handler}function normalizeOptions(options){var opts={capture:false,passive:false,once:false};if(typeof options==="boolean"){opts.capture=options===true}else if(isObject(options)){opts.capture=options.capture===true;opts.passive=options.passive===true;opts.once=options.once===true}return opts}module.exports={isEmpty:isEmpty,isObject:isObject,normalizeListener:normalizeListener,normalizeOptions:normalizeOptions}},{}],210:[function(require,module,exports){(function(global){"use strict";function DestroyEvent(eventInit){var eventType="destroy";if(typeof global.Event==="function"){return new global.Event(eventType,eventInit)}else{var event=global.document.createEvent("Event");var opts=eventInit||{};event.initEvent(eventType,opts.bubbles===true,opts.cancelable===true);return event}}module.exports=DestroyEvent}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],211:[function(require,module,exports){"use strict";var util=require("../util/util");module.exports=function credentialsFilter(request){if(request.credentials!=="omit"){return request}var credentials=util.isRunningOnFilesystem()?"include":"same-origin";return new Request(request,{credentials:credentials})}},{"../util/util":250}],212:[function(require,module,exports){(function(global){"use strict";var loggerFactory=require("../util/logger-factory");var util=require("../util/util");var fetchFile=require("./fetch-file");var responseHelpers=require("../util/response-helpers");var EXPIRE_TIMESPAN=1e3;var fetchPromiseCache={};var log;function addToCache(key,item,ttl){var cacheItem=createCacheItem(item);fetchPromiseCache[key]=cacheItem;if(ttl>0){cacheItem.timeoutId=removeOnExpire(key,ttl)}}function getFromCache(key){var cacheItem=fetchPromiseCache[key];var value;if(cacheItem){cacheItem.setLastAccessedTime();value=cacheItem.value}return value}function removeOnExpire(key,ttl,expire){var timeout;if(typeof expire==="undefined"){timeout=ttl;log.debug("setting sliding expire handler to purge item [%s] in %sms",key,timeout)}else{timeout=expire;log.debug("%sms elapsed since last access to item [%s]. Extending expiration time by %sms",ttl-expire,key,timeout)}return setTimeout(function(){var cacheItem=fetchPromiseCache[key];if(!cacheItem){return}var elapsedTime=(new Date).getTime()-cacheItem.lastAccessed;if(elapsedTime>=ttl){log.debug("purging expired item [%s]",key);delete fetchPromiseCache[key]}else{cacheItem.timeoutId=removeOnExpire(key,ttl,ttl-elapsedTime)}},timeout)}function clearCache(){Object.keys(fetchPromiseCache).forEach(function(cacheKey){var timeoutId=fetchPromiseCache[cacheKey].timeoutId;if(typeof timeoutId!=="undefined"){clearTimeout(timeoutId)}delete fetchPromiseCache[cacheKey]})}function createCacheItem(value){var timestamp=(new Date).getTime();var cacheItem=Object.create(cacheItemProto);cacheItem.value=value;cacheItem.created=timestamp;cacheItem.lastAccessed=timestamp;return cacheItem}var cacheItemProto={setLastAccessedTime:function(){this.lastAccessed=(new Date).getTime()}};module.exports=function dedupingFetch(url,options){var resourceUrl=typeof url==="string"?url:url.url;var key=resourceUrl;var method=url.method||options&&options.method||"GET";var putInCache=typeof method==="string"&&method.toUpperCase()==="GET";if(!log){log=loggerFactory.getLogger()}if(!putInCache){clearCache()}var responsePromise=getFromCache(key);if(!responsePromise||!putInCache){log.debug("data from [%s] not found in cache. Requesting it from remote resource...",key);var fetchFunc=util.isUrlForFile(resourceUrl)?fetchFile:global.fetch;responsePromise=fetchFunc(url,options).then(function(response){var status=response.status;log.debug("response from [%s] received. Status: [%s]",key,status);if(!responseHelpers.isResponseOk(response)){var error=responseHelpers.createError(response);error._response=response;throw error}return response}).then(function(response){var promise=getFromCache(key);if(promise){log.debug("holding data from [%s] in cache for %sms",key,EXPIRE_TIMESPAN);addToCache(key,promise,EXPIRE_TIMESPAN)}return response}).catch(function(err){log.debug("removing data for [%s] from cache as the following error occurred: [%s]",key,err.message);delete fetchPromiseCache[key];if(err._response){return err._response}throw err});if(putInCache){addToCache(key,responsePromise)}}else{log.debug("returning data for [%s] from cache",key)}return responsePromise.then(function(response){return response.clone()})}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../util/logger-factory":248,"../util/response-helpers":249,"../util/util":250,"./fetch-file":213}],213:[function(require,module,exports){(function(global){"use strict";var CONTENT_TYPE_HEADER="Content-Type";module.exports=function fetchFile(url){return new Promise(function(resolve,reject){var resourceUrl=typeof url==="string"?url:url.url;var xhr=new global.XMLHttpRequest;xhr.onload=function(){var responseConfig={status:xhr.status===0?200:xhr.status};var contentType=xhr.getResponseHeader(CONTENT_TYPE_HEADER);if(contentType){responseConfig.headers={};responseConfig.headers[CONTENT_TYPE_HEADER]=contentType}resolve(new global.Response(xhr.responseText,responseConfig))};xhr.onerror=function(){reject(new Error("Local request failed for "+url))};xhr.open("GET",resourceUrl);xhr.send(null)})}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],214:[function(require,module,exports){"use strict";var fetch=require("./deduping-fetch");var credentialsFilter=require("./credentials-filter");var xsrfFilter=require("./xsrf-filter");var requestFilters=[credentialsFilter,xsrfFilter];function filteringFetch(url,options){var request=requestFilters.reduce(function(req,filter){return filter(req)||req},new Request(url,options));return fetch(request)}filteringFetch.addRequestFilter=function addRequestFilter(filter){if(typeof filter!=="function"){throw new TypeError("The filter argument must be a function")}requestFilters.push(filter);return function(){requestFilters=requestFilters.filter(function(requestFilter){return requestFilter!==filter})}};filteringFetch.clearRequestFilters=function clearRequestFilters(){requestFilters=[]};module.exports=filteringFetch},{"./credentials-filter":211,"./deduping-fetch":212,"./xsrf-filter":215}],215:[function(require,module,exports){"use strict";var COOKIE_NAME="XSRF-TOKEN";var HEADER_NAME="X-XSRF-TOKEN";var cookieRegex=new RegExp("(?:^|;\\s*)"+COOKIE_NAME+"=([^;]+)");function getTokenValue(){var cookieMatch=document.cookie.match(cookieRegex);return cookieMatch&&cookieMatch[1]||undefined}module.exports=function xsrfFilter(request){if(!request.headers.has(HEADER_NAME)&&request.method!=="GET"){var token=getTokenValue();if(token){request.headers.set(HEADER_NAME,token)}}return request}},{}],216:[function(require,module,exports){(function(global){"use strict";var WidgetEngine=require("./core/widget-engine");var AutoConfigParser=require("./strategies/parser/auto-config-parser");var FetchWidgetReader=require("./strategies/reader/fetch-widget-reader");var Html5SeamlessRenderer=require("./strategies/renderer/html5-seamless-renderer");var Html5LocalStorage=require("./strategies/storage/html5-local-storage");var HandlebarsPreprocessor=require("./strategies/renderer/preprocessors/handlebars-preprocessor");var DatasourceResolverFactory=require("./datasource/datasource-resolver-factory");var ResourceDatasourceResolver=require("./strategies/datasource/resource-datasource-resolver");var HttpDatasourceResolver=require("./strategies/datasource/http-datasource-resolver");var CxpAdditionsPlugin=require("./plugins/cxp-additions-plugin");var ReplaceConfigVarsPlugin=require("./plugins/replace-config-vars-plugin");var BackbaseFormatPlugin=require("./plugins/backbase-format-plugin");var loggerFactory=require("./util/logger-factory");var util=require("./util/util");var handlebarsPreprocessor=null;var getHandlebarsInstance=function(configVars){return handlebarsPreprocessor||(handlebarsPreprocessor=new HandlebarsPreprocessor(configVars))};var Html5WidgetEngine=function(opts){opts=opts||{};loggerFactory.createLogger({parentLog:opts.log,loggerName:"widget",logLevel:opts.logLevel,appendId:true})};Html5WidgetEngine.prototype.init=function(opts){opts=opts||{};var widgetPath=opts.widgetPath;var widgetEl=opts.widgetEl;var configVars=this.configVars=opts.configVars||{};var reader=opts.reader||(opts.initialModel?null:new FetchWidgetReader);var parser=opts.parser||new AutoConfigParser;var storage=opts.storage||new Html5LocalStorage;var renderer=opts.renderer;if(!renderer){var factory=new DatasourceResolverFactory;factory.addResolver(ResourceDatasourceResolver.getInstance);factory.addResolver(HttpDatasourceResolver.getInstance);this._datasourceResolverFactory=factory;renderer=new Html5SeamlessRenderer(widgetEl,factory,{configVars:configVars})}var confMsg;if(typeof widgetPath!=="string"){confMsg="You must provide a widget path"}else if(!widgetEl){confMsg="You must provide a widget parent node"}if(confMsg){throw new Error(confMsg)}var handlebarsPreprocessor=getHandlebarsInstance(configVars);renderer.addPreprocessor("text/x-handlebars-template",handlebarsPreprocessor);renderer.addPreprocessor("application/x-handlebars-template",handlebarsPreprocessor);this.widgetEngine=new WidgetEngine({configFile:opts.configFile,widgetPath:widgetPath,parser:parser,reader:reader,renderer:renderer,storage:storage,initialModel:opts.initialModel});this.widgetEngine.addPlugin(new CxpAdditionsPlugin);this.widgetEngine.addPlugin(new ReplaceConfigVarsPlugin({contextRoot:configVars.contextRoot,remoteContextRoot:configVars.remoteContextRoot||configVars.contextRoot,apiRoot:configVars.apiRoot,itemRoot:configVars.itemRoot||"",staticResourcesRoot:configVars.staticResourcesRoot},{full:!!configVars.fullConfigReplacement}));this.widgetEngine.addPlugin({name:"Angular JS",postRender:function(widgetInstance,widgetRenderer){var angular=global.angular;if(angular){var widgetNode=widgetRenderer.getWidgetNode();var angularModule=widgetNode.getAttribute("widget-ng-app")||widgetNode.getAttribute("data-widget-ng-app");if(angularModule){var strictDi=widgetNode.getAttribute("ng-strict-di")||widgetNode.getAttribute("data-ng-strict-di");angular.element(document).ready(function(){angular.module(angularModule).value("widget",widgetInstance);angular.bootstrap(widgetInstance.body,[angularModule],{strictDi:util.parseBoolean(strictDi)})})}}return widgetInstance}})};Html5WidgetEngine.prototype.enableCompatibility=function(){var configVars=this.configVars||{};var bbPluginOpts={apiRoot:configVars.apiRoot||"",contextRoot:configVars.contextRoot||"",remoteContextRoot:configVars.remoteContextRoot||""};this.widgetEngine.addPlugin(new BackbaseFormatPlugin(bbPluginOpts))};Html5WidgetEngine.prototype.start=function(){return this.widgetEngine.start()};Html5WidgetEngine.prototype.addPlugin=function(plugin){this.widgetEngine.addPlugin(plugin);return this};Html5WidgetEngine.prototype.addFeature=function(feature){this.widgetEngine.addFeature(feature);return this};Html5WidgetEngine.prototype.getLogger=function(){return this.log};Html5WidgetEngine.prototype.destroy=function(){return this.widgetEngine.destroy()};Html5WidgetEngine.prototype.addDatasourceResolver=function(resolverFunc){if(this._datasourceResolverFactory){this._datasourceResolverFactory.addResolver(resolverFunc);return this}else{throw new Error("This method cannot be called when custom renderer is provided")}};module.exports=Html5WidgetEngine}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./core/widget-engine":199,"./datasource/datasource-resolver-factory":204,"./plugins/backbase-format-plugin":217,"./plugins/cxp-additions-plugin":224,"./plugins/replace-config-vars-plugin":225,"./strategies/datasource/http-datasource-resolver":226,"./strategies/datasource/resource-datasource-resolver":227,"./strategies/parser/auto-config-parser":228,"./strategies/reader/fetch-widget-reader":238,"./strategies/renderer/html5-seamless-renderer":239,"./strategies/renderer/preprocessors/handlebars-preprocessor":240,"./strategies/storage/html5-local-storage":243,"./util/logger-factory":248,"./util/util":250}],217:[function(require,module,exports){"use strict";var loggerFactory=require("../util/logger-factory");var util=require("../util/util");var ExtPromise=require("promise-extensions")();var widgetHandlers=require("./backbase-format/widget-handlers");var legacyWidgetApi=require("./backbase-format/legacy-widget-api");var IncludeObject=require("./backbase-format/include-object");var convertToArray=Array.prototype.slice.call.bind(Array.prototype.slice);module.exports=BackbaseFormatPlugin;function BackbaseFormatPlugin(opts){opts=opts||{};this.opts=opts;this.name="Backbase Format";this.portalConf=opts.portalConf||{};this.window=typeof window==="undefined"?opts.window:window;this.log=loggerFactory.getLogger();this.opts.log=this.log}BackbaseFormatPlugin.prototype.preRender=function(widgetInstance,renderer,widgetModel){this.log.info("Backbase format plugin is running in PRE RENDER phase...");if(!widgetInstance.preferences.getItem("src")){widgetInstance.preferences.defineItem({name:"src",value:widgetModel.content.src,readonly:false})}if(!widgetInstance.preferences.getItem("thumbnailUrl")){widgetInstance.preferences.defineItem({name:"thumbnailUrl",value:widgetModel.icons[0],readonly:false})}if(!widgetInstance.preferences.getItem("title")){widgetInstance.preferences.defineItem({name:"title",value:widgetModel.title,readonly:false})}var bbWidgetInstance=legacyWidgetApi.buildWidget(widgetInstance,widgetModel,this.log,this.portalConf.tags);var index=bbWidgetInstance.preferences.eventTarget?bbWidgetInstance.preferences.eventTarget.indexOf(widgetInstance):-1;if(index>-1){bbWidgetInstance.preferences.eventTarget[index]=bbWidgetInstance}this.log.info("Backbase format plugin PRE RENDER done.");return bbWidgetInstance};BackbaseFormatPlugin.prototype.postRender=function(widgetInstance,renderer,widgetModel){var self=this;var log=this.log;var window=this.window;var chain;log.info("Backbase format plugin is running in POST RENDER phase...");legacyWidgetApi.applyPresentationApi(widgetInstance,renderer,widgetModel,log);var includeElements=convertToArray(widgetInstance.body.getElementsByTagName("g:include"));var includes=includeElements.filter(function(gInclude){return util.ensureElementBelongsToItem(widgetInstance.name,gInclude)}).map(function(gInclude){return new IncludeObject(gInclude,widgetInstance,widgetModel,self.opts)});if(includes.length){widgetInstance.includes=includes;widgetInstance.refreshIncludes=function refreshIncludes(){var resultPromises=this.includes.map(function(include){return include.refresh()});return ExtPromise.settleAll(resultPromises).then(function(inspections){var errorCount=inspections.filter(function(includePromiseInspection){return includePromiseInspection.isRejected()}).length;if(errorCount>0){log.warn("%s includes failed to resolve.",errorCount)}})};includes.forEach(function(include,i){
var gElement=includeElements[i];gElement.parentNode.replaceChild(include.htmlNode,gElement)});chain=widgetInstance.refreshIncludes()}else{chain=ExtPromise.resolve()}return chain.then(function(){var chromeNode=findChromeNode(widgetInstance.body)||widgetInstance.body;widgetHandlers.handleLoad(window,widgetInstance,log);widgetHandlers.handlePrefModified(window,widgetInstance,log);widgetHandlers.handleMaximize(window,widgetInstance,chromeNode,log);widgetHandlers.handleRestore(window,widgetInstance,chromeNode,log);log.info("Backbase format plugin POST RENDER done.");return widgetInstance})};function findChromeNode(element){var parent=element;while(parent){if(typeof parent.hasAttribute==="function"&&parent.hasAttribute("data-chrome")){return parent}parent=parent.parentNode}return null}},{"../util/logger-factory":248,"../util/util":250,"./backbase-format/include-object":219,"./backbase-format/legacy-widget-api":221,"./backbase-format/widget-handlers":223,"promise-extensions":194}],218:[function(require,module,exports){"use strict";var util=require("../../util/util");var convertToArray=Array.prototype.slice.call.bind(Array.prototype.slice);module.exports={getStartFileFolder:getStartFileFolder,makeReferenceAbsolute:makeRefAbsolute,resolveExpression:resolveExpression,isEmpty:isEmpty,convertToArray:convertToArray};function getStartFileFolder(startFile,contextRoot){var widgetPath=startFile.replace(/\/[^\/]+$/,"");widgetPath=widgetPath.replace(/\$\(contextRoot\)/,contextRoot);var startFilePath=util.isUrlAbsolute(startFile)?startFile:widgetPath+"/"+startFile;return startFilePath.substring(0,startFilePath.lastIndexOf("/")+1)}function makeRefAbsolute(html,remoteContextRoot){if(typeof DOMParser!=="undefined"){var parser=new DOMParser;var doc=parser.parseFromString(html,"text/html");var imgs=convertToArray(doc.getElementsByTagName("img"));imgs.forEach(function(img){var src=img.getAttribute("src");if(src&&util.isUrlSiteRelative(src)){src=new URL(src,remoteContextRoot).href;img.setAttribute("src",src)}});return doc.body.innerHTML}else{return html}}function resolveExpression(expression,context){var parts=expression.split(".");function doNextPart(parts,val){val=val[parts.shift()];if(parts.length>0&&val&&typeof val==="object"){return doNextPart(parts,val)}else{return val}}return doNextPart(parts,context)}function isEmpty(value){return value===undefined||value===null||value===""}},{"../../util/util":250}],219:[function(require,module,exports){(function(global){"use strict";var util=require("../../util/util");var bunyan=require("browser-bunyan");var helpers=require("./include-helpers");var ParameterBuilder=require("./include-param-builder");var fetch=require("../../fetch/filtering-fetch");var responseHelpers=require("../../util/response-helpers");var FormData=global.FormData;module.exports=IncludeObject;function IncludeObject(gIncludeNode,widget,widgetModel,opts){opts=opts||{};var contextRoot=opts.contextRoot||"";var remoteContextRoot=opts.remoteContextRoot||"";var localSource=gIncludeNode.getAttribute("local")==="true";var config={replaceRegex:/\$\{([a-zA-Z0-9-_.]+)\}/g,log:opts.log,startFileFolder:helpers.getStartFileFolder(widgetModel.content.src,contextRoot),contextRoot:localSource||!remoteContextRoot?contextRoot:remoteContextRoot};Object.defineProperty(this,"_config",{value:config});this.widget=widget;this.uri={template:gIncludeNode.getAttribute("src")};this.proxy=gIncludeNode.getAttribute("proxy")==="true";this.method=gIncludeNode.getAttribute("method")||"GET";var htmlNode=global.document.createElement("div");htmlNode.className="bp-g-include";this.htmlNode=htmlNode;var parameterBuilder=new ParameterBuilder(widgetModel,opts);this.params=parameterBuilder.buildParameters(this,gIncludeNode)}IncludeObject.prototype.setURI=function setUri(uri){if(uri&&typeof uri==="string"){this.uri.template=uri}};IncludeObject.prototype.getContentURI=function getContentURI(){var src=this.uri.template;if(!src){return""}var config=this._config;var self=this;src=src.replace(config.replaceRegex,function(match,p1){return self.widget.getPreference(p1)});src=src.replace("$(contextRoot)",config.contextRoot);if(util.isUrlDocumentRelative(src)){src=config.startFileFolder+src;config.log.debug("g:include src after resolution is [%s]",src)}return src};IncludeObject.prototype.refresh=function refresh(){var config=this._config;var log=config.log;var requestParams=this._getRequestParams();var requestUrl=this._resolveRequestUrl(requestParams);var requestOptions=this._getRequestOptions(requestParams);if(log.level()<=bunyan.DEBUG){var fetchOptsJson=JSON.stringify(requestOptions,null,"	");log.debug("Making g:include http request to [%s] with fetch opts: [%s]",requestUrl,fetchOptsJson)}return fetch(requestUrl,requestOptions).then(function(res){log.debug("g:include request to [%s] completed with status: %s",requestUrl,res.status);return responseHelpers.isResponseOk(res)?Promise.resolve(res.text()):Promise.reject(responseHelpers.createError(res))}).catch(function(err){return"Unable to resolve g:include ( "+err.message+" )"}).then(function(html){log.trace("Received html response:\n%s",html);if(util.isRunningOnFilesystem()&&util.isUrlAbsolute(config.contextRoot)){html=helpers.makeReferenceAbsolute(html,config.contextRoot)}this.htmlNode.innerHTML=html;this.htmlNode.setAttribute("data-src",requestUrl);return this.htmlNode}.bind(this))};IncludeObject.prototype._getRequestParams=function getRequestParams(){var requestParams=[];if(this.proxy){requestParams=this.params.filter(function(param){return param.destination==="proxy"});var contentUri=this.getContentURI();if(contentUri){var targetQueryParamsString=this.params.filter(function(param){return param.destination==="target"}).map(function(param){return param.toQueryString()}).filter(function(qStr){return!!qStr}).join("&");var urlParam={name:"url",getQueryParams:function(){return[{name:this.name,value:contentUri+(contentUri.indexOf("?")!==-1?"&":"?")+targetQueryParamsString}]},toQueryString:function(){var param=this.getQueryParams()[0];return param.name+"="+encodeURIComponent(param.value)}};requestParams.push(urlParam)}}else{requestParams=this.params.filter(function(param){return param.destination==="target"})}return requestParams};IncludeObject.prototype._resolveRequestUrl=function resolveRequestUrl(requestParams){var url=this.proxy?this._config.contextRoot+"/proxy":this.getContentURI();if(this.method&&this.method.toUpperCase()!=="POST"){var queryStr=requestParams.map(function(param){return param.toQueryString()}).join("&");url+=(url.indexOf("?")>=0?"&":"?")+queryStr}return url};IncludeObject.prototype._getRequestOptions=function(requestParams){var options={};if(this.method&&this.method.toUpperCase()==="POST"){options.method=this.method;options.body=this._constructFormData(requestParams)}return options};IncludeObject.prototype._constructFormData=function constructFormData(params){var formData=new FormData;params.reduce(function(acc,param){return acc.concat(param.getQueryParams())},[]).forEach(function(queryParam){formData.append(queryParam.name,queryParam.value)});return formData};["getContentIterator","hasContent","setContent"].forEach(function(method){IncludeObject.prototype[method]=function(){this._config.log.warn("%s method is no longer supported in CXP6",method)}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../fetch/filtering-fetch":214,"../../util/response-helpers":249,"../../util/util":250,"./include-helpers":218,"./include-param-builder":220,"browser-bunyan":2}],220:[function(require,module,exports){"use strict";var helpers=require("./include-helpers");module.exports=IncludeParameterBuilder;function IncludeParameterBuilder(widgetModel,opts){this._widgetModel=widgetModel;this._log=opts.log;this._remoteContextRoot=opts.remoteContextRoot||"";this._contextRoot=opts.contextRoot||"";this._apiRoot=opts.apiRoot||"";this._paramFactoryMap={"g:http-param":this._buildHttpParam,"g:http-proxy-param":this._buildHttpProxyParam,"g:http-preference-param":this._buildPreferenceParam,"g:http-preference-param-map":this._buildPreferenceParamMap}}IncludeParameterBuilder.prototype.buildParameters=function buildParameters(includeObject,gIncludeNode){var self=this;var params=this._flattenElementTree(gIncludeNode).filter(function(node){var nodeName=node.nodeName.toLowerCase();return nodeName in self._paramFactoryMap}).map(function(paramTag){var nodeName=paramTag.nodeName.toLowerCase();var parseFunc=self._paramFactoryMap[nodeName];return parseFunc.call(self,paramTag,includeObject)}).filter(function(param){return!!param});params.forEach(function(param){["getName","getValues"].forEach(function(method){param[method]=function(){this._log.warn("%s method is no longer supported in CXP6",method)}})});return params};IncludeParameterBuilder.prototype._flattenElementTree=function flattenElementTree(rootElement){var flatList=[];var currentNode=rootElement.firstChild;while(currentNode){if(currentNode.nodeType===1){flatList.push(currentNode)}currentNode=currentNode.hasChildNodes()?currentNode.firstChild:currentNode.nextSibling}return flatList};IncludeParameterBuilder.prototype._buildHttpParam=function buildHttpParam(paramTag,includeObj,isProxy){var contextRoot=this._remoteContextRoot||this._contextRoot;var param=new HttpParameter(paramTag,includeObj,this._log,isProxy,contextRoot,this._apiRoot);return param.value.template?param:null};IncludeParameterBuilder.prototype._buildHttpProxyParam=function buildHttpProxyParam(paramTag,includeObj){return this._buildHttpParam(paramTag,includeObj,true)};IncludeParameterBuilder.prototype._buildPreferenceParam=function buildPreferenceParam(paramTag,includeObj){var param=new PreferenceParameter(paramTag,includeObj,this._log);return param.name.template?param:null};IncludeParameterBuilder.prototype._buildPreferenceParamMap=function buildPrefParamMap(paramTag,includeObj){var param=new PreferenceMapParameter(paramTag,includeObj,this._log,this._widgetModel);return param._typeName?param:null};function IncludeParameter(paramTag,includeObject,log,destination){this.name={template:paramTag.getAttribute("name")};this.value={template:paramTag.getAttribute("value")};this.destination=destination||"target";this.method=(paramTag.getAttribute("method")||includeObject.method||"GET").toUpperCase();Object.defineProperty(this,"_include",{value:includeObject});Object.defineProperty(this,"_log",{value:log})}IncludeParameter.prototype.getQueryParams=function toQueryString(){return[]};IncludeParameter.prototype.toQueryString=function toQueryString(){return this.getQueryParams().map(function(param){return param.name+"="+encodeURIComponent(param.value)}).join("&")};function PreferenceMapParameter(paramTag,includeObject,log,widgetModel){IncludeParameter.call(this,paramTag,includeObject,log);var dataType=paramTag.getAttribute("dataType")||paramTag.getAttribute("datatype");Object.defineProperty(this,"_typeName",{value:dataType});var prefs=widgetModel.preferences||{};var prefsOfType=Object.keys(prefs).filter(function(prefName){return prefs[prefName].type===dataType});Object.defineProperty(this,"_prefs",{value:prefsOfType})}PreferenceMapParameter.prototype=Object.create(IncludeParameter.prototype);PreferenceMapParameter.prototype.getQueryParams=function(){var namespace=this._typeName;var self=this;return this._prefs.map(function(prefName){return{name:namespace+"."+prefName,value:self._include.widget.getPreference(prefName)}})};function PreferenceParameter(paramTag,includeObject,log){IncludeParameter.call(this,paramTag,includeObject,log)}PreferenceParameter.prototype=Object.create(IncludeParameter.prototype);PreferenceParameter.prototype.getQueryParams=function(){var name=this.name?this.name.template:null;if(helpers.isEmpty(name)){return[]}var value=this._include.widget.getPreference(name);if(helpers.isEmpty(value)){this._log.warn("Failed to resolve g:include parameter value. Parameter - [%s]",name)}return[{name:name,value:value}]};function HttpParameter(paramTag,includeObject,log,isProxy,contextRoot,apiRoot){var destination=isProxy?"proxy":"target";IncludeParameter.call(this,paramTag,includeObject,log,destination);Object.defineProperty(this,"_replaceRegex",{value:/\$\{([a-zA-Z0-9-_]+)\}/});Object.defineProperty(this,"_contextRoot",{value:contextRoot});Object.defineProperty(this,"_apiRoot",{value:apiRoot})}HttpParameter.prototype=Object.create(IncludeParameter.prototype);HttpParameter.prototype.getQueryParams=function(){var name=this.name?this.name.template:null;var value=this.value?this.value.template:null;var origValue=value;var widget=this._include.widget;var contextRoot=this._contextRoot;var apiRoot=this._apiRoot;if(helpers.isEmpty(name)||helpers.isEmpty(value)){return[]}value=value.replace(this._replaceRegex,function(match,p1){if(p1==="contextRoot"){return contextRoot}else if(p1==="apiRoot"){return apiRoot}else{return widget.getPreference(p1)}});if(value.indexOf("__WIDGET__")===0){var expression=value.split(".").filter(function(it,i){return i!==0}).join(".");value=helpers.resolveExpression(expression,widget);if(helpers.isEmpty(value)){this._log.warn("Failed to resolve g:include parameter value. Parameter - [%s], unresolved value - [%s], "+"resolved value - [%s]",name,origValue,value)}}return[{name:name,value:value}]}},{"./include-helpers":218}],221:[function(require,module,exports){(function(process,global){"use strict";var util=require("../../util/util");var EventTarget=require("../../event-target/event-target");var warnDeprecatedAccess=require("./warn-deprecated-access");var StorageEvent=require("../../strategies/storage/storage-event");function buildWidget(widget,widgetModel,log,tags){var WIDGET_TYPE="backbaseWidget";var bbWidgetInstance=util.cloneWidgetInstance(widget);bbWidgetInstance.id=widgetModel.id||Math.random().toString(36).substr(2,5);bbWidgetInstance.name=widgetModel.name;bbWidgetInstance.nodeType=1;bbWidgetInstance.nodeValue=WIDGET_TYPE;bbWidgetInstance.margins={top:0,right:0,bottom:0,left:0};Object.getOwnPropertyNames(widget).forEach(function(key){if(util.startsWith(key,"@@")){bbWidgetInstance[key]=widget[key]}});bbWidgetInstance.myDefinition={sUrl:widgetModel.content.src};bbWidgetInstance.nodeName=WIDGET_TYPE;bbWidgetInstance.tagName=WIDGET_TYPE;bbWidgetInstance.tags=Array.isArray(tags)?tags:[];bbWidgetInstance.model=createModel(bbWidgetInstance,widgetModel);warnDeprecatedAccess(bbWidgetInstance,log);setMethods(bbWidgetInstance);if(bbWidgetInstance.addEventListener&&bbWidgetInstance.dispatchEvent){bbWidgetInstance.addEventListener("storage",function(e){log.debug("Chaining StorageEvent to Backbase 'PrefModified' event...");var PREF_MODIFIED_EVENT="PrefModified";var chainedEvent=new StorageEvent(PREF_MODIFIED_EVENT);chainedEvent.initStorageEvent(PREF_MODIFIED_EVENT,false,false,e.key,e.oldValue,e.newValue,e.url,bbWidgetInstance.preferences);chainedEvent.attrName=e.key;chainedEvent.prevValue=e.oldValue;bbWidgetInstance.model.dispatchEvent(chainedEvent)})}return bbWidgetInstance}function applyDomRelatedApi(widget,renderer,widgetModel,log){var widgetNode=widget.body||renderer.getWidgetNode();var onloadAttr=widgetNode.getAttribute("g:onload");if(onloadAttr){var body=global.document.createElement("div");var widgetParent=widgetNode.parentNode;var widgetSibling=widgetNode.nextSibling;body.appendChild(widgetNode);body.className="bp-widget-body";if(widgetSibling){widgetParent.insertBefore(body,widgetSibling)}else{widgetParent.appendChild(body)}widget.body=body}widget.htmlNode=findChromeNode(widgetNode);widget.refreshHtml=function(){var cxpFeature=this.features&&this.features.cxp;if(cxpFeature){return cxpFeature.model.item(widgetModel.name,widgetModel.type).get().then(function(model){return cxpFeature.render.rerenderItem(model.id,model.name,model)})}else{log.warn('A widget is required to have "CXP" feature in order to be able to refresh its view.');return Promise.resolve()}}}function createModel(widget,widgetModel){var model={jxid:"VIEW-"+widgetModel.name,localName:"Widget",name:widgetModel.name,tag:"widget",tagName:"Widget",contextItemName:widget.features&&widget.features.cxp&&widget.features.cxp.config?widget.features.cxp.config.get("portalName"):null,extendedItemName:widgetModel.extendedItemName||null,parentItemName:widgetModel.parentItemName||null,securityProfile:widgetModel.securityProfile||null,uuid:widgetModel.id||null,preferences:makePreferences(widget.preferences),tags:Array.isArray(widgetModel.tags)?widgetModel.tags:[],addEventListener:EventTarget.addEventListener,removeEventListener:EventTarget.removeEventListener,dispatchEvent:EventTarget.dispatchEvent};model.save=function(callback){var self=this;process.nextTick(function(){if(typeof callback==="function"){var ctx={contextItemName:self.contextItemName,name:self.name,preferences:self.preferences,tag:self.tag};var mockXhr={status:204,statusText:"No Content",readyState:4};callback.call(global,ctx,mockXhr)}})};model.getPreference=function(key){return widget.preferences.getItem(key)};model.setPreference=function(key,value){widget.preferences.setItem(key,value)};return model}function setMethods(widget){widget.getPreference=function(key){return this.preferences.getItem(key)};widget.getPreferenceFromParents=widget.getPreference;widget.getAreaPreference=function(){return this.preferences.getItem("area")||0};widget.getOrderPreference=function(){return this.preferences.getItem("order")};widget.setPreference=function(key,value){this.preferences.setItem(key,value)};widget.getDefinition=function(){return widget.myDefinition};widget.setAreaPreference=function(area){this.preferences.setItem("area",area)};widget.setOrderPreference=function(order){this.preferences.setItem("order",order)}}function makePreferences(storage){return storage._items}function findChromeNode(element){var parent=element;while(parent){if(typeof parent.hasAttribute==="function"&&parent.hasAttribute("data-chrome")){return parent}parent=parent.parentNode}return null}module.exports={buildWidget:buildWidget,applyPresentationApi:applyDomRelatedApi}}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../event-target/event-target":207,"../../strategies/storage/storage-event":244,"../../util/util":250,"./warn-deprecated-access":222,_process:420}],222:[function(require,module,exports){"use strict";module.exports=warnDeprecatedPropertyAccess;var unsupportedProperties=["attributes","childNodes","cls_custom","cnBase","firstChild","flex","htmlArea","htmlDoc","htmlFoot","htmlHead","lastChild","layout","local_listeners","localName","namespaceURI","nextSibling","node","ownerDocument","parentNode","perspective","prefix","previousSiblings"];var unsupportedMethods=["appendChild","cloneNode","createDisplay","createPerspective","destroy","disableDesignMode","dragIsTarget","enableDesignMode","getAreaOrderedChildren","getAttribute","getAttributeNS","getClassID","getCurrentPerspective","getDisplay","getDisplayEventTarget","getDisplayModel","getElementsByTagName","getElementsByTagNameNS","getHTMLArea","hasAttribute","hasAttributeNS","hasAttributes","hasChildNodes","hideDesignTools","hideDragTargets","insertBefore","insertDisplayChild","loadChildren","lookupNamespaceURI","refreshIncludes","removeAttribute","removeAttributeNS","removeChild","renderDisplay","replaceChild","setAttribute","setAttributeNS","setCurrentPerspective","showDesignTools","showDragTargets","template"];function warnUnsupported(log,field,isMethod){return function(){var message="COMPATIBILITY: %s is a widget %s that is no longer supported in CXP6";log.warn(message,field,isMethod?"method":"property")}}function warnDeprecatedPropertyAccess(widgetInstance,log){var unsupportedPropertyDefinitions=unsupportedProperties.reduce(function(defs,field){defs[field]={enumerable:true,get:warnUnsupported(log,field),set:warnUnsupported(log,field)};return defs},{});Object.defineProperties(widgetInstance,unsupportedPropertyDefinitions);unsupportedMethods.reduce(function(instance,method){instance[method]=warnUnsupported(log,method,true);return instance},widgetInstance);return widgetInstance}},{}],223:[function(require,module,exports){"use strict";var util=require("../../util/util");module.exports={handleLoad:handleLoad,handleMaximize:handleMaximize,handleRestore:handleRestore,handlePrefModified:handlePrefModified};function handleLoad(window,widgetInstance,log){var event="onload";var gOnloadAttr=getEventAttribute(event,widgetInstance.body,widgetInstance.name);if(gOnloadAttr){executeScript(window,widgetInstance.id,gOnloadAttr,event,log)}}function handlePrefModified(window,widgetInstance,log){var event="onPrefModified";var gPrefModifiedAttr=getEventAttribute(event,widgetInstance.body,widgetInstance.name);if(gPrefModifiedAttr){widgetInstance.model.addEventListener("PrefModified",function(){executeScript(window,widgetInstance.id,gPrefModifiedAttr,event,log)})}}function handleMaximize(window,widgetInstance,chromeNode,log){var event="onmaximize";var gMaximizeAttr=getEventAttribute(event,widgetInstance.body,widgetInstance.name);if(gMaximizeAttr){chromeNode.addEventListener("click",function(ev){if(ev.target.getAttribute("data-cxp-viewmode")==="maximized"){executeScript(window,widgetInstance.id,gMaximizeAttr,event,log)}})}}function handleRestore(window,widgetInstance,chromeNode,log){var event="onrestore";var gRestoreAttr=getEventAttribute(event,widgetInstance.body,widgetInstance.name);if(gRestoreAttr){chromeNode.addEventListener("click",function(ev){if(ev.target.getAttribute("data-cxp-viewmode")==="windowed"){executeScript(window,widgetInstance.id,gRestoreAttr,event,log)}})}}function getEventAttribute(attrName,widgetBodyNode,itemName){var el=widgetBodyNode.querySelector("div[g\\:"+attrName+"]");if(el&&util.ensureElementBelongsToItem(itemName,el)){return el.getAttribute("g:"+attrName)}return null}function executeScript(window,widgetId,scriptText,eventName,log){try{log.debug("Executing g:%s script...",eventName);var widgetAccessor=window.cxp._widgets?"window.cxp._widgets['"+widgetId+"']":"window.widget";var script=scriptText.replace(/(__WIDGET__|__GADGET__)/,widgetAccessor);window.eval("(function() {"+script+"})()")}catch(err){var msgDetails=/is not defined$/.test(err.message)?"This maybe because in CXP6 functions in start files must be explicitly declared on the global scope":"";log.warn("g:%s failed! %s",eventName,msgDetails);log.error(err)}}},{"../../util/util":250}],224:[function(require,module,exports){"use strict";var EventTarget=require("../event-target/event-target");var CxpAdditionsPlugin=function(){this.name="CXP Additions Plugin"};CxpAdditionsPlugin.prototype.postRead=function(widgetModel){var preferences=widgetModel.preferences;if(Array.isArray(preferences)){widgetModel.preferences=preferences.reduce(function(acc,pref){acc[pref.name]=pref;return acc},{})}return widgetModel};CxpAdditionsPlugin.prototype.preRender=function(widgetInstance,renderer,widgetModel){if(widgetModel.type){Object.defineProperty(widgetInstance,"type",{value:widgetModel.type})}widgetInstance.addEventListener=EventTarget.addEventListener;widgetInstance.removeEventListener=EventTarget.removeEventListener;widgetInstance.dispatchEvent=EventTarget.dispatchEvent;var eventTarget=widgetInstance.preferences.eventTarget=widgetInstance.preferences.eventTarget||[];if(eventTarget.indexOf(widgetInstance)===-1){eventTarget.push(widgetInstance);widgetInstance.addEventListener("destroy",function(){var currentInstance=this;var prefs=currentInstance.preferences;prefs.eventTarget=prefs.eventTarget.filter(function(instance){return instance!==currentInstance})},{once:true})}return widgetInstance};module.exports=CxpAdditionsPlugin},{"../event-target/event-target":207}],225:[function(require,module,exports){"use strict";var loggerFactory=require("../util/logger-factory");var bunyan=require("browser-bunyan");var ReplaceConfigVarsPlugins=function(varMap,opts){opts=opts||{};this.name="Replace Config Vars";this.varMap=varMap;this.full=!!opts.full;this.interpolateStartRegex=opts.interpolateStartRegex||"\\$\\(";this.interpolateEndRegex=opts.interpolateEndRegex||"\\)";this.log=loggerFactory.getLogger()};ReplaceConfigVarsPlugins.prototype.postRead=function(widgetModel){var self=this;var log=this.log;log.info("Replace config vars plugin is running is POST READ phase...");var excludeObjects=this._getExcludeObjects(widgetModel);if(excludeObjects.length){excludeObjects.forEach(function(obj){obj.value=obj.value.replace("contextRoot","__contextRoot__")})}if(self.full){log.debug("Doing full config vars replacement...");self._traverse(widgetModel)}else{log.debug("Doing minimal config vars replacement...");if(widgetModel.content&&widgetModel.content.src){widgetModel.content.src=self._replaceVars("src",widgetModel.content.src)}if(widgetModel.content&&widgetModel.content.config){widgetModel.content.config=self._replaceVars("config",widgetModel.content.config)}if(widgetModel.icons){widgetModel.icons.forEach(function(icon,index,icons){icons[index]=self._replaceVars("icons["+index+"]",icon)})}var messages=widgetModel.preferences.messages;if(messages){messages.value=self._replaceVars("messages",messages.value)}var options=widgetModel.preferences.options;if(options){options.value=self._replaceVars("options",options.value)}if(widgetModel.datasources){self._traverse(widgetModel.datasources)}if(widgetModel.altContent){var alternateContentNames=Object.keys(widgetModel.altContent);alternateContentNames.forEach(function(contentName){var content=widgetModel.altContent[contentName];content.src=self._replaceVars("src."+contentName,content.src)})}}if(excludeObjects.length){excludeObjects.forEach(function(obj){obj.value=obj.value.replace("__contextRoot__","contextRoot")})}log.info("Replace config vars plugin in POST READ is DONE.");return widgetModel};ReplaceConfigVarsPlugins.prototype._traverse=function(obj){Object.keys(obj).forEach(function(key){obj[key]=this._replaceVars(key,obj[key]);if(!!obj[key]&&typeof obj[key]==="object"){this._traverse(obj[key])}},this)};ReplaceConfigVarsPlugins.prototype._getExcludeObjects=function(widgetModel){var datasources=widgetModel.datasources||{};var templateParams=Object.keys(datasources).map(function(dsName){return datasources[dsName]}).reduce(function(params,datasource){return params.concat(datasource.params)},[]).filter(function(param){return param.name==="template"&&typeof param.value==="string"});var prefs=widgetModel.preferences||{};var templatePrefs=Object.keys(prefs).map(function(prefName){return prefs[prefName]}).filter(function(pref){return pref.name==="templateUrl"&&typeof pref.value==="string"});return templateParams.concat(templatePrefs)};ReplaceConfigVarsPlugins.prototype._replaceVars=function(key,value){if(typeof value!=="string"){return value}var self=this;var log=self.log;var varMap=self.varMap;var urlVars=Object.keys(varMap);value=value.replace(/\$\(contextRoot\)\/static/g,"$(staticResourcesRoot)/static");urlVars.forEach(function(urlVar){var varRegexp=new RegExp(self.interpolateStartRegex+urlVar+self.interpolateEndRegex,"g");if(log.level()<=bunyan.DEBUG&&varRegexp.test(value)){log.debug("Replacing occurences of [%s] with [%s] where [%s=%s]",varRegexp,varMap[urlVar],key,value)}value=value.replace(varRegexp,varMap[urlVar])});return value};module.exports=ReplaceConfigVarsPlugins},{"../util/logger-factory":248,"browser-bunyan":2}],226:[function(require,module,exports){"use strict";var DatasourceResolver=require("../../datasource/datasource-resolver");var resolverHelpers=require("../../datasource/datasource-resolver-helpers");var util=require("../../util/util");var sanitizer=require("lib-bb-html-sanitizer");var httpSchemaRegexp=/^https?:/i;function isHttpDatasource(datasource){var uri=datasource&&datasource.uri;return uri&&httpSchemaRegexp.test(uri)}module.exports=HttpDatasourceResolver;function HttpDatasourceResolver(datasource){this._datasource=datasource}HttpDatasourceResolver.prototype.resolveUrl=function(context){var queryString=resolverHelpers.resolveQueryString(context,this._datasource.params);var endpoint=resolverHelpers.resolveExpression(context,this._datasource.uri);if(queryString){endpoint+="?"+queryString}return endpoint};HttpDatasourceResolver.prototype.processResponse=function processResponse(response,context){var self=this;return util.getContentBodyAndTypeFromResponse(response).then(function(result){return result.type==="html"?self._sanitize(context,result.body):result.body})};HttpDatasourceResolver.prototype._sanitize=function sanitize(context,html){if(!this._sanitizer){this._sanitizer=sanitizer.create(context.htmlSanitizerWhitelist)}return this._sanitizer(html)};HttpDatasourceResolver.getInstance=DatasourceResolver.createFactoryFunction(isHttpDatasource,HttpDatasourceResolver)},{"../../datasource/datasource-resolver":206,"../../datasource/datasource-resolver-helpers":205,"../../util/util":250,"lib-bb-html-sanitizer":32}],227:[function(require,module,exports){"use strict";var DatasourceResolver=require("../../datasource/datasource-resolver");var resolverHelpers=require("../../datasource/datasource-resolver-helpers");var util=require("../../util/util");var sanitizer=require("lib-bb-html-sanitizer");module.exports=ResourceDatasourceResolver;function ResourceDatasourceResolver(datasource){this._datasource=datasource;this._sanitizeParamName="sanitize"}ResourceDatasourceResolver.prototype.resolveUrl=function(context){var url=this._datasource.uri;var sanitizeParam=this._sanitizeParamName;var contextRoot=context.contextRoot||"";var baseUrl=context.itemRoot||"";var urlComponents=url.split(":");if(urlComponents.length!==2){throw new Error("Invalid resource datasource uri: ",url)}var params=(this._datasource.params||[]).filter(function(param){return param.name!==sanitizeParam});var queryString=resolverHelpers.resolveQueryString(context,params);var resourcePath=resolverHelpers.resolveExpression(context,urlComponents[1]);var endpoint;if(util.isUrlDocumentRelative(resourcePath)){endpoint=baseUrl+"/"+resourcePath}else{endpoint=contextRoot+resourcePath}if(queryString){endpoint+="?"+queryString}return endpoint};ResourceDatasourceResolver.prototype.processResponse=function processResponse(response,context){var params=this._datasource.params||[];var sanitizeParam=this._sanitizeParamName;var self=this;return util.getContentBodyAndTypeFromResponse(response).then(function(result){var skipSanitization;if(result.type==="html"){skipSanitization=params.some(function(param){return param.name===sanitizeParam&&param.value==="false"})}else{skipSanitization=true}return skipSanitization?result.body:self._sanitize(context,result.body)})};ResourceDatasourceResolver.prototype._sanitize=function sanitize(context,html){if(!this._sanitizer){this._sanitizer=sanitizer.create(context.htmlSanitizerWhitelist)}return this._sanitizer(html)};ResourceDatasourceResolver.getInstance=DatasourceResolver.createFactoryFunction("resource",ResourceDatasourceResolver)},{"../../datasource/datasource-resolver":206,"../../datasource/datasource-resolver-helpers":205,"../../util/util":250,"lib-bb-html-sanitizer":32}],228:[function(require,module,exports){"use strict";var ConfigParser=require("../../core/config-parser");var VError=require("../../util/verror");var loggerFactory=require("../../util/logger-factory");var defaultParserMap={json:{parser:require("./commonjs-package-config-parser"),testFn:function(str){return typeof str==="string"&&str.trim().indexOf("{")===0}},backbaseXml:{parser:require("./backbase-dom-config-parser"),testFn:function(str){return typeof str==="string"&&str.trim().indexOf("<catalog")>=0}},jsObject:{parser:require("./js-object-parser"),testFn:function(obj){return typeof obj==="object"}}};var AutoConfigParser=function(){this.log=loggerFactory.getLogger();this.parserMap=defaultParserMap};AutoConfigParser.prototype=Object.create(ConfigParser.prototype);AutoConfigParser.prototype.parse=function(configText){var Parser=null;for(var parserType in this.parserMap){if(this.parserMap.hasOwnProperty(parserType)){
var parserConf=this.parserMap[parserType];if(parserConf.testFn(configText)){this.log.debug("Parsing widget config as: %s",parserType);Parser=parserConf.parser;break}}}if(Parser===null){throw new VError("Could not determine the config parser to use")}var configParser=new Parser;return configParser.parse(configText)};AutoConfigParser.prototype.addParserStrategy=function(type,parser,testFn){this.parserMap[type]={parser:parser,testFn:testFn}};module.exports=AutoConfigParser},{"../../core/config-parser":196,"../../util/logger-factory":248,"../../util/verror":251,"./backbase-dom-config-parser":229,"./commonjs-package-config-parser":230,"./js-object-parser":231}],229:[function(require,module,exports){"use strict";var ConfigParser=require("../../core/config-parser");var parseWidget=require("./xml/widget");var helpers=require("./xml/helpers");var BackbaseSaxConfigParser=function(){};BackbaseSaxConfigParser.prototype=Object.create(ConfigParser.prototype);BackbaseSaxConfigParser.prototype.parse=function(xml){try{var domParser=new DOMParser;var doc=domParser.parseFromString(xml,"application/xml");var firstNode=doc.documentElement;var node=firstNode.tagName==="catalog"?helpers.getChildElements(firstNode)[0]:firstNode;return Promise.resolve(parseWidget(node))}catch(e){return Promise.reject(e)}};module.exports=BackbaseSaxConfigParser},{"../../core/config-parser":196,"./xml/helpers":234,"./xml/widget":237}],230:[function(require,module,exports){"use strict";var ConfigParser=require("../../core/config-parser");var util=require("../../util/util");var CommonJsPackageConfigParser=function(){};CommonJsPackageConfigParser.prototype=Object.create(ConfigParser.prototype);CommonJsPackageConfigParser.prototype.parse=function(json){try{var packaged=JSON.parse(json);var widgetModel=util.cloneDeep(require("../../core/default-widget-model"));widgetModel.id=packaged.name||widgetModel.id;widgetModel.version=packaged.version||widgetModel.version;widgetModel.description=packaged.description||widgetModel.description;widgetModel._lang=packaged.locales||widgetModel._lang;if(Array.isArray(packaged.contributors)&&packaged.contributors.length>0){widgetModel.author=packaged.contributors[0].name||widgetModel.author;widgetModel.authorEmail=packaged.contributors[0].email||widgetModel.authorEmail;widgetModel.authorHref=packaged.contributors[0].web||widgetModel.authorHref}if(Array.isArray(packaged.licenses)&&packaged.licenses.length>0){widgetModel.license=packaged.licenses[0].type||widgetModel.license;widgetModel.licenseHref=packaged.contributors[0].url||widgetModel.licenseHref}else if(typeof widgetModel.license==="string"){widgetModel.license=packaged.license}widgetModel.defaultlocale=packaged.defaultlocale||widgetModel.defaultlocale;widgetModel.width=packaged.width||widgetModel.width;widgetModel.height=packaged.height||widgetModel.height;widgetModel.viewmodes=packaged.viewmodes||widgetModel.viewmodes;widgetModel.name=packaged.fullName||widgetModel.name;widgetModel.shortName=packaged.shortName||widgetModel.shortName;widgetModel.preferences=packaged.preferences||widgetModel.preferences;widgetModel.features=packaged.features||widgetModel.features;widgetModel.icons=packaged.icons||widgetModel.icons;widgetModel.content=packaged.content||widgetModel.content;return Promise.resolve(widgetModel)}catch(e){return Promise.reject(e)}};module.exports=CommonJsPackageConfigParser},{"../../core/config-parser":196,"../../core/default-widget-model":198,"../../util/util":250}],231:[function(require,module,exports){"use strict";var ConfigParser=require("../../core/config-parser");var JsObjectParser=function(){};JsObjectParser.prototype=Object.create(ConfigParser.prototype);JsObjectParser.prototype.parse=function(object){return object};module.exports=JsObjectParser},{"../../core/config-parser":196}],232:[function(require,module,exports){"use strict";var helpers=require("./helpers");module.exports={parseIcons:parseIcons,parseChildren:parseChildren};function parseIcons(properties){var icons=[];helpers.pushIfExists(icons,properties.thumbnailUrl);helpers.pushIfExists(icons,properties.icon);return icons}function parseChildren(element,childItemParser){var childrenEl=helpers.getChildElementByName(element,"children");var childrenElements=childrenEl&&helpers.getChildElements(childrenEl);return childrenElements&&childrenElements.map(childItemParser).sort(childComparator)}function childComparator(first,next){var firstArea=cast(first,"area"),nextArea=cast(next,"area"),firstOrder=cast(first,"order"),nextOrder=cast(next,"order");var compare=0;if(firstArea<nextArea){compare=-1}else if(firstArea>nextArea){compare=1}else if(firstOrder<nextOrder){compare=-1}else if(firstOrder>nextOrder){compare=1}return compare}function cast(item,prefName){if(typeof item.preferences[prefName]==="undefined"){return null}var value=item.preferences[prefName].value;var numberValue=parseFloat(value);return isNaN(numberValue)?value:numberValue}},{"./helpers":234}],233:[function(require,module,exports){module.exports.PROPERTY_BLACKLIST=["description","shortName","thumbnailUrl","icon","viewmodes","author","authorEmail","authorHref","license","licenseHref","widgetChrome","config","src","isManageableArea","version","width","height"];module.exports.SPECIAL_TYPES=["contentRef","linkRef","datasource"];module.exports.NO_LOCALE_NAME="no_locale"},{}],234:[function(require,module,exports){"use strict";module.exports={assignIfExists:assignIfExists,content:content,isExists:isExists,parseBool:parseBool,parseString:parseString,parseFloat:parseFloat_,parseInt:parseInt_,parseViewhint:parseViewhint,pushIfExists:pushIfExists,toArray:toArray,getChildElementByName:getChildElementByName,getChildElements:getChildElements};function parseString(attr){if(attr&&attr.value.length){return attr.value}}function parseViewhint(viewhint){var viewhintTrimmed=parseString(viewhint);if(!viewhintTrimmed){return[]}return viewhintTrimmed.split(/[,\s]/).filter(function(hint){return hint.trim().length>0})}function isExists(val){return typeof val!=="undefined"&&val!==null}function assignIfExists(obj,name,value,converter){if(isExists(value)){obj[name]=converter?converter(value):value}}function pushIfExists(arr,value){if(isExists(value)){arr.push(value)}}function parseBool(bool){if(isExists(bool)){if(typeof bool==="string"){return bool==="true"}return bool&&bool.value==="true"}}function toArray(obj){return[].slice.call(obj)}function parseFloat_(num){if(typeof num==="string"){return parseFloat(num)}}function parseInt_(num){if(typeof num==="string"){var value=parseInt(num,10);return!isNaN(value)?value:undefined}}function getChildElementByName(node,elementName){var children=getChildElements(node);for(var i=0;i<children.length;i++){if(children[i].tagName===elementName){return children[i]}}}function content(element,elementName,defaultValue){var childEl=getChildElementByName(element,elementName);if(typeof defaultValue==="undefined"){defaultValue=null}return childEl&&childEl.textContent||defaultValue}function getChildElements(node){if(typeof node.children!=="undefined"){return toArray(node.children)}return toArray(node.childNodes).filter(function(childNode){return childNode.nodeType===1})}},{}],235:[function(require,module,exports){(function(global){"use strict";var Constants=require("./constants");var i18n=require("../../../util/i18n");var helpers=require("./helpers");var BLACKLIST=Constants.PROPERTY_BLACKLIST;var NO_LOCALE_NAME=Constants.NO_LOCALE_NAME;module.exports=parseItem;function parseItem(itemEl){var propertiesParent=helpers.getChildElementByName(itemEl,"properties");var propertyElements=helpers.getChildElements(propertiesParent);var currentLocale=helpers.content(itemEl,"locale")||getDefaultLocale();var properties={};var propertiesMap=propertyElements.reduce(function(acc,element){var property=parseProperty(element,currentLocale);properties[property.name]=property.value;if(BLACKLIST.indexOf(property.name)===-1){acc[property.name]=property}return acc},{});var item={id:helpers.content(itemEl,"uuid"),name:helpers.content(itemEl,"name",""),shortName:properties.shortName,preferences:propertiesMap,preferencesDict:properties,type:itemEl.tagName,locale:currentLocale,dir:helpers.content(itemEl,"dir","ltr")};helpers.assignIfExists(item,"tags",parseTags(itemEl));helpers.assignIfExists(item,"extendedItemName",helpers.content(itemEl,"extendedItemName"));helpers.assignIfExists(item,"parentItemName",helpers.content(itemEl,"parentItemName"));helpers.assignIfExists(item,"contextItemName",helpers.content(itemEl,"contextItemName"));helpers.assignIfExists(item,"lockState",helpers.content(itemEl,"lockState"));helpers.assignIfExists(item,"securityProfile",helpers.content(itemEl,"securityProfile"));helpers.assignIfExists(item,"manageable",helpers.parseBool(helpers.content(itemEl,"manageable")));helpers.assignIfExists(item,"path",helpers.content(itemEl,"path"));return item}function parseProperty(propertyElement,currentLocale){var attrs=propertyElement.attributes;var name=helpers.parseString(attrs.name);var label=helpers.parseString(attrs.label);var itemName=helpers.parseString(attrs.itemName);var manageable=attrs.manageable;var readonly=helpers.parseBool(attrs.readonly);var localizable=helpers.parseBool(attrs.localizable);var viewhints=attrs.viewHint&&helpers.parseViewhint(attrs.viewHint);var valueElements=helpers.toArray(propertyElement.getElementsByTagName("value"));var values=valueElements.map(function(valueElement){return parseValue(valueElement)});var currentLocaleValue=values.filter(function(valueObj){return valueObj.locale===currentLocale})[0];if(!currentLocaleValue){currentLocaleValue=values.sort(function(current,previous){var result=1;if(current.locale){if(previous.locale){result=previous.locale.localeCompare(current.locale)}else{result=-1}}return result}).filter(function(valueObj){return currentLocale.indexOf(valueObj.locale)===0||!valueObj.locale})[0]||{}}var type=attrs.type&&attrs.type.value||currentLocaleValue.type;var property={name:name,readonly:readonly||false,value:currentLocaleValue.value};if(label){property.label=label}if(manageable){property.manageable=helpers.parseBool(manageable)}if(viewhints){property.viewhints=viewhints}if(itemName){property.itemName=itemName}if(type){property.type=type}if(localizable){property.localizable=localizable;property._lang=values.reduce(function(obj,localizedValueObj){var key=localizedValueObj.locale||NO_LOCALE_NAME;obj[key]={value:localizedValueObj.value};return obj},{});Object.defineProperty(property,"value",{enumerable:true,set:function(value){var langObj=this._lang||(this._lang={});var localizedValue=langObj[currentLocale]||(langObj[currentLocale]={});localizedValue.value=value;currentLocaleValue=localizedValue},get:function(){return currentLocaleValue.value}})}return property}function parseTags(node){var parent=helpers.getChildElementByName(node,"tags");var tagElements=parent&&helpers.getChildElements(parent);return tagElements&&tagElements.map(parseTag)}function parseTag(tagElement){return{type:tagElement.attributes.type.value,name:helpers.parseString({value:tagElement.textContent})}}function parseValue(valueElement){return{value:valueElement.textContent,type:valueElement.getAttribute("type"),locale:valueElement.getAttribute("locale")}}function getDefaultLocale(){var locale;var localStorage=getLocalStorage();if(localStorage){locale=localStorage.getItem("bb:locale")}return locale||i18n.defaultLocale}function getLocalStorage(){var probe="bb:__test";try{var localStorage=global.localStorage;localStorage.setItem(probe,probe);localStorage.removeItem(probe);return localStorage}catch(e){return null}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../../util/i18n":247,"./constants":233,"./helpers":234}],236:[function(require,module,exports){"use strict";var helpers=require("./helpers");var parseWidget=require("./widget");var loggerFactory=require("../../../util/logger-factory");var log;function parse(xml){var doc=parseXmlString(xml);return this._parseXmlItemModel(doc.documentElement)}function parseList(xml){var doc=parseXmlString(xml);var self=this;return helpers.getChildElements(doc.documentElement).map(function(itemEl){return self._parseXmlItemModel(itemEl)}).filter(function(item){return!!item})}function parseXmlItemModel(itemElement){var logger=getLogger();var itemType=itemElement.tagName.toLowerCase();var itemSpecificParser=this.getParser(itemType);if(!itemSpecificParser){logger.warn("Unsupported item type [%s]",itemType);return null}return itemSpecificParser(itemElement,logger)}function setParser(type,parser){if(!this._typeSpecificParser){this._typeSpecificParser={}}this._typeSpecificParser[type]=parser}function getParser(type){return this._typeSpecificParser&&this._typeSpecificParser[type]}function parseXmlString(xml){var parser=new DOMParser;return parser.parseFromString(xml,"application/xml")}function getLogger(){if(!log){var parentLog=loggerFactory.getLogger();log=parentLog.child({childName:"model-parser"})}return log}var XmlModelParser={parse:parse,parseList:parseList,setParser:setParser,getParser:getParser,_parseXmlItemModel:parseXmlItemModel};function createInstance(){var instance=Object.create(XmlModelParser);instance.setParser("widget",parseWidget);instance.setParser("container",parseWidget);return instance}module.exports={createInstance:createInstance}},{"../../../util/logger-factory":248,"./helpers":234,"./widget":237}],237:[function(require,module,exports){"use strict";var merge=require("../../../util/util").merge;var parseItem=require("./item");var common=require("./common");var helpers=require("./helpers");var loggerFactory=require("../../../util/logger-factory");var url=require("url");var log;module.exports=parseWidget;function parseWidget(widgetEl){var item=parseItem(widgetEl);var preferences=item.preferencesDict;var widget={content:parseContent(preferences),description:preferences.description,icons:common.parseIcons(preferences),title:preferences.title};helpers.assignIfExists(widget,"width",helpers.parseInt(preferences.width,10));helpers.assignIfExists(widget,"height",helpers.parseInt(preferences.height,10));helpers.assignIfExists(widget,"isManageableArea",helpers.parseBool(preferences.isManageableArea));helpers.assignIfExists(widget,"viewmodes",parseViewmodes(preferences));helpers.assignIfExists(widget,"author",preferences.author);helpers.assignIfExists(widget,"authorEmail",preferences.authorEmail);helpers.assignIfExists(widget,"authorHref",preferences.authorHref);helpers.assignIfExists(widget,"version",preferences.version);helpers.assignIfExists(widget,"license",preferences.license);helpers.assignIfExists(widget,"licenseHref",preferences.licenseHref);widget.altContent=parseAlternativeContents(item);var datasourceMap=parseDatasources(item);if(Object.keys(datasourceMap).length>0){widget.datasources=datasourceMap}var children=common.parseChildren(widgetEl,parseWidget);if((children||[]).length>0){widget.children=children}delete item.preferencesDict;return merge(item,widget)}function parseDatasources(item){var preferences=item.preferences;var preferenceNames=Object.keys(preferences);return preferenceNames.map(function(prefName){return preferences[prefName]}).filter(function(pref){return pref.type==="datasource"}).reduce(function(obj,datasourcePref){var datasourceConfig=parseDatasourceUri(datasourcePref.value);if(datasourceConfig.uri){datasourceConfig.name=datasourcePref.name;obj[datasourcePref.name]=datasourceConfig}return obj},{})}function parseDatasourceUri(uri){var data={};if(uri){var logger=getLogger();var uriObject;try{uriObject=url.parse(uri,true);data.params=Object.keys(uriObject.query).map(function(paramName){return{name:paramName,value:uriObject.query[paramName]}});data.uri=data.params.length>0?uri.slice(0,uri.indexOf("?")):uri}catch(er){logger.error(er)}}return data}function parseContent(properties){var content={src:"",type:"text/html",encoding:"UTF-8"};helpers.assignIfExists(content,"src",properties.src);helpers.assignIfExists(content,"config",properties.config);return content}function parseAlternativeContents(item){var preferences=item.preferences;var propertyNames=Object.keys(preferences);var sourcePropertyNames=propertyNames.filter(function(name){return/^src\..*/.test(name)});var contents=sourcePropertyNames.reduce(function(contents,propertyName){var content=preferences[propertyName].value;var contentName=propertyName.replace(/^src\./,"");contents[contentName]={src:content,encoding:"UTF-8"};return contents},{});sourcePropertyNames.forEach(function(preferenceName){delete item.preferences[preferenceName]});return contents}function parseViewmodes(properties){var viewmodes_str=properties.viewmodes;if(viewmodes_str){return viewmodes_str.split(/\s+/).filter(function(viewmode){return viewmode.trim().length>0})}else{return[]}}function getLogger(){if(!log){var parentLog=loggerFactory.getLogger();log=parentLog.child({childName:"xml-widget-parser"})}return log}},{"../../../util/logger-factory":248,"../../../util/util":250,"./common":232,"./helpers":234,"./item":235,url:425}],238:[function(require,module,exports){"use strict";var fetch=require("../../fetch/filtering-fetch");var ConfigReader=require("../../core/config-reader");var VError=require("../../util/verror");var loggerFactory=require("../../util/logger-factory");var responseHelpers=require("../../util/response-helpers");var XhrWidgetReader=function(opts){opts=opts||{};this.log=loggerFactory.getLogger();this.useCache=typeof opts.useCache==="boolean"?opts.useCache:true;this.responseCache={}};XhrWidgetReader.prototype=Object.create(ConfigReader.prototype);XhrWidgetReader.prototype.read=function(url){var self=this;var log=this.log;log.debug("Making http request for widget config to [%s]...",url);if(this.responseCache[url]){this.log.debug("Using cached response for [%s]",url);return this.responseCache[url]}return fetch(url).then(function(res){log.debug("Response received for [%s]. Status: %s.",url,res.status);return responseHelpers.isResponseOk(res)?Promise.resolve(res):Promise.reject(responseHelpers.createError(res))}).then(function(res){return res.text()}).then(function(text){log.trace("Received config:\n%s",text);if(self.useCache){self.responseCache[url]=text}return text}).catch(function(err){throw new VError(err,"Failed to XHR get from "+url)})};module.exports=XhrWidgetReader},{"../../core/config-reader":197,"../../fetch/filtering-fetch":214,"../../util/logger-factory":248,"../../util/response-helpers":249,"../../util/verror":251}],239:[function(require,module,exports){(function(global){"use strict";var VError=require("../../util/verror");var StartFileProcessor=require("./seamless/start-file-processor");var fetch=require("../../fetch/filtering-fetch");var loggerFactory=require("../../util/logger-factory");var util=require("../../util/util");var WidgetRenderer=require("../../core/widget-renderer");var responseHelpers=require("../../util/response-helpers");var Html5SeamlessRenderer=function(widgetContainerEl,datasourceResolverFactory,opts){if(typeof DOMParser==="undefined"){throw new Error("DOMParser is not shimmed or a native object. This renderer will not work")}this._domParser=new DOMParser;this.widgetEl=null;this.areaMap=null;this.preprocessorMap={};this.log=loggerFactory.getLogger();this._datasourceResolverFactory=datasourceResolverFactory;this.widgetContainerEl=widgetContainerEl;this.opts=opts||{};this.configVars=this.opts.configVars||{};this.parsingFormat=this.opts.parsingFormat||null;this.useFolderLocalization=this.opts.useFolderLocalization||false};Html5SeamlessRenderer.prototype=Object.create(WidgetRenderer.prototype);Html5SeamlessRenderer.prototype.render=function(widgetModel,widgetInstance){var self=this;var processPromise;if(!this.isRendered()){var renderReadyPromises=[];renderReadyPromises.push(this._fetchStartFile(widgetModel).then(function(data){return{name:"startFile",data:data}}));var messageBundleUrl=widgetModel.preferences.messages&&widgetModel.preferences.messages.value;var optionsUrl=widgetModel.preferences.options&&widgetModel.preferences.options.value;if(messageBundleUrl){renderReadyPromises.push(this._fetchStaticJSON(messageBundleUrl).then(function(data){return{name:"messages",data:data}}))}if(optionsUrl){renderReadyPromises.push(this._fetchStaticJSON(optionsUrl).then(function(data){return{name:"options",data:data}}))}var datasources=Object.keys(widgetModel.datasources||{}).map(function(datasourceName){return widgetModel.datasources[datasourceName]});if(datasources.length>0){var datasourceResolutionContext=Html5SeamlessRenderer._buildDatasourceContext(widgetModel,widgetInstance,self.configVars);var datasourcePromises=datasources.map(function(datasource){return self._fetchDatasource(datasource,datasourceResolutionContext).then(function(data){return data})});renderReadyPromises=renderReadyPromises.concat(datasourcePromises)}processPromise=Promise.all(renderReadyPromises).then(function(results){var startFile,messageBundle,optionsBundle;var datasourceContext=results.map(function(result){if(result.name==="startFile"){startFile=result.data}else if(result.name==="messages"){messageBundle=result.data}else if(result.name==="options"){optionsBundle=result.data}else{return result}}).filter(function(datasource){return datasource}).reduce(function(obj,datasource){obj[datasource.name]=datasource.data;return obj},{});var renderingContext=util.merge({},widgetModel,{datasources:datasourceContext});var additionalOptions={messageBundle:messageBundle,optionsBundle:optionsBundle};return self.preprocess(widgetModel,startFile,renderingContext,additionalOptions)}).then(function(processedStartFileContent){return self.process(widgetModel,widgetInstance,processedStartFileContent)}).catch(function(err){throw new VError(err,"The widget ["+widgetModel.name+"] could not be rendered:\n	"+err.message)})}else{processPromise=Promise.resolve(self.process(widgetModel,widgetInstance,null))}return processPromise.then(function(){return self.postprocess(widgetModel,widgetInstance)})};Html5SeamlessRenderer.prototype.preprocess=function(widgetModel,startFileContent,context,additionalOptions){var mimeType=widgetModel.content.type;if(startFileContent&&this.preprocessorMap.hasOwnProperty(mimeType)){var processor=this.preprocessorMap[mimeType];this.log.debug("Applying preprocessor for [%s] for [%s (%s)] ",processor.name,widgetModel.content.src,mimeType);return processor.process(widgetModel,startFileContent,context,additionalOptions)}else{return startFileContent}};Html5SeamlessRenderer.prototype._fetchStartFile=function(widgetModel){var log=this.log;log.debug("Starting HTML5 seamless rendering...");log.debug("Requesting start file [%s] ...",widgetModel.content.src);return fetch(widgetModel.content.src).then(function(res){log.debug("Start file request resolved/ Status: %s",res.status);if(responseHelpers.isResponseOk(res)){return res.text()}else{var error=responseHelpers.createError(res);error.code=res.status;throw error}}).then(function(html){log.trace("Received HTML\n: %s",html);return html}).catch(function(e){var error=new VError(e,"Failed to fetch: "+widgetModel.content.src);if(e.code===404){error.code="STARTFILE_NOT_FOUND"}throw error})};Html5SeamlessRenderer.prototype.process=function(widgetModel,widgetInstance,startFileContent){var widgetEl;var startFileProcessor=this.startFileProcessor=new StartFileProcessor({document:document,configVars:this.configVars,log:this.log,startFileSrc:widgetModel.content.src});if(startFileContent){var startFileDocument=this._domParser.parseFromString(startFileContent,"text/html");startFileDocument=startFileProcessor.aggregateStylesheets(widgetModel,startFileDocument);startFileDocument=startFileProcessor.normalizeMediaUrls(widgetModel,startFileDocument);var invokableScripts=startFileProcessor.collateInvokableScripts(widgetModel,startFileDocument);widgetEl=startFileProcessor.createWidgetRootNode(widgetModel,startFileDocument);widgetEl=startFileProcessor.setDimensions(widgetModel,widgetEl);startFileProcessor.prepareScripts(widgetModel,widgetEl,invokableScripts);this.widgetContainerEl.appendChild(widgetEl)}else{for(var i=0;i<this.widgetContainerEl.children.length;i++){if(this.widgetContainerEl.children[i].hasAttribute("data-widget")){widgetEl=this.widgetContainerEl.children[i];break}}}Object.defineProperty(widgetInstance,"body",{enumerable:true,writable:!!this.configVars.compat,value:widgetEl});if(global.cxp){global.cxp._widgets=global.cxp._widgets||{};global.cxp._widgets[widgetModel.id]=widgetInstance}this.widgetEl=widgetEl};Html5SeamlessRenderer.prototype.postprocess=function(widgetModel,widgetInstance){return this.startFileProcessor.invokeScripts(widgetModel,widgetInstance,this.widgetEl)};Html5SeamlessRenderer.prototype.getWidgetNode=function(){return this.widgetEl||null};Html5SeamlessRenderer.prototype.getParentNode=function(){return this.widgetContainerEl||null};Html5SeamlessRenderer.prototype.setParentNode=function(widgetContainerEl){this.widgetContainerEl=widgetContainerEl};Html5SeamlessRenderer.prototype.getWidth=function(){return this.getWidgetNode()?this.getWidgetNode().offsetWidth:"auto"};Html5SeamlessRenderer.prototype.getHeight=function(){return this.getWidgetNode()?this.getWidgetNode().offsetHeight:"auto"};Html5SeamlessRenderer.prototype.isRendered=function(){return!!this.widgetContainerEl.innerHTML.trim()};Html5SeamlessRenderer.prototype.destroy=function(){var widgetName=this.widgetEl.getAttribute("data-widget");var parent=this.widgetEl.parentElement;var chrome=null;while(parent){var chromeName=parent.getAttribute("data-chrome");if(chromeName===widgetName){chrome=parent;break}parent=parent.parentElement}this.startFileProcessor.removeInlineScripts(this.widgetEl.id,this.widgetEl);if(chrome&&chrome.parentElement){chrome.parentElement.removeChild(chrome)}else if(this.widgetEl.parentElement){this.widgetEl.parentElement.removeChild(this.widgetEl)}if(global.cxp&&global.cxp._widgets&&this.widgetEl.id){delete global.cxp._widgets[this.widgetEl.id]}this.widgetEl=null};Html5SeamlessRenderer.prototype.getAreaNodes=function(){var self=this;if(!this.areaMap){var areaAttr="data-area";var areaSelector="["+areaAttr+"]";var areaElements=this.widgetEl.querySelectorAll(areaSelector);this.areaMap=Array.prototype.slice.call(areaElements).filter(function(areaEl){return util.ensureElementBelongsToItem(self.widgetEl.getAttribute("data-widget"),areaEl)}).reduce(function(areaMap,areaEl){var areaName=areaEl.getAttribute(areaAttr);areaMap[areaName]=areaEl;return areaMap},{})}return this.areaMap};Html5SeamlessRenderer.prototype.addPreprocessor=function(mimeType,preprocessor){if(this.preprocessorMap.hasOwnProperty(mimeType)){var oldProcessorName=this.preprocessorMap[mimeType].name;this.log.warn("Overriding a previously added preprocessor [%s] for the mime type [%s]",oldProcessorName,mimeType)}preprocessor.name=preprocessor.name||"Anonymous preprocessor";this.log.debug("Adding the preprocessor [%s] for start files with the mime type [%s]",preprocessor.name,mimeType);this.preprocessorMap[mimeType]=preprocessor};Html5SeamlessRenderer.prototype._fetchStaticJSON=function(url){var self=this;return fetch(url).then(function(response){var result=response.json();self.log.trace("Fetched JSON file:\n%s",result);return result})};Html5SeamlessRenderer.prototype._fetchDatasource=function(datasource,context){var self=this;var name=datasource.name;var resolver=self._datasourceResolverFactory.getResolver(datasource);return resolver.loadData(context).then(function(result){self.log.trace("Fetched datasource [%s]:\n%s",name,result);return{name:name,data:result}}).catch(function(err){self.log.error("Datasource [%s] fetch failed.",name,err);return{name:name,error:err}})};Html5SeamlessRenderer._buildDatasourceContext=function(widgetModel,widgetInstance,configVars){var itemOpts={itemRoot:widgetInstance.baseURI};return util.merge({},configVars,itemOpts,widgetModel)};module.exports=Html5SeamlessRenderer}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../core/widget-renderer":202,"../../fetch/filtering-fetch":214,"../../util/logger-factory":248,"../../util/response-helpers":249,"../../util/util":250,"../../util/verror":251,"./seamless/start-file-processor":242}],240:[function(require,module,exports){"use strict";var Handlebars=require("handlebars/dist/handlebars.min");var HandlebarsHelpers=require("handlebars-helpers");var VError=require("../../../util/verror");var loggerFactory=require("../../../util/logger-factory");var i18n=require("../../../util/i18n");var HandlebarsIntl=require("../../../util/handlebars-intl-decorator");var HandlebarsPreprocessor=function(config){this.name="Handlebars Preprocessor";this.log=loggerFactory.getLogger();this.dataObj={cxpConfig:config||{}};this.templateCache={};this.hbs=Handlebars.create();var helpers=HandlebarsPreprocessor.cxpHelpers;for(var helperName in helpers){if(helpers.hasOwnProperty(helperName)){this.hbs.registerHelper(helperName,helpers[helperName])}}if(i18n.intlSupported){HandlebarsIntl.registerWith(this.hbs)}else{this.log.warn("The ECMAScript Internationalization API is not supported on this platform. Some i18n related features will fail.")}};HandlebarsPreprocessor.prototype.process=function(widgetModel,startFileContent,context,additionalOptions){var log=this.log;var errMessage;var templateKey=widgetModel.content.src;var template=this.templateCache[templateKey];if(!template){if(widgetModel.content.type&&widgetModel.content.type==="application/x-handlebars-template"){var precompiledTemplate=null;try{eval("precompiledTemplate = "+startFileContent);template=this.hbs.template(precompiledTemplate)}catch(err){errMessage="There was a problem evaluating a pre-compiled handlebars template. "+"Ensure it was compiled using the simple option."+'E.g. "handlebars index.handlebars -s -f index.js"';this.log.error(err,errMessage);throw new VError(err,errMessage)}}else{log.debug("Compiling handlebars template instance for %s",templateKey);try{template=this.hbs.compile(startFileContent)}catch(err){errMessage="There was a problem compiling a handlebars template";this.log.error(err,errMessage);throw new VError(err,errMessage)}}this.templateCache[templateKey]=template}if(additionalOptions&&additionalOptions.messageBundle){var messages=additionalOptions.messageBundle.messages||{};var formats=additionalOptions.messageBundle.formats||{};var availableLocales=Object.keys(messages);var bestFitLocale=i18n.chooseBestLocale(availableLocales,widgetModel.locale);this.dataObj.intl=messages[bestFitLocale]||messages[i18n.defaultLocale]||{};if(this.dataObj.intl.locales){this.log.warn('"locales" is a reserved key. It will be overridden')}this.dataObj.intl.locales=widgetModel.locale===i18n.defaultLocale?widgetModel.locale:[widgetModel.locale,i18n.defaultLocale];if(this.dataObj.intl.formats){this.log.warn('"formats" is a reserved key. It will be overridden')}this.dataObj.intl.formats=formats}if(additionalOptions&&additionalOptions.optionsBundle){this.dataObj.options=additionalOptions.optionsBundle.options||{}}var result;try{result=template(context,{data:this.dataObj});log.trace("Using compiled Handlebars start file for %s:\n%s",templateKey,result)}catch(err){log.error(err,"A handlebars template [%s] could not be processed:\n	%s",templateKey,err.message);throw err}return result};HandlebarsPreprocessor.prototype.registerHelper=function(name,helper){this.hbs.registerHelper(name,helper)};HandlebarsPreprocessor.prototype.registerPartial=function(name,partial){this.hbs.registerPartial(name,partial)};HandlebarsPreprocessor.cxpHelpers=HandlebarsHelpers;module.exports=HandlebarsPreprocessor},{"../../../util/handlebars-intl-decorator":246,"../../../util/i18n":247,"../../../util/logger-factory":248,"../../../util/verror":251,"handlebars-helpers":3,"handlebars/dist/handlebars.min":28}],241:[function(require,module,exports){"use strict";var PromiseExt=require("promise-extensions")(Promise);var _loaderInstance;function ResourceLoader(){
this._initilized=false;this._allLoadingPromises={}}module.exports=function(){if(!_loaderInstance){_loaderInstance=new ResourceLoader}return _loaderInstance};ResourceLoader.prototype._init=function(){if(this._initilized){return}this.head=document.getElementsByTagName("head")[0]||document.documentElement;this.asyncSupported=typeof document.createElement("script").async!=="undefined";this._prepopulateLoadedCache();this._initilized=true};ResourceLoader.prototype._prepopulateLoadedCache=function(){var self=this;var preloadedLinks=Array.prototype.slice.call(document.getElementsByTagName("link"));preloadedLinks.forEach(function(link){var src=link.getAttribute("href");var isLoadable=link.rel==="stylesheet"&&src;if(isLoadable){self._addToCache(src,src)}});var preloadedScripts=Array.prototype.slice.call(document.getElementsByTagName("script"));preloadedScripts.forEach(function(script){var src=script.getAttribute("src");var isLoadable=!script.innerHTML&&src;if(isLoadable&&!script.async&&!self._getFromCache(src)){self._addToCache(src,Promise.resolve(src))}})};ResourceLoader.prototype._normalizeKey=function normalizeKey(resourceUrl){var key=decodeURI(resourceUrl);return key.replace(/(?:features|widgets|containers|pages|templates)\/\[BBHOST\]/gi,"items")};ResourceLoader.prototype._addToCache=function addToCache(resourceUrl,value){if(!resourceUrl){return}var key=this._normalizeKey(resourceUrl);this._allLoadingPromises[key]=value};ResourceLoader.prototype._getFromCache=function addToCache(resourceUrl){if(!resourceUrl){return undefined}var key=this._normalizeKey(resourceUrl);return this._allLoadingPromises[key]};ResourceLoader.prototype.loadScripts=function(scripts){if(!(scripts instanceof Array)){scripts=[scripts]}this._init();return this.asyncSupported?this._loadScriptsAsync(scripts):this._loadScriptsSync(scripts)};ResourceLoader.prototype._loadScriptsAsync=function(scripts){var self=this;var scriptLoadPromises=scripts.map(function(scriptObj){var src=scriptObj.src;var scriptPromise=self._getFromCache(src);if(!scriptPromise){var props={async:false};var originalAttrs=scriptObj.attributes||{};var attrs={src:src};if(originalAttrs.nonce){attrs.nonce=originalAttrs.nonce}var scriptEl=self._createScriptElement(attrs,props);scriptPromise=self._createScriptPromise(scriptEl);self._addToCache(src,scriptPromise);self.head.insertBefore(scriptEl,self.head.firstChild)}return scriptPromise});return PromiseExt.settleAll(scriptLoadPromises)};ResourceLoader.prototype._loadScriptsSync=function(scripts){var self=this;var scriptTuples=scripts.map(function(scriptObj){var src=scriptObj.src;var scriptPromise=self._getFromCache(src);var scriptEl;if(!scriptPromise){var originalAttrs=scriptObj.attributes||{};var attrs={src:src};if(originalAttrs.nonce){attrs.nonce=originalAttrs.nonce}scriptEl=self._createScriptElement(attrs);scriptPromise=self._createScriptPromise(scriptEl);self._addToCache(src,scriptPromise)}return{element:scriptEl,promise:scriptPromise}});var scriptPromises=scriptTuples.map(function(tuple){return tuple.promise});function loadScript(scriptTuple){if(scriptTuple.element){self.head.insertBefore(scriptTuple.element,self.head.firstChild)}return scriptTuple.promise}var startOfChainPromise=Promise.resolve(loadScript(scriptTuples[0]||{}));var chain=scriptTuples.slice(1).reduce(function(promise,scriptTuple){var loadNextScript=loadScript.bind(null,scriptTuple);return promise.then(loadNextScript,loadNextScript)},startOfChainPromise);chain.catch(function(){});return PromiseExt.settleAll(scriptPromises)};ResourceLoader.prototype._createScriptElement=function(attrs,props){var scriptElement=Object.keys(attrs||{}).reduce(function(scriptEl,attrName){scriptEl.setAttribute(attrName,attrs[attrName]);return scriptEl},document.createElement("script"));if(props){Object.assign(scriptElement,props)}return scriptElement};ResourceLoader.prototype._createScriptPromise=function(scriptEl){var src=scriptEl.src;return new Promise(function(resolve,reject){scriptEl.onload=function(){resolve(src)};scriptEl.onerror=function(){reject(src)}})};ResourceLoader.prototype.loadCss=function(hrefs){if(!(hrefs instanceof Array)){hrefs=[hrefs]}this._init();var self=this;var head=self.head;var currentBatch=[];hrefs.forEach(function(src){var stylePromise=self._getFromCache(src);if(stylePromise){currentBatch.push(stylePromise)}else{var newLinkEl=document.createElement("link");newLinkEl.setAttribute("rel","stylesheet");newLinkEl.setAttribute("type","text/css");newLinkEl.setAttribute("href",src);var promise=Promise.resolve(src);self._addToCache(src,promise);currentBatch.push(promise);var sheetLinksEls=Array.prototype.slice.call(head.getElementsByTagName("link")).filter(function(el){return el.rel==="stylesheet"});if(sheetLinksEls.length){var lastLinkEl=sheetLinksEls.pop();lastLinkEl.parentNode.insertBefore(newLinkEl,lastLinkEl.nextSibling)}else{head.insertBefore(newLinkEl,head.firstChild)}}});return Promise.all(currentBatch)}},{"promise-extensions":194}],242:[function(require,module,exports){(function(global){"use strict";var util=require("../../../util/util");var url=require("url");var resourceLoader=require("./resource-loader")();var VError=require("../../../util/verror");var pathname;if(global.location){pathname=global.location.pathname}function StartFileProcessor(opts){opts=opts||{};this.log=opts.log||null;this.documentContext=opts.document;this.configVars=opts.configVars||{};this.startFileSrc=opts.startFileSrc||"";this._scriptKeySuffix=""}StartFileProcessor.prototype.aggregateStylesheets=function(widgetModel,startFileDocument){var self=this;var externalStylesBatch=[];function addToBatch(linkElem){var href=linkElem.getAttribute("href");var linkUrl=self._normalizeResourceUrl(href,widgetModel);externalStylesBatch.push(linkUrl)}function loadBatch(){resourceLoader.loadCss(externalStylesBatch);externalStylesBatch=[]}var styleAndLinkElements=startFileDocument.querySelectorAll(" head > style, head > link[rel=stylesheet]");Array.prototype.slice.call(styleAndLinkElements).forEach(function(elem){if(elem.tagName.toLowerCase()==="style"){loadBatch();self.documentContext.head.appendChild(elem)}else if(elem.getAttribute("href")){addToBatch(elem)}});loadBatch();return startFileDocument};StartFileProcessor.prototype.collateInvokableScripts=function(widgetModel,startFileDocument){var self=this;var scriptElements=startFileDocument.getElementsByTagName("script");var scripts=Array.prototype.slice.call(scriptElements).reduce(function(processedScripts,scriptElement){if(!scriptElement.type||scriptElement.type==="text/javascript"){var scriptContent=scriptElement.innerHTML;var src=scriptElement.getAttribute("src");if(scriptContent){processedScripts.push({content:scriptContent})}else if(src){processedScripts.push({src:self._normalizeResourceUrl(src,widgetModel)})}scriptElement.parentNode.removeChild(scriptElement)}return processedScripts},[]);var startFileBody=startFileDocument.getElementsByTagName("body")[0];var onloadAttribute=startFileBody.getAttribute("onload");if(onloadAttribute){scripts.push({content:onloadAttribute})}return scripts};StartFileProcessor.prototype.normalizeMediaUrls=function(widgetModel,startFileDocument){var self=this;var imageElements=startFileDocument.getElementsByTagName("img");Array.prototype.slice.call(imageElements).forEach(function(imageElement){var originalSrc=imageElement.getAttribute("src");if(originalSrc){var src=self._normalizeResourceUrl(originalSrc,widgetModel);if(imageElement.getAttribute("src")!==src){imageElement.src=src}}});return startFileDocument};StartFileProcessor.prototype.createWidgetRootNode=function(widgetModel,startFileDocument){var widgetNode=this.documentContext.createElement("div");widgetNode.id=widgetModel.id;widgetNode.setAttribute("data-widget",widgetModel.name);var startFileBodyElement=startFileDocument.getElementsByTagName("body")[0];for(var i=0;i<startFileBodyElement.attributes.length;i++){var bodyAttr=startFileBodyElement.attributes[i];if(bodyAttr.specified&&bodyAttr.name!=="onload"&&bodyAttr.name!=="id"){widgetNode.setAttribute(bodyAttr.name,bodyAttr.value)}}widgetNode.innerHTML=startFileBodyElement.innerHTML;return widgetNode};StartFileProcessor.prototype.setDimensions=function(widgetModel,widgetEl){var self=this;function setDimension(widthOrHeight){if(widgetModel[widthOrHeight]&&!isNaN(parseInt(widgetModel[widthOrHeight]))){widgetEl.style[widthOrHeight]=parseInt(widgetModel[widthOrHeight])+"px";self.log.debug("Widget %s set to %s.",widthOrHeight,widgetEl.style[widthOrHeight])}}setDimension("width");setDimension("height");return widgetEl};StartFileProcessor.prototype.prepareScripts=function(widgetModel,widgetEl,invokableScripts){var self=this;this._scriptKeySuffix="_"+this.startFileSrc;var scriptKey=this._getScriptKey(widgetModel.id);global.cxp=global.cxp||{};global.cxp.scripts=global.cxp.scripts||{};global.cxp.scripts[scriptKey]=[];invokableScripts.forEach(function(script){var cspNonce=self.configVars.cspNonce;var scriptEl=self.documentContext.createElement("script");if(cspNonce){scriptEl.setAttribute("nonce",cspNonce)}if(script.content){var scriptStart="cxp.scripts['"+scriptKey+"'].push(function(widget, __GADGET__,  __WIDGET__) { ";var scriptEnd=" });";scriptEl.innerHTML=scriptStart+script.content+scriptEnd;scriptEl.setAttribute("data-cxp-script",scriptKey);self.documentContext.body.appendChild(scriptEl)}else{scriptEl.setAttribute("data-src",script.src);widgetEl.appendChild(scriptEl)}});return widgetEl};StartFileProcessor.prototype.removeInlineScripts=function(widgetId){var scriptKey=this._getScriptKey(widgetId);global.cxp.scripts=global.cxp.scripts||{};delete global.cxp.scripts.scriptKey;var scriptElements=this.documentContext.querySelectorAll("script[data-cxp-script='"+scriptKey+"']");Array.prototype.slice.call(scriptElements).forEach(function(scriptEl){scriptEl.parentElement.removeChild(scriptEl)})};StartFileProcessor.prototype.invokeScripts=function(widgetModel,widgetInstance,widgetEl){var self=this;var log=this.log;var itemName=widgetModel.name;var dataSourceAttr="data-src";var scriptSelector="script[data-src]";var externalScriptElements=widgetEl.querySelectorAll(scriptSelector);var scriptSources=Array.prototype.slice.call(externalScriptElements).filter(function(scriptElement){return util.ensureElementBelongsToItem(itemName,scriptElement)}).map(function(scriptElement){var attributes=[].slice.call(scriptElement.attributes).filter(function(attr){return attr.name!==dataSourceAttr}).reduce(function(map,attr){map[attr.name]=attr.value;return map},{});var src=scriptElement.getAttribute(dataSourceAttr);return{src:self._normalizeResourceUrl(src,widgetModel),attributes:attributes}});return resourceLoader.loadScripts(scriptSources).then(function(inspections){log.debug("JS resources have loaded.");var failedScripts=[];if(inspections){var errorCount=inspections.filter(function(scriptLoadInspection){var rejected=scriptLoadInspection.isRejected();return rejected&&failedScripts.push(scriptLoadInspection.reason)}).length;if(errorCount>0){log.warn("%s scripts failed to load:\n%s",errorCount,failedScripts.join(", "))}}var scriptKey=self._getScriptKey(widgetModel.id);if(global.cxp&&global.cxp.scripts&&Array.isArray(global.cxp.scripts[scriptKey])){try{global.cxp.scripts[scriptKey].forEach(function(scriptFn){if(typeof scriptFn==="function"){scriptFn.call(null,widgetInstance,widgetInstance,widgetInstance)}})}catch(err){log.warn('Failed to invoke inline scripts for widget "%s".\n%s',widgetModel.name,err)}}}).catch(function(err){throw new VError(err,"Failed to render HTML5 seamless widget")})};StartFileProcessor.prototype._normalizeResourceUrl=function(resourceUrl,widgetModel){resourceUrl=util.replacePathVars(resourceUrl,this.configVars,this.log);if(util.isUrlDocumentRelative(resourceUrl)){var startFilePath=widgetModel.content.src;var startFileDir=startFilePath.substring(0,startFilePath.lastIndexOf("/")+1);if(util.isUrlDocumentRelative(startFilePath)){var docRoot=pathname.substring(0,pathname.lastIndexOf("/")+1);startFileDir=url.resolve(docRoot,startFileDir)}resourceUrl=url.resolve(startFileDir,resourceUrl)}return resourceUrl};StartFileProcessor.prototype._getScriptKey=function(widgetId){return widgetId+this._scriptKeySuffix};module.exports=StartFileProcessor}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../../util/util":250,"../../../util/verror":251,"./resource-loader":241,url:425}],243:[function(require,module,exports){"use strict";var WidgetStorage=require("./web-storage-decorator");function Html5LocalStorage(){WidgetStorage.call(this,window.localStorage)}Html5LocalStorage.prototype=Object.create(WidgetStorage.prototype);module.exports=Html5LocalStorage},{"./web-storage-decorator":245}],244:[function(require,module,exports){"use strict";var util=require("../../util/util");function StorageEvent(type){this.type=type}StorageEvent.prototype.initStorageEvent=function(type,canBubble,cancellable,key,oldValue,newValue,url,storageArea){this.type=type;this.canBubble=canBubble;this.cancellable=cancellable;this.key=key;this.oldValue=oldValue;this.newValue=newValue;this.url=url;this.storageArea=storageArea};StorageEvent.prototype.toString=function(){return util.format("[object StorageEvent] (key=%s, oldValue=%s, newValue=%s, url=%s)",this.key,this.oldValue,this.newValue,this.url)};module.exports=StorageEvent},{"../../util/util":250}],245:[function(require,module,exports){(function(process){"use strict";var loggerFactory=require("../../util/logger-factory");var bunyan=require("browser-bunyan");var WidgetStorage=require("../../core/widget-storage");var VError=require("../../util/verror");var StorageEvent=require("./storage-event");var util=require("../../util/util");function WebStorageDecorator(storage){this.eventTarget=[];this.log=loggerFactory.getLogger();this._items=[];this._storage=storage;this._prefix="";this._eventsEnabled=false;var self=this;Object.defineProperty(this,"length",{enumerable:false,configurable:false,get:function(){return Object.keys(self._items).length}})}WebStorageDecorator.prototype=Object.create(WidgetStorage.prototype);WebStorageDecorator.prototype.init=function(widgetInstanceId,preferences){var self=this;var log=this.log;this._prefix=widgetInstanceId||"";log.debug("Initializing preference storage for widget [%s]",widgetInstanceId);log.debug("Using internal storage [%s]",this._storage.toString());if(log.level()<=bunyan.TRACE){log.trace("Initializing storage with the following preferences:\n %s",JSON.stringify(preferences))}if(preferences){this._items=Object.keys(preferences).map(function(prefName){return self.defineItem(preferences[prefName])})}this._eventsEnabled=true};WebStorageDecorator.prototype.getItem=function(key){var value=this._storage.getItem(this._prefix+key);if(typeof value==="undefined"||value===null){var item=this._getItemDefinition(key)||null;value=item?item.value:null}if(typeof value==="undefined"){value=null}this.log.trace("Getting preference [%s=%s]",key,value);return value};WebStorageDecorator.prototype.defineItem=function(pref){var self=this;var key=pref.name;this._items.push(pref);var propertyDescriptor={enumerable:true,configurable:true,get:function(){return self.getItem(key)},set:function(val){return self.setItem(self._prefix+key,val)}};Object.defineProperty(this,key,propertyDescriptor);return pref};WebStorageDecorator.prototype.setItem=function(key,value,type){this._ensureItemWritable(key);this.log.debug("Setting preference to storage [%s=%s]",key,value);if(value===null){return this.removeItem(key)}else{this._notify(key,this.getItem(key),value);return this._storage.setItem(this._prefix+key,value,type)}};WebStorageDecorator.prototype.removeItem=function(key){this._notify(key,this.getItem(key),null);this.log.debug("Removing preference from storage [%s]",key);return this._storage.removeItem(this._prefix+key)};WebStorageDecorator.prototype.clear=function(){var self=this;this._notify(null,null,null);this.log.debug("Clearing preferences");this._eventsEnabled=false;Object.keys(this._storage).filter(function(key){return key.indexOf(self._prefix)===0}).forEach(function(key){self.removeItem(key.substr(self.prefix.length))});this._eventsEnabled=true};WebStorageDecorator.prototype.key=function(n){return this._items[n]?this._items[n].name:null};WebStorageDecorator.prototype.keys=function(){var self=this;var keys=Object.keys(this._storage).filter(function(key){return key.indexOf(self._prefix)===0});if(keys.length===0){return[]}return keys.map(function(key){return key.slice(self._prefix.length)})};WebStorageDecorator.prototype._getItemDefinition=function(key){var pref=this._items.filter(function(item){return key===item.name})[0];return pref||null};WebStorageDecorator.prototype._notify=function(key,oldVal,newVal){if(!this._eventsEnabled){return}var self=this;var eventTargets=Array.isArray(this.eventTarget)?this.eventTarget:[this.eventTarget];eventTargets.filter(function(target){return target!==undefined&&target!==null}).forEach(function(eventTarget){if(typeof eventTarget.dispatchEvent!=="function"){var message="Cannot dispatch StorageEvent for preferences. "+"An event target was provided, but it does not implement the EventTarget interface. [%s, %s, %s]";self.log.warn(message,key,oldVal,newVal);return}var storageEvent=new StorageEvent("storage");storageEvent.initStorageEvent("storage",false,false,key,oldVal,newVal,self._prefix,self);process.nextTick(function(){if(self.log.level()<=bunyan.DEBUG){self.log.debug("Sending StorageEvent [%s] ",storageEvent)}eventTarget.dispatchEvent(storageEvent)})})};WebStorageDecorator.prototype._ensureItemWritable=function(key){var itemDefinition=this._getItemDefinition(key);if(itemDefinition&&itemDefinition.readonly){var errorMessage=util.format("Attempted to modify readonly preference [%s]",key);this.log.warn(errorMessage);throw new VError(errorMessage)}};module.exports=WebStorageDecorator}).call(this,require("_process"))},{"../../core/widget-storage":203,"../../util/logger-factory":248,"../../util/util":250,"../../util/verror":251,"./storage-event":244,_process:420,"browser-bunyan":2}],246:[function(require,module,exports){"use strict";var Handlebars=require("handlebars/dist/handlebars.min");var HandlebarsIntl=require("handlebars-intl");module.exports={registerWith:registerWith};function registerWith(hbs){var mockInstance=Handlebars.create();var helpers={};mockInstance.registerHelper=function registerHelper(name,helper){if(typeof name==="string"){helpers[name]=helper}else{Object.keys(name).forEach(function(helperName){helpers[helperName]=name[helperName]})}};HandlebarsIntl.registerWith(mockInstance);if(helpers.formatNumber){var formatNumberOriginal=helpers.formatNumber;helpers.formatNumber=function formatNumber(num){var args=[].slice.call(arguments);args[0]=Number(num);return formatNumberOriginal.apply(this,args)}}hbs.registerHelper(helpers)}},{"handlebars-intl":5,"handlebars/dist/handlebars.min":28}],247:[function(require,module,exports){(function(global){"use strict";var RTL_LOCALES=["ar","iw","he","dv","ha","fa","ps","ur","yi","ji"];module.exports={defaultLocale:"en",intlSupported:typeof global.Intl!=="undefined",getDirection:function(locale){return locale.length>=2&&RTL_LOCALES.indexOf(locale.substr(0,2))>=0?"rtl":"ltr"},chooseBestLocale:function(availableLocales,desiredLocale){var candidate=desiredLocale;while(candidate){if(Array.prototype.indexOf.call(availableLocales,candidate)>-1){return candidate}var pos=candidate.lastIndexOf("-");if(pos<0){return}if(pos>=2&&candidate.charAt(pos-2)==="-"){pos-=2}candidate=candidate.substring(0,pos)}}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],248:[function(require,module,exports){"use strict";var bunyan=require("browser-bunyan");var util=require("../util/util");var loggerMap={};var lastLogger=null;var loggerFactory={defaultLoggerName:"logger",defaultLogLevel:"info"};loggerFactory.createLogger=function(opts){opts=opts||{};var parentLog=opts.parentLog||null;var loggerName=opts.loggerName||this.defaultLoggerName;var logLevel=opts.logLevel||this.defaultLogLevel;var appendId=opts.appendId||false;if(appendId){loggerName+="/"+util.randomId()}var logger;if(parentLog){logger=parentLog.child({childName:loggerName})}else{logger=bunyan.createLogger({name:loggerName,streams:[{level:logLevel,stream:new bunyan.ConsoleFormattedStream,type:"raw"}],src:bunyan.resolveLevel(logLevel)<=bunyan.DEBUG})}loggerMap[loggerName]=logger;lastLogger=logger;return logger};loggerFactory.getLogger=function(loggerName){if(loggerName&&loggerMap[loggerName]){return loggerMap[loggerName]}else if(lastLogger){return lastLogger}else{return loggerFactory.createLogger()}};module.exports=loggerFactory},{"../util/util":250,"browser-bunyan":2}],249:[function(require,module,exports){"use strict";function isResponseOk(response){if(typeof response.ok==="boolean"){return response.ok}var status=response.status;return status>=200&&status<=299}function createError(response){var message=response.statusText||"Response status "+(response.status||"unknown");return new Error(message)}module.exports={isResponseOk:isResponseOk,createError:createError}},{}],250:[function(require,module,exports){(function(global){"use strict";var bunyan=require("browser-bunyan");var _={cloneDeep:require("lodash/cloneDeep"),merge:require("lodash/merge"),omit:require("lodash/omit"),assign:require("lodash/assign")};var util={};util.parseBoolean=function(val){return(typeof val==="boolean"||val instanceof Boolean)&&val==true||(typeof val==="string"||val instanceof String)&&/^\s*true\s*$/i.test(val)||(typeof val==="number"||val instanceof Number)&&val!=0};util.isUrlAbsolute=function(url){var absoluteRegex=/^https?:\/\/|file?:\/\//i;return absoluteRegex.test(url)};util.isUrlSiteRelative=function(url){return url.indexOf("/")===0};util.isUrlDocumentRelative=function(url){return!(util.isUrlAbsolute(url)||util.isUrlSiteRelative(url))};util.isRunningOnFilesystem=function(){return typeof global.location!=="undefined"&&global.location.protocol==="file:"};util.isUrlForFile=function(url){var urlIsAbsoluteForFile=/^file:/.test(url);var urlIsRelativeForFile=util.isRunningOnFilesystem()&&util.isUrlDocumentRelative(url);return urlIsAbsoluteForFile||urlIsRelativeForFile};util.merge=_.merge;util.assign=_.assign;util.omit=_.omit;util.startsWith=function(string,target,position){position=position||0;return string.substr(position,target.length)===target};util.endsWith=function(string,target,position){if(String.prototype.endsWith){return string.endsWith(target,position)}else{var subjectString=string.toString();if(typeof position!=="number"||!isFinite(position)||Math.floor(position)!==position||position>subjectString.length){position=subjectString.length}position-=target.length;var lastIndex=subjectString.indexOf(target,position);return lastIndex!==-1&&lastIndex===position}};util.cloneDeep=function(){try{return _.cloneDeep.apply(_,Array.prototype.slice.call(arguments))}catch(e){console.warn(e);throw e}};util.isArray=_.isArray;util.format=function(f){if(f===null){return"null"}if(typeof f!=="string"){return f.toString()}var formatRegExp=/%[sdj%]/g;var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}});for(var x=args[i];i<len;x=args[++i]){str+=" "+x}return str};util.getDescendantLocales=function(locale){locale=locale.toLowerCase();var descendantLocales=[];var parts=locale.split("-");var part;while(part=parts.shift()){var previousDescendant=descendantLocales[descendantLocales.length-1];descendantLocales.push((previousDescendant?previousDescendant+"-":"")+part)}return descendantLocales};util.randomId=function(){return Math.random().toString(36).substring(7)};util.replacePathVars=function(path,varMap,log){for(var urlVar in varMap){if(varMap.hasOwnProperty(urlVar)){var varRegexp=new RegExp("\\$\\("+urlVar+"\\)","g");if(log&&log.level()<=bunyan.DEBUG&&varRegexp.test(path)){log.debug("Updating resource url. Replacing %s for %s in [%s]",varRegexp,varMap[urlVar],path)}path=path.replace(varRegexp,varMap[urlVar])}}return path};util.getContentBodyAndTypeFromResponse=function(response){return response.text().then(function(text){text=text.trim();var contentType=response.headers.get("content-type");var type=null,err=null;if(contentType&&contentType.indexOf("/json")!==-1){type="json"}else if(contentType&&contentType.indexOf("text/html")!==-1){type="html"}else if(typeof contentType==="string"&&contentType.length>0){err=new Error("Content type not supported for rendering: "+contentType)}else if(text&&util.startsWith(text,"{")){type="json"}else if(text&&util.startsWith(text,"<")){type="html"}else{err=new Error("Undefined content type for response.")}if(err){throw err}return{type:type,body:type==="json"?JSON.parse(text):text}})};util.ensureElementBelongsToItem=function(itemName,descendantEl){if(!itemName||!descendantEl){return false}var parentEl=descendantEl;var parentItemName;while(parentEl){parentItemName=typeof parentEl.getAttribute==="function"?parentEl.getAttribute("data-widget"):null;if(parentItemName){return parentItemName===itemName}parentEl=parentEl.parentNode}return false};util.cloneWidgetInstance=function cloneWidgetInstance(widgetInstance){var clone=this.cloneDeep(widgetInstance);var descriptorMap=Object.getOwnPropertyNames(widgetInstance).reduce(function(acc,propName){var descriptor=Object.getOwnPropertyDescriptor(widgetInstance,propName);if(!descriptor.enumerable){acc[propName]=descriptor}return acc},{});Object.defineProperties(clone,descriptorMap);return clone};module.exports=util}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"browser-bunyan":2,"lodash/assign":164,"lodash/cloneDeep":165,"lodash/merge":188,"lodash/omit":189}],251:[function(require,module,exports){function VError(options){var args,obj,causedBy,ctor,tailmsg;if(!(this instanceof VError)){args=Array.prototype.slice.call(arguments,0);obj=Object.create(VError.prototype);VError.apply(obj,arguments);return obj}if(options instanceof Error||typeof options==="object"){args=Array.prototype.slice.call(arguments,1)}else{args=Array.prototype.slice.call(arguments,0);options=undefined}if(!options||!options.strict){args=args.map(function(a){return a===null?"null":a===undefined?"undefined":a})}tailmsg=args.length>0?args.join("; "):"";this.jse_shortmsg=tailmsg;this.jse_summary=tailmsg;if(options){causedBy=options.cause;if(!causedBy||!(options.cause instanceof Error))causedBy=options;if(causedBy&&causedBy instanceof Error){this.jse_cause=causedBy;this.jse_summary+=": "+causedBy.message}}this.message=this.jse_summary;Error.call(this,this.jse_summary);if(Error.captureStackTrace){ctor=options?options.constructorOpt:undefined;ctor=ctor||arguments.callee;Error.captureStackTrace(this,ctor)}return this}VError.prototype=Error.prototype;VError.prototype.name="Widget Error";VError.prototype.toString=function ve_toString(){var str=this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name;if(this.message)str+=": "+this.message;return str};VError.prototype.cause=function ve_cause(){return this.jse_cause};VError.prototype.hasCode=function ve_hasCode(code){if(!code)return false;var codes=Object.prototype.toString.call(code)!=="[object Array]"?[code]:code;if(codes.length===0)return false;var error=this;var found=false;while(error){if(error.code&&codes.indexOf(error.code)>-1){found=true;break}error=error.cause()}return found};module.exports=VError},{}],252:[function(require,module,exports){arguments[4][2][0].apply(exports,arguments)},{dup:2}],253:[function(require,module,exports){arguments[4][3][0].apply(exports,arguments)},{dup:3,"handlebars/dist/handlebars.min":254}],254:[function(require,module,exports){arguments[4][4][0].apply(exports,arguments)},{dup:4}],255:[function(require,module,exports){arguments[4][4][0].apply(exports,arguments)},{dup:4}],256:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{"./_getNative":314,"./_root":351,dup:44}],257:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{"./_hashClear":321,"./_hashDelete":322,"./_hashGet":323,"./_hashHas":324,"./_hashSet":325,dup:45}],258:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{"./_listCacheClear":334,"./_listCacheDelete":335,"./_listCacheGet":336,"./_listCacheHas":337,"./_listCacheSet":338,dup:46}],259:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{"./_getNative":314,"./_root":351,dup:47}],260:[function(require,module,exports){arguments[4][48][0].apply(exports,arguments)},{"./_mapCacheClear":339,"./_mapCacheDelete":340,"./_mapCacheGet":341,"./_mapCacheHas":342,"./_mapCacheSet":343,dup:48}],261:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./_getNative":314,"./_root":351,dup:49}],262:[function(require,module,exports){arguments[4][50][0].apply(exports,arguments)},{"./_getNative":314,"./_root":351,dup:50}],263:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"./_ListCache":258,"./_stackClear":355,"./_stackDelete":356,"./_stackGet":357,"./_stackHas":358,"./_stackSet":359,dup:51}],264:[function(require,module,exports){arguments[4][52][0].apply(exports,arguments)},{"./_root":351,dup:52}],265:[function(require,module,exports){arguments[4][53][0].apply(exports,arguments)},{"./_root":351,dup:53}],266:[function(require,module,exports){arguments[4][54][0].apply(exports,arguments)},{"./_getNative":314,"./_root":351,dup:54}],267:[function(require,module,exports){arguments[4][55][0].apply(exports,arguments)},{dup:55}],268:[function(require,module,exports){arguments[4][56][0].apply(exports,arguments)},{dup:56}],269:[function(require,module,exports){arguments[4][57][0].apply(exports,arguments)},{dup:57}],270:[function(require,module,exports){arguments[4][58][0].apply(exports,arguments)},{"./_baseTimes":294,"./_isIndex":329,"./isArguments":365,"./isArray":366,"./isBuffer":369,"./isTypedArray":377,dup:58}],271:[function(require,module,exports){arguments[4][60][0].apply(exports,arguments)},{dup:60}],272:[function(require,module,exports){arguments[4][61][0].apply(exports,arguments)},{"./_baseAssignValue":277,"./eq":363,dup:61}],273:[function(require,module,exports){arguments[4][62][0].apply(exports,arguments)},{"./_baseAssignValue":277,"./eq":363,dup:62}],274:[function(require,module,exports){arguments[4][63][0].apply(exports,arguments)},{"./eq":363,dup:63}],275:[function(require,module,exports){arguments[4][64][0].apply(exports,arguments)},{"./_copyObject":303,"./keys":378,dup:64}],276:[function(require,module,exports){arguments[4][65][0].apply(exports,arguments)},{"./_copyObject":303,"./keysIn":379,dup:65}],277:[function(require,module,exports){arguments[4][66][0].apply(exports,arguments)},{"./_defineProperty":309,dup:66}],278:[function(require,module,exports){arguments[4][67][0].apply(exports,arguments)},{"./_Stack":263,"./_arrayEach":268,"./_assignValue":273,"./_baseAssign":275,"./_baseAssignIn":276,"./_cloneBuffer":297,"./_copyArray":302,"./_copySymbols":304,"./_copySymbolsIn":305,"./_getAllKeys":311,"./_getAllKeysIn":312,"./_getTag":319,"./_initCloneArray":326,"./_initCloneByTag":327,"./_initCloneObject":328,"./isArray":366,"./isBuffer":369,"./isMap":372,"./isObject":373,"./isSet":376,"./keys":378,dup:67}],279:[function(require,module,exports){arguments[4][68][0].apply(exports,arguments)},{"./isObject":373,dup:68}],280:[function(require,module,exports){arguments[4][70][0].apply(exports,arguments)},{"./_createBaseFor":308,dup:70}],281:[function(require,module,exports){arguments[4][72][0].apply(exports,arguments)},{"./_arrayPush":271,"./isArray":366,dup:72}],282:[function(require,module,exports){
arguments[4][73][0].apply(exports,arguments)},{"./_Symbol":264,"./_getRawTag":316,"./_objectToString":348,dup:73}],283:[function(require,module,exports){arguments[4][74][0].apply(exports,arguments)},{"./_baseGetTag":282,"./isObjectLike":374,dup:74}],284:[function(require,module,exports){arguments[4][75][0].apply(exports,arguments)},{"./_getTag":319,"./isObjectLike":374,dup:75}],285:[function(require,module,exports){arguments[4][76][0].apply(exports,arguments)},{"./_isMasked":332,"./_toSource":360,"./isFunction":370,"./isObject":373,dup:76}],286:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"./_getTag":319,"./isObjectLike":374,dup:77}],287:[function(require,module,exports){arguments[4][78][0].apply(exports,arguments)},{"./_baseGetTag":282,"./isLength":371,"./isObjectLike":374,dup:78}],288:[function(require,module,exports){arguments[4][79][0].apply(exports,arguments)},{"./_isPrototype":333,"./_nativeKeys":345,dup:79}],289:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{"./_isPrototype":333,"./_nativeKeysIn":346,"./isObject":373,dup:80}],290:[function(require,module,exports){arguments[4][81][0].apply(exports,arguments)},{"./_Stack":263,"./_assignMergeValue":272,"./_baseFor":280,"./_baseMergeDeep":291,"./_safeGet":352,"./isObject":373,"./keysIn":379,dup:81}],291:[function(require,module,exports){arguments[4][82][0].apply(exports,arguments)},{"./_assignMergeValue":272,"./_cloneBuffer":297,"./_cloneTypedArray":301,"./_copyArray":302,"./_initCloneObject":328,"./_safeGet":352,"./isArguments":365,"./isArray":366,"./isArrayLikeObject":368,"./isBuffer":369,"./isFunction":370,"./isObject":373,"./isPlainObject":375,"./isTypedArray":377,"./toPlainObject":383,dup:82}],292:[function(require,module,exports){arguments[4][83][0].apply(exports,arguments)},{"./_overRest":350,"./_setToString":353,"./identity":364,dup:83}],293:[function(require,module,exports){arguments[4][84][0].apply(exports,arguments)},{"./_defineProperty":309,"./constant":362,"./identity":364,dup:84}],294:[function(require,module,exports){arguments[4][86][0].apply(exports,arguments)},{dup:86}],295:[function(require,module,exports){arguments[4][88][0].apply(exports,arguments)},{dup:88}],296:[function(require,module,exports){arguments[4][91][0].apply(exports,arguments)},{"./_Uint8Array":265,dup:91}],297:[function(require,module,exports){arguments[4][92][0].apply(exports,arguments)},{"./_root":351,dup:92}],298:[function(require,module,exports){arguments[4][93][0].apply(exports,arguments)},{"./_cloneArrayBuffer":296,dup:93}],299:[function(require,module,exports){arguments[4][94][0].apply(exports,arguments)},{dup:94}],300:[function(require,module,exports){arguments[4][95][0].apply(exports,arguments)},{"./_Symbol":264,dup:95}],301:[function(require,module,exports){arguments[4][96][0].apply(exports,arguments)},{"./_cloneArrayBuffer":296,dup:96}],302:[function(require,module,exports){arguments[4][97][0].apply(exports,arguments)},{dup:97}],303:[function(require,module,exports){arguments[4][98][0].apply(exports,arguments)},{"./_assignValue":273,"./_baseAssignValue":277,dup:98}],304:[function(require,module,exports){arguments[4][99][0].apply(exports,arguments)},{"./_copyObject":303,"./_getSymbols":317,dup:99}],305:[function(require,module,exports){arguments[4][100][0].apply(exports,arguments)},{"./_copyObject":303,"./_getSymbolsIn":318,dup:100}],306:[function(require,module,exports){arguments[4][101][0].apply(exports,arguments)},{"./_root":351,dup:101}],307:[function(require,module,exports){arguments[4][102][0].apply(exports,arguments)},{"./_baseRest":292,"./_isIterateeCall":330,dup:102}],308:[function(require,module,exports){arguments[4][103][0].apply(exports,arguments)},{dup:103}],309:[function(require,module,exports){arguments[4][105][0].apply(exports,arguments)},{"./_getNative":314,dup:105}],310:[function(require,module,exports){arguments[4][107][0].apply(exports,arguments)},{dup:107}],311:[function(require,module,exports){arguments[4][108][0].apply(exports,arguments)},{"./_baseGetAllKeys":281,"./_getSymbols":317,"./keys":378,dup:108}],312:[function(require,module,exports){arguments[4][109][0].apply(exports,arguments)},{"./_baseGetAllKeys":281,"./_getSymbolsIn":318,"./keysIn":379,dup:109}],313:[function(require,module,exports){arguments[4][110][0].apply(exports,arguments)},{"./_isKeyable":331,dup:110}],314:[function(require,module,exports){arguments[4][111][0].apply(exports,arguments)},{"./_baseIsNative":285,"./_getValue":320,dup:111}],315:[function(require,module,exports){arguments[4][112][0].apply(exports,arguments)},{"./_overArg":349,dup:112}],316:[function(require,module,exports){arguments[4][113][0].apply(exports,arguments)},{"./_Symbol":264,dup:113}],317:[function(require,module,exports){arguments[4][114][0].apply(exports,arguments)},{"./_arrayFilter":269,"./stubArray":381,dup:114}],318:[function(require,module,exports){arguments[4][115][0].apply(exports,arguments)},{"./_arrayPush":271,"./_getPrototype":315,"./_getSymbols":317,"./stubArray":381,dup:115}],319:[function(require,module,exports){arguments[4][116][0].apply(exports,arguments)},{"./_DataView":256,"./_Map":259,"./_Promise":261,"./_Set":262,"./_WeakMap":266,"./_baseGetTag":282,"./_toSource":360,dup:116}],320:[function(require,module,exports){arguments[4][117][0].apply(exports,arguments)},{dup:117}],321:[function(require,module,exports){arguments[4][118][0].apply(exports,arguments)},{"./_nativeCreate":344,dup:118}],322:[function(require,module,exports){arguments[4][119][0].apply(exports,arguments)},{dup:119}],323:[function(require,module,exports){arguments[4][120][0].apply(exports,arguments)},{"./_nativeCreate":344,dup:120}],324:[function(require,module,exports){arguments[4][121][0].apply(exports,arguments)},{"./_nativeCreate":344,dup:121}],325:[function(require,module,exports){arguments[4][122][0].apply(exports,arguments)},{"./_nativeCreate":344,dup:122}],326:[function(require,module,exports){arguments[4][123][0].apply(exports,arguments)},{dup:123}],327:[function(require,module,exports){arguments[4][124][0].apply(exports,arguments)},{"./_cloneArrayBuffer":296,"./_cloneDataView":298,"./_cloneRegExp":299,"./_cloneSymbol":300,"./_cloneTypedArray":301,dup:124}],328:[function(require,module,exports){arguments[4][125][0].apply(exports,arguments)},{"./_baseCreate":279,"./_getPrototype":315,"./_isPrototype":333,dup:125}],329:[function(require,module,exports){arguments[4][127][0].apply(exports,arguments)},{dup:127}],330:[function(require,module,exports){arguments[4][128][0].apply(exports,arguments)},{"./_isIndex":329,"./eq":363,"./isArrayLike":367,"./isObject":373,dup:128}],331:[function(require,module,exports){arguments[4][130][0].apply(exports,arguments)},{dup:130}],332:[function(require,module,exports){arguments[4][131][0].apply(exports,arguments)},{"./_coreJsData":306,dup:131}],333:[function(require,module,exports){arguments[4][132][0].apply(exports,arguments)},{dup:132}],334:[function(require,module,exports){arguments[4][133][0].apply(exports,arguments)},{dup:133}],335:[function(require,module,exports){arguments[4][134][0].apply(exports,arguments)},{"./_assocIndexOf":274,dup:134}],336:[function(require,module,exports){arguments[4][135][0].apply(exports,arguments)},{"./_assocIndexOf":274,dup:135}],337:[function(require,module,exports){arguments[4][136][0].apply(exports,arguments)},{"./_assocIndexOf":274,dup:136}],338:[function(require,module,exports){arguments[4][137][0].apply(exports,arguments)},{"./_assocIndexOf":274,dup:137}],339:[function(require,module,exports){arguments[4][138][0].apply(exports,arguments)},{"./_Hash":257,"./_ListCache":258,"./_Map":259,dup:138}],340:[function(require,module,exports){arguments[4][139][0].apply(exports,arguments)},{"./_getMapData":313,dup:139}],341:[function(require,module,exports){arguments[4][140][0].apply(exports,arguments)},{"./_getMapData":313,dup:140}],342:[function(require,module,exports){arguments[4][141][0].apply(exports,arguments)},{"./_getMapData":313,dup:141}],343:[function(require,module,exports){arguments[4][142][0].apply(exports,arguments)},{"./_getMapData":313,dup:142}],344:[function(require,module,exports){arguments[4][144][0].apply(exports,arguments)},{"./_getNative":314,dup:144}],345:[function(require,module,exports){arguments[4][145][0].apply(exports,arguments)},{"./_overArg":349,dup:145}],346:[function(require,module,exports){arguments[4][146][0].apply(exports,arguments)},{dup:146}],347:[function(require,module,exports){arguments[4][147][0].apply(exports,arguments)},{"./_freeGlobal":310,dup:147}],348:[function(require,module,exports){arguments[4][148][0].apply(exports,arguments)},{dup:148}],349:[function(require,module,exports){arguments[4][149][0].apply(exports,arguments)},{dup:149}],350:[function(require,module,exports){arguments[4][150][0].apply(exports,arguments)},{"./_apply":267,dup:150}],351:[function(require,module,exports){arguments[4][152][0].apply(exports,arguments)},{"./_freeGlobal":310,dup:152}],352:[function(require,module,exports){arguments[4][153][0].apply(exports,arguments)},{dup:153}],353:[function(require,module,exports){arguments[4][154][0].apply(exports,arguments)},{"./_baseSetToString":293,"./_shortOut":354,dup:154}],354:[function(require,module,exports){arguments[4][155][0].apply(exports,arguments)},{dup:155}],355:[function(require,module,exports){arguments[4][156][0].apply(exports,arguments)},{"./_ListCache":258,dup:156}],356:[function(require,module,exports){arguments[4][157][0].apply(exports,arguments)},{dup:157}],357:[function(require,module,exports){arguments[4][158][0].apply(exports,arguments)},{dup:158}],358:[function(require,module,exports){arguments[4][159][0].apply(exports,arguments)},{dup:159}],359:[function(require,module,exports){arguments[4][160][0].apply(exports,arguments)},{"./_ListCache":258,"./_Map":259,"./_MapCache":260,dup:160}],360:[function(require,module,exports){arguments[4][163][0].apply(exports,arguments)},{dup:163}],361:[function(require,module,exports){arguments[4][165][0].apply(exports,arguments)},{"./_baseClone":278,dup:165}],362:[function(require,module,exports){arguments[4][166][0].apply(exports,arguments)},{dup:166}],363:[function(require,module,exports){arguments[4][167][0].apply(exports,arguments)},{dup:167}],364:[function(require,module,exports){arguments[4][169][0].apply(exports,arguments)},{dup:169}],365:[function(require,module,exports){arguments[4][170][0].apply(exports,arguments)},{"./_baseIsArguments":283,"./isObjectLike":374,dup:170}],366:[function(require,module,exports){arguments[4][171][0].apply(exports,arguments)},{dup:171}],367:[function(require,module,exports){arguments[4][172][0].apply(exports,arguments)},{"./isFunction":370,"./isLength":371,dup:172}],368:[function(require,module,exports){arguments[4][173][0].apply(exports,arguments)},{"./isArrayLike":367,"./isObjectLike":374,dup:173}],369:[function(require,module,exports){arguments[4][174][0].apply(exports,arguments)},{"./_root":351,"./stubFalse":382,dup:174}],370:[function(require,module,exports){arguments[4][175][0].apply(exports,arguments)},{"./_baseGetTag":282,"./isObject":373,dup:175}],371:[function(require,module,exports){arguments[4][176][0].apply(exports,arguments)},{dup:176}],372:[function(require,module,exports){arguments[4][177][0].apply(exports,arguments)},{"./_baseIsMap":284,"./_baseUnary":295,"./_nodeUtil":347,dup:177}],373:[function(require,module,exports){arguments[4][178][0].apply(exports,arguments)},{dup:178}],374:[function(require,module,exports){arguments[4][179][0].apply(exports,arguments)},{dup:179}],375:[function(require,module,exports){arguments[4][180][0].apply(exports,arguments)},{"./_baseGetTag":282,"./_getPrototype":315,"./isObjectLike":374,dup:180}],376:[function(require,module,exports){arguments[4][181][0].apply(exports,arguments)},{"./_baseIsSet":286,"./_baseUnary":295,"./_nodeUtil":347,dup:181}],377:[function(require,module,exports){arguments[4][183][0].apply(exports,arguments)},{"./_baseIsTypedArray":287,"./_baseUnary":295,"./_nodeUtil":347,dup:183}],378:[function(require,module,exports){arguments[4][184][0].apply(exports,arguments)},{"./_arrayLikeKeys":270,"./_baseKeys":288,"./isArrayLike":367,dup:184}],379:[function(require,module,exports){arguments[4][185][0].apply(exports,arguments)},{"./_arrayLikeKeys":270,"./_baseKeysIn":289,"./isArrayLike":367,dup:185}],380:[function(require,module,exports){arguments[4][188][0].apply(exports,arguments)},{"./_baseMerge":290,"./_createAssigner":307,dup:188}],381:[function(require,module,exports){arguments[4][190][0].apply(exports,arguments)},{dup:190}],382:[function(require,module,exports){arguments[4][191][0].apply(exports,arguments)},{dup:191}],383:[function(require,module,exports){arguments[4][192][0].apply(exports,arguments)},{"./_copyObject":303,"./keysIn":379,dup:192}],384:[function(require,module,exports){arguments[4][194][0].apply(exports,arguments)},{dup:194}],385:[function(require,module,exports){"use strict";var cxpUtil=require("./cxp-util");var bunyan=require("browser-bunyan");var CxpConfiguration=function(opts){opts=opts||{};var loggerName="cxp-web";this.log=opts.log?opts.log.child({childName:loggerName}):bunyan.createLogger({name:loggerName||"logger",streams:Array.isArray(opts.logStreams)?opts.logStreams:[{level:opts.logLevel||"info",stream:new bunyan.ConsoleFormattedStream,type:"raw"}]});this.settings={}};CxpConfiguration.prototype.util=cxpUtil;CxpConfiguration.prototype.clone=function(){var settings=this.settings;var newConfig=new CxpConfiguration({logLevel:settings.logLevel});newConfig.settings=Object.keys(settings).reduce(function(obj,propName){obj[propName]=settings[propName];return obj},{});return newConfig};CxpConfiguration.prototype.set=function(name,value){this.settings[name]=value};CxpConfiguration.prototype.get=function(name){var setting=this.settings[name];return typeof setting==="function"?setting():setting};CxpConfiguration.prototype.enable=function(name){this.log.warn("CxpConfiguration.enable is deprecated, please use CxpConfiguration.set("+name+", true)");this.settings[name]=true};CxpConfiguration.prototype.disable=function(name){this.log.warn("CxpConfiguration.disable is deprecated, please use CxpConfiguration.set("+name+", false)");this.settings[name]=false};CxpConfiguration.prototype.enabled=function(name){this.log.warn("CxpConfiguration.enabled is deprecated, please use CxpConfiguration.get("+name+")");return!!this.settings[name]};CxpConfiguration.prototype.disabled=function(name){this.log.warn("CxpConfiguration.disabled is deprecated, please use CxpConfiguration.get("+name+")");return!this.settings[name]};CxpConfiguration.prototype.getLogger=function(){return this.log};CxpConfiguration.prototype.toSerializableObject=function(){var stringifyBlacklist=["logStreams","storageFactory"];return JSON.parse(JSON.stringify(this.settings,function(key,value){return stringifyBlacklist.indexOf(key)>-1?undefined:value}))};function createConfiguration(cxpOptions){return new CxpConfiguration(cxpOptions)}module.exports={Configuration:CxpConfiguration,createInstance:createConfiguration}},{"./cxp-util":386,"browser-bunyan":252}],386:[function(require,module,exports){"use strict";module.exports={getPreference:function(item,name){return item.preferences[name]||null},getPreferenceValue:function(item,name){var pref=this.getPreference(item,name);return pref?pref.value:null}}},{}],387:[function(require,module,exports){"use strict";var DatasourceResolver=require("backbase-widget-engine/src/datasource/datasource-resolver");var resolverHelpers=require("backbase-widget-engine/src/datasource/datasource-resolver-helpers");module.exports=BreadcrumbDatasourceResolver;function BreadcrumbDatasourceResolver(datasource){this._datasource=datasource}BreadcrumbDatasourceResolver.prototype.resolveUrl=function(context){var url=this._datasource.uri;var urlComponents=url.split(":");if(urlComponents.length!==2){throw new Error("Invalid breadcrumb datasource uri: ",url)}var params=[].concat(this._datasource.params||[]);var linkId=resolverHelpers.trimSlashes(urlComponents[1]);if(linkId){params.push({name:"uuid",value:linkId})}var apiRoot=context.apiRoot||"";var endpointUrl=apiRoot+"/portal/navigation/breadcrumb";var queryString=resolverHelpers.resolveQueryString(context,params);if(queryString){endpointUrl+="?"+queryString}return endpointUrl};BreadcrumbDatasourceResolver.prototype.processResponse=function processResponse(response){return response.json()};BreadcrumbDatasourceResolver.getInstance=DatasourceResolver.createFactoryFunction("breadcrumb",BreadcrumbDatasourceResolver)},{"backbase-widget-engine/src/datasource/datasource-resolver":206,"backbase-widget-engine/src/datasource/datasource-resolver-helpers":205}],388:[function(require,module,exports){"use strict";var DatasourceResolver=require("backbase-widget-engine/src/datasource/datasource-resolver");var resolverHelpers=require("backbase-widget-engine/src/datasource/datasource-resolver-helpers");var util=require("backbase-widget-engine/src/util/util");var ASSET_PARAM="assets";module.exports=ContentrenderedDatasourceResolver;function ContentrenderedDatasourceResolver(datasource){this._datasource=datasource}ContentrenderedDatasourceResolver.prototype.resolveUrl=function(context){var url=this._datasource.uri;var urlComponents=url.split(":");if(urlComponents.length!==2){throw new Error("Invalid contentrendered datasource uri: ",url)}var params=(this._datasource.params||[]).map(function(param){var resolvedParam=resolverHelpers.resolveParameter(context,param);if(resolvedParam.name==="template"){resolvedParam.name="templateUrl"}return resolvedParam}).filter(function(param){return param.name&&param.name!==ASSET_PARAM});var contentId=resolverHelpers.resolveExpression(context,resolverHelpers.trimSlashes(urlComponents[1]));if(contentId){params.push({name:"uuid",value:contentId})}var contextItemName=context.contextItemName;if(contextItemName){params.push({name:"contextItemName",value:contextItemName})}var apiRoot=context.apiRoot||"";var endpointUrl=apiRoot+"/portal/contenttemplates/rendered";var encodedParams=resolverHelpers.buildQueryString(params);if(encodedParams){endpointUrl+="?"+encodedParams}return endpointUrl};ContentrenderedDatasourceResolver.prototype.processResponse=function processResponse(response,context){var self=this;return response.text().then(function(html){if(util.isRunningOnFilesystem()){var contextRoot=context.contextRoot||"";var remoteContextRoot=context.remoteContextRoot||"";var assetsParam=self._datasource.params.filter(function(param){return param.name===ASSET_PARAM})[0]||{};var localAssets=assetsParam.value==="local";var baseUrl=localAssets||!remoteContextRoot?contextRoot:remoteContextRoot;return util.isUrlAbsolute(baseUrl)?self._makeReferenceAbsolute(html,baseUrl):html}else{return html}})};ContentrenderedDatasourceResolver.prototype._makeReferenceAbsolute=function(html,baseUrl){if(typeof DOMParser!=="undefined"){var parser=new DOMParser;var doc=parser.parseFromString(html,"text/html");this._getElementObjectsByAttr(doc.body,"href").concat(this._getElementObjectsByAttr(doc.body,"src")).filter(function(item){return item.value&&util.isUrlSiteRelative(item.value)}).forEach(function(item){var absHref=new URL(item.value,baseUrl).href;item.element.setAttribute(item.attr,absHref)});return doc.body.innerHTML}else{return html}};ContentrenderedDatasourceResolver.prototype._getElementObjectsByAttr=function(node,attr){return Array.prototype.map.call(node.querySelectorAll("["+attr+"]"),function(el){return{attr:attr,value:el.getAttribute(attr),element:el}})};ContentrenderedDatasourceResolver.getInstance=DatasourceResolver.createFactoryFunction("contentrendered",ContentrenderedDatasourceResolver)},{"backbase-widget-engine/src/datasource/datasource-resolver":206,"backbase-widget-engine/src/datasource/datasource-resolver-helpers":205,"backbase-widget-engine/src/util/util":250}],389:[function(require,module,exports){"use strict";var DatasourceResolver=require("backbase-widget-engine/src/datasource/datasource-resolver");var xmlModelParser=require("../model/parsers/xml/model-parser");var resolverHelpers=require("backbase-widget-engine/src/datasource/datasource-resolver-helpers");module.exports=LinkDatasourceResolver;function LinkDatasourceResolver(datasource){this._datasource=datasource}LinkDatasourceResolver.prototype.resolveUrl=function(context){var url=this._datasource.uri;var urlComponents=url.split(":");if(urlComponents.length!==2){throw new Error("Invalid link datasource uri: ",url)}var params=[].concat(this._datasource.params||[]);var linkId=resolverHelpers.trimSlashes(urlComponents[1]);if(linkId){params.push({name:"f",value:"uuid(eq)"+linkId})}var depthParamExists=params.some(function(param){return param.name==="depth"});if(!depthParamExists){params.push({name:"depth",value:1})}var apiRoot=context.apiRoot||"";var portalName=context.portalName;var endpointUrl=apiRoot+"/portal/portals/"+portalName+"/links.xml";var queryString=resolverHelpers.resolveQueryString(context,params);if(queryString){endpointUrl+="?"+queryString}return endpointUrl};LinkDatasourceResolver.prototype.processResponse=function processResponse(response){return response.text().then(function(xml){var links=xmlModelParser.parseList(xml);return links&&links.length?links[0]:null})};LinkDatasourceResolver.getInstance=DatasourceResolver.createFactoryFunction("link",LinkDatasourceResolver)},{"../model/parsers/xml/model-parser":407,"backbase-widget-engine/src/datasource/datasource-resolver":206,"backbase-widget-engine/src/datasource/datasource-resolver-helpers":205}],390:[function(require,module,exports){"use strict";var DatasourceResolver=require("backbase-widget-engine/src/datasource/datasource-resolver");var resolverHelpers=require("backbase-widget-engine/src/datasource/datasource-resolver-helpers");module.exports=NavigationDatasourceResolver;function NavigationDatasourceResolver(datasource){this._datasource=datasource}NavigationDatasourceResolver.prototype.resolveUrl=function(context){var url=this._datasource.uri;var urlComponents=url.split(":");if(urlComponents.length!==2){throw new Error("Invalid navigation datasource uri: ",url)}var params=[].concat(this._datasource.params||[]);var linkId=resolverHelpers.trimSlashes(urlComponents[1]);if(linkId){params.push({name:"uuid",value:linkId})}var apiRoot=context.apiRoot||"";var endpointUrl=apiRoot+"/portal/navigation/tree";var queryString=resolverHelpers.resolveQueryString(context,params);if(queryString){endpointUrl+="?"+queryString}return endpointUrl};NavigationDatasourceResolver.prototype.processResponse=function processResponse(response){return response.json()};NavigationDatasourceResolver.getInstance=DatasourceResolver.createFactoryFunction("navigation",NavigationDatasourceResolver)},{"backbase-widget-engine/src/datasource/datasource-resolver":206,"backbase-widget-engine/src/datasource/datasource-resolver-helpers":205}],391:[function(require,module,exports){"use strict";var DatasourceResolver=require("backbase-widget-engine/src/datasource/datasource-resolver");var xmlModelParser=require("../model/parsers/xml/model-parser");var resolverHelpers=require("backbase-widget-engine/src/datasource/datasource-resolver-helpers");module.exports=PortalDatasourceResolver;function PortalDatasourceResolver(datasource){this._datasource=datasource}PortalDatasourceResolver.prototype.resolveUrl=function(context){var url=this._datasource.uri;var urlComponents=url.split(":");if(urlComponents.length!==2){throw new Error("Invalid link datasource uri: ",url)}var params=[].concat(this._datasource.params||[]);params.push({name:"pc",value:false});var apiRoot=context.apiRoot||"";var portalName=resolverHelpers.resolveExpression(context,resolverHelpers.trimSlashes(urlComponents[1]));var queryString=resolverHelpers.resolveQueryString(context,params);return apiRoot+"/portal/portals/"+portalName+".xml"+"?"+queryString};PortalDatasourceResolver.prototype.processResponse=function processResponse(response){return response.text().then(function(xml){return xmlModelParser.parse(xml)})};PortalDatasourceResolver.getInstance=DatasourceResolver.createFactoryFunction("portal",PortalDatasourceResolver)},{"../model/parsers/xml/model-parser":407,"backbase-widget-engine/src/datasource/datasource-resolver":206,"backbase-widget-engine/src/datasource/datasource-resolver-helpers":205}],392:[function(require,module,exports){"use strict";var render=require("./render/render.js");var configuration=require("./configuration/configuration.js");var xmlCxpModel=require("./model/strategies/xml-cxp-model");module.exports={getRenderer:render.createInstance,createConfiguration:configuration.createInstance,getModel:xmlCxpModel.createInstance}},{"./configuration/configuration.js":385,"./model/strategies/xml-cxp-model":410,"./render/render.js":415}],393:[function(require,module,exports){"use strict";module.exports=ItemCollectionContext;function ItemCollectionContext(config,type,portalName,filter){this._config=config;this.type=type;this._portalName=portalName;this._filter=filter||null;this._requiredParams=this._getRequiredParams();this._logger=this._config.getLogger().child({childName:"item-collection-context"})}ItemCollectionContext.prototype._getRequiredParams=function(){switch(this.type){case"link":return{depth:10,ps:50};case"page":return{depth:10};default:return null}};ItemCollectionContext.prototype.get=function(){throw new Error("Method not implemented")};ItemCollectionContext.prototype.create=function(itemModel){throw new Error("Method not implemented")};ItemCollectionContext.prototype.filter=function(name,value,operator){throw new Error("Method not implemented")}},{}],394:[function(require,module,exports){"use strict";module.exports=ItemContext;function ItemContext(config,itemName,itemType,findById,portalName){this._config=config;this.itemName=itemName;this.itemType=itemType;this._findById=findById||false;this._portalName=portalName;this._requiredParams=this._getRequiredParams();this._logger=this._config.getLogger().child({childName:"item-context"})}ItemContext.prototype._getRequiredParams=function(){var params={};var isInDesignmode=!!this._config.get("designmode");var itemType=this.itemType;if(itemType==="link"||itemType==="page"){params.depth=10}if(isInDesignmode&&(itemType==="widget"||itemType==="container"||itemType==="page")){params.designmode=true}return params};ItemContext.prototype.get=function(options){throw new Error("Method not implemented")};ItemContext.prototype.update=function(model){throw new Error("Method not implemented")};ItemContext.prototype.revert=function(){throw new Error("Method not implemented")};ItemContext.prototype.remove=function(){throw new Error("Method not implemented")}},{}],395:[function(require,module,exports){"use strict";module.exports={modifyPreference:modifyPreference,generateItemName:generateItemName,getViewHint:getViewHint};function modifyPreference(model,name,value,valueType){var preference=model.preferences[name];if(!preference){preference={name:name};model.preferences[name]=preference}preference.value=value;if(valueType){preference.type=valueType}}var lut=[];for(var i=0;i<256;i++){lut[i]=(i<16?"0":"")+i.toString(16)}function generateUUID(){var d0=Math.random()*4294967295|0;var d1=Math.random()*4294967295|0;var d2=Math.random()*4294967295|0;var d3=Math.random()*4294967295|0;return lut[d0&255]+lut[d0>>8&255]+lut[d0>>16&255]+lut[d0>>24&255]+"-"+lut[d1&255]+lut[d1>>8&255]+"-"+lut[d1>>16&15|64]+lut[d1>>24&255]+"-"+lut[d2&63|128]+lut[d2>>8&255]+"-"+lut[d2>>16&255]+lut[d2>>24&255]+lut[d3&255]+lut[d3>>8&255]+lut[d3>>16&255]+lut[d3>>24&255]}function generateItemName(extendedItemName){return extendedItemName+generateUUID()}function getViewHint(viewHintType,viewhints){var viewHintsMap={designmode:["designModeOnly"],role:["admin","manager","user","none"],input:["text-input","checkbox","select-one"],order:[]};if(!viewhints||!viewhints.length||!viewHintsMap[viewHintType]){return null}var matchedViewHint=viewhints.filter(function(viewHint){return viewHintsMap[viewHintType].indexOf(viewHint)!==-1||viewHint.slice(0,viewHintType.length)===viewHintType})[0];if(matchedViewHint&&viewHintType==="order"){var order=matchedViewHint.split("-");order=order.length===2?order[1]:null;var parsedOrder=parseFloat(order);if(!isNaN(parsedOrder)){order=parsedOrder}matchedViewHint=order}matchedViewHint=matchedViewHint||(viewHintType==="input"?"text-input":null);if(viewHintType==="designmode"){matchedViewHint=!!matchedViewHint}return matchedViewHint}},{}],396:[function(require,module,exports){"use strict";var modelHelpers=require("../core/model-helpers");module.exports=Model;function Model(configuration){this.config=configuration;this.helpers=modelHelpers}Model.prototype.items=function(itemType,opts){throw new Error("Method not implemented")};Model.prototype.item=function(itemName,itemType,opts){throw new Error("Method not implemented")};Model.prototype.itemById=function(itemId,itemType,opts){throw new Error("Method not implemented")};Model.prototype.portal=function(portalName){throw new Error("Method not implemented")}},{"../core/model-helpers":395}],397:[function(require,module,exports){"use strict";function PortalContext(config,portalName){this._config=config;Object.defineProperty(this,"portalName",{value:portalName||this._config.get("portalName")})}PortalContext.prototype.item=function(itemName,itemType,opts){throw new Error("Method not implemented")};PortalContext.prototype.itemById=function(itemId,itemType,opts){throw new Error("Method not implemented")};PortalContext.prototype.items=function(itemType,opts){throw new Error("Method not implemented")};module.exports=PortalContext},{}],398:[function(require,module,exports){"use strict";var fetch=require("backbase-widget-engine/src/fetch/filtering-fetch");var responseHelpers=require("backbase-widget-engine/src/util/response-helpers");var util=require("../../util");module.exports={RestApiConsumer:RestApiConsumer,createInstance:createInstance};function RestApiConsumer(configuration){this.configuration=configuration;var baseUrl=configuration.get("remoteContextRoot");if(typeof baseUrl!=="string"){throw new Error("RestApiConsumer needs remoteContextRoot variable to be set")}if(/\/$/.test(baseUrl)===false){baseUrl+="/"}this.baseUrl=baseUrl;this.logger=configuration.getLogger().child({childName:"rest-api-consumer"})}RestApiConsumer.prototype._encodeQueryParameters=function(params){var query=[];Object.keys(params).forEach(function(key){if(Array.isArray(params[key])){params[key].forEach(function(value){query.push(key+"[]="+encodeURIComponent(value))})}else{query.push(key+"="+encodeURIComponent(params[key]))}});return query.join("&")};RestApiConsumer.prototype._buildUrl=function(endpoint,params){var query=this._encodeQueryParameters(params||{});var url=this.baseUrl+endpoint;if(query.length>0){url+=(endpoint.indexOf("?")>=0?"&":"?")+query}return url};RestApiConsumer.prototype._makeRequest=function(endpoint,options,params){var self=this;var requestUrl=this._buildUrl(endpoint,params);this.logger.debug("Making REST request to [%s]",requestUrl);var promise=fetch(requestUrl,options).then(function(response){if(!responseHelpers.isResponseOk(response)){var error=responseHelpers.createError(response);error.response=response;throw error}self.logger.debug("Request successful server responds %s",response.status);return response});promise.catch(function(err){self.logger.error("Request failed with: %s",err)});return promise};RestApiConsumer.prototype.get=function(endpoint,params){return this._makeRequest(endpoint,{method:"GET",headers:{Pragma:"no-cache","Cache-Control":"no-cache"}},params)};RestApiConsumer.prototype.post=function(endpoint,data){var payload=util.isObject(data)?JSON.stringify(data):data;var headers={"Content-Type":determineContentType(data)};return this._makeRequest(endpoint,{method:"POST",body:payload,headers:headers})};RestApiConsumer.prototype.put=function(endpoint,data){var payload=util.isObject(data)?JSON.stringify(data):data;
var headers={"Content-Type":determineContentType(data)};return this._makeRequest(endpoint,{method:"PUT",body:payload||"",headers:headers})};RestApiConsumer.prototype.delete=function(endpoint,params){return this._makeRequest(endpoint,{method:"DELETE"},params)};function createInstance(opts){return new RestApiConsumer(opts)}function determineContentType(data){if(util.isObject(data)){return"application/json"}else if(data&&data.indexOf("<?xml")>=0){return"text/xml"}else{return"application/xml"}}},{"../../util":418,"backbase-widget-engine/src/fetch/filtering-fetch":214,"backbase-widget-engine/src/util/response-helpers":249}],399:[function(require,module,exports){"use strict";var generateProperty=require("./property-generator");var ITEM_PROPERTY_NAMES=["type","name","contextItemName","extendedItemName","parentItemName"];var BASIC_PROPERTIES=["shortName","description"];module.exports=function(xml,model,additionalProperties){additionalProperties=additionalProperties||[];ITEM_PROPERTY_NAMES.forEach(function(propertyName){if(model.hasOwnProperty(propertyName)){xml.beginElement(propertyName);xml.text(model[propertyName]);xml.endElement(propertyName)}});if(model.id){xml.beginElement("uuid");xml.text(model.id);xml.endElement("uuid")}if(typeof model.manageable==="boolean"){xml.beginElement("manageable");xml.text(model.manageable?"true":"false");xml.endElement("manageable")}xml.beginElement("properties");BASIC_PROPERTIES.forEach(function(property){if(model[property]){generateProperty(xml,{name:property,readonly:false,value:model[property]})}});if(Array.isArray(additionalProperties)&&additionalProperties.length>0){additionalProperties.forEach(function(property){generateProperty(xml,property)})}if(Array.isArray(model.icons)&&model.icons.length>0){model.icons.forEach(function(icon,i){var propertyName=i===0?"thumbnailUrl":"icon";generateProperty(xml,{name:propertyName,readonly:false,value:icon})})}var preferences=model.preferences||{};Object.keys(preferences).forEach(function(prefName){generateProperty(xml,preferences[prefName],model.locale)});xml.endElement("properties");if(model.tags&&model.tags.length>0){xml.beginElement("tags");model.tags.forEach(function(tag){var attrs={type:tag.type};if(tag.manageable){attrs.manageable=true}if(tag.blacklist){attrs.blacklist=true}xml.beginElement("tag",attrs);xml.text(tag.name);xml.endElement("tag")});xml.endElement("tags")}return xml}},{"./property-generator":402}],400:[function(require,module,exports){"use strict";var XmlBuilder=require("./xml-builder");var baseXmlGenerator=require("./base-xml-generator");module.exports=function(model){var xml=new XmlBuilder;xml.beginElement("link");baseXmlGenerator(xml,model);xml.endElement("link");return xml.toString()}},{"./base-xml-generator":399,"./xml-builder":404}],401:[function(require,module,exports){"use strict";var XmlBuilder=require("./xml-builder");var baseXmlGenerator=require("./base-xml-generator");module.exports=function(model){var xml=new XmlBuilder;xml.beginElement("page");baseXmlGenerator(xml,model);xml.endElement("page");return xml.toString()}},{"./base-xml-generator":399,"./xml-builder":404}],402:[function(require,module,exports){"use strict";var NO_LOCALE_NAME=require("backbase-widget-engine/src/strategies/parser/xml/constants").NO_LOCALE_NAME;function generateProperty(xml,property,currentLocale){var attrs={name:property.name,readonly:property.readonly||false};var type=property.type||(property.name==="order"?"double":null);if(typeof property.manageable==="boolean"){attrs.manageable=property.manageable}if(typeof property.localizable==="boolean"){attrs.localizable=property.localizable}if(typeof property.markedForDeletion!=="undefined"&&property.markedForDeletion===true){attrs.markedForDeletion=true}if(property.label){attrs.label=property.label}if(type){attrs.type=type}if(property.viewhints&&property.viewhints.length>0){attrs.viewHint=property.viewhints.join(",")}xml.beginElement("property",attrs);generateValues(xml,property,currentLocale);xml.endElement("property")}function buildValueElement(xml,value,attributes){xml.beginElement("value",attributes);xml.text(value);xml.endElement("value")}function generateValues(xml,property,currentLocale){var locale=currentLocale||NO_LOCALE_NAME;if(property.localizable){var langObj=property._lang;if(!langObj){langObj={};langObj[locale]={value:property.value}}Object.keys(langObj).forEach(function(localeName){var localizedValueObj=langObj[localeName]||{};var attributes={};if(typeof localizedValueObj.markedForDeletion!=="undefined"&&localizedValueObj.markedForDeletion===true){attributes.markedForDeletion=true}if(localeName!==NO_LOCALE_NAME){attributes.locale=localeName}buildValueElement(xml,localizedValueObj.value,attributes)})}else{buildValueElement(xml,property.value)}}module.exports=generateProperty},{"backbase-widget-engine/src/strategies/parser/xml/constants":233}],403:[function(require,module,exports){"use strict";var XmlBuilder=require("./xml-builder");var baseXmlGenerator=require("./base-xml-generator");var WIDGET_PROPERTIES=["author","authorEmail","authorHref","license","licenseHref"];module.exports=function(model,isContainer){var elementName=isContainer?"container":"widget";var additionalProperties=[];WIDGET_PROPERTIES.forEach(function(property){if(model[property]){additionalProperties.push({name:property,readonly:false,value:model[property]})}});if(model.content&&model.content.src){additionalProperties.push({name:"src",readonly:false,value:model.content.src})}if(model.altContent){Object.keys(model.altContent).forEach(function(contentName){additionalProperties.push({name:"src."+contentName,readonly:false,value:model.altContent[contentName].src})})}if(model.viewmodes&&model.viewmodes.length>0){additionalProperties.push({name:"viewmodes",readonly:false,value:model.viewmodes.join(" ")})}var xml=new XmlBuilder;xml.beginElement(elementName);baseXmlGenerator(xml,model,additionalProperties);xml.endElement(elementName);return xml.toString()}},{"./base-xml-generator":399,"./xml-builder":404}],404:[function(require,module,exports){"use strict";module.exports=XmlBuilder;var xmlEntityMap={"<":"&lt;",">":"&gt;",'"':"&quot;","&":"&amp;"};var xmlSpecialCharRegexp=/[<>"&]/g;function escapeXML(str){return str.replace(xmlSpecialCharRegexp,function(char){return xmlEntityMap[char]||char})}function convertToString(value){return value===null||value===undefined?"":String(value)}function XmlBuilder(){this._xml=""}XmlBuilder.prototype.beginElement=function(tagName,attributes){var attributesString="";if(attributes){attributesString=Object.keys(attributes).reduce(function(str,attrName){var valueStr=convertToString(attributes[attrName]);return str+" "+attrName+'="'+escapeXML(valueStr)+'"'},"")}this._xml+="<"+tagName+attributesString+">"};XmlBuilder.prototype.endElement=function(tagName){this._xml+="</"+tagName+">"};XmlBuilder.prototype.text=function(text){this._xml+=escapeXML(convertToString(text))};XmlBuilder.prototype.xml=function(xml){this._xml+=xml};XmlBuilder.prototype.toString=function(){return this._xml}},{}],405:[function(require,module,exports){"use strict";var widgetGenerator=require("./widget-xml-generator");var generatePage=require("./page-xml-generator");var generateLink=require("./link-xml-generator");var XmlBuilder=require("./xml-builder");module.exports={generate:generate,generateWidget:generateWidget,generateContainer:generateContainer,generatePage:generatePage,generateLink:generateLink,generateCatalog:generateCatalog};function generateContainer(model){return widgetGenerator(model,true)}function generateWidget(model){return widgetGenerator(model,false)}function generate(model,type){var itemType=type||model.type;if(!itemType){throw new TypeError('Item type is required. Either provide it as the second argument or set "type" property of the model')}var methodName="generate"+itemType[0].toUpperCase()+itemType.substr(1);if(!module.exports[methodName]){throw new Error("Unsupported type passed "+type)}return module.exports[methodName](model)}function generateCatalog(catalogItems){if(!catalogItems){throw new TypeError("catalogItems argument is required. It must be an item model object or an array of such objects.")}if(!Array.isArray(catalogItems)){catalogItems=[catalogItems]}var xmlBuilder=new XmlBuilder;xmlBuilder.beginElement("catalog");catalogItems.forEach(function(item){xmlBuilder.xml(generate(item))});xmlBuilder.endElement("catalog");return xmlBuilder.toString()}},{"./link-xml-generator":400,"./page-xml-generator":401,"./widget-xml-generator":403,"./xml-builder":404}],406:[function(require,module,exports){"use strict";var merge=require("../../../util").merge;var parseItem=require("backbase-widget-engine/src/strategies/parser/xml/item");var helpers=require("backbase-widget-engine/src/strategies/parser/xml/helpers");module.exports=parseLink;var linkParsers={LINK:parseHeader,divider:parseDivider,page:parsePage,externalLink:parseExternalLink,redirect:parseRedirect,alias:parseAlias,state:parseState};function parseLink(node){var item=parseItem(node);var properties=item.preferencesDict;var type=properties.itemType;if(type==="menuHeader"){type="LINK"}var link={children:[],itemType:type,title:properties.title};if(typeof linkParsers[type]==="function"){linkParsers[type](link,properties)}var children=parseChildren(node);if((children||[]).length>0){link.children=children}delete link.preferencesDict;return merge(item,link)}function parseHeader(link){link.navPattern=null}function parsePage(link,properties){link.itemRef=properties.ItemRef;link.href=properties.generatedUrl;if(properties.Url){link.url=properties.Url}link.generatedUrl=properties.generatedUrl}function parseDivider(link,properties){link.className=properties.className}function parseExternalLink(link,properties){link.url=properties.Url}function parseRedirect(link,properties){link.redirectionMethod=properties.redirectionMethod;link.url=properties.Url;link.targetPage=properties.targetPage}function parseAlias(link,properties){link.itemRef=properties.ItemRef;link.href=properties.generatedUrl;if(properties.Url){link.url=properties.Url}link.generatedUrl=properties.generatedUrl}function parseState(link,properties){link.itemRef=properties.ItemRef;link.href=properties.generatedUrl;if(properties.Url){link.url=properties.Url}link.generatedUrl=properties.generatedUrl;try{link.state=JSON.parse(properties.State)}catch(err){throw new Error('Failed to parse "state" property of link ['+link.itemRef+"]. Error: "+err.message)}if(properties.sectionName){link.sectionName=properties.sectionName}}function parseChildren(node){var parent=helpers.getChildElementByName(node,"children");var childrenElements=parent&&helpers.getChildElements(parent);return childrenElements&&childrenElements.map(parseLink)}},{"../../../util":418,"backbase-widget-engine/src/strategies/parser/xml/helpers":234,"backbase-widget-engine/src/strategies/parser/xml/item":235}],407:[function(require,module,exports){"use strict";var parseLink=require("./link");var parsePage=require("./page");var parsePortal=require("./portal");var baseModelParser=require("backbase-widget-engine/src/strategies/parser/xml/model-parser");var parser=baseModelParser.createInstance();parser.setParser("link",parseLink);parser.setParser("page",parsePage);parser.setParser("portal",parsePortal);module.exports=parser},{"./link":406,"./page":408,"./portal":409,"backbase-widget-engine/src/strategies/parser/xml/model-parser":236}],408:[function(require,module,exports){"use strict";var parseItem=require("backbase-widget-engine/src/strategies/parser/xml/item");var parseWidget=require("backbase-widget-engine/src/strategies/parser/xml/widget");var common=require("backbase-widget-engine/src/strategies/parser/xml/common");var helpers=require("backbase-widget-engine/src/strategies/parser/xml/helpers");var merge=require("../../../util").merge;module.exports=parsePage;function parsePage(pageEl){var item=parseItem(pageEl);var properties=item.preferencesDict;var page={content:parseContent(properties),children:[],description:properties.description,icons:common.parseIcons(properties)};var children=common.parseChildren(pageEl,parseWidget);if((children||[]).length>0){page.children=children}delete item.preferencesDict;return merge(item,page)}function parseContent(properties){var content={src:"",type:"text/html",encoding:"UTF-8"};helpers.assignIfExists(content,"src",properties.src);return content}},{"../../../util":418,"backbase-widget-engine/src/strategies/parser/xml/common":232,"backbase-widget-engine/src/strategies/parser/xml/helpers":234,"backbase-widget-engine/src/strategies/parser/xml/item":235,"backbase-widget-engine/src/strategies/parser/xml/widget":237}],409:[function(require,module,exports){"use strict";var parseItem=require("backbase-widget-engine/src/strategies/parser/xml/item");function parsePortal(portalEl){var item=parseItem(portalEl);delete item.preferencesDict;return item}module.exports=parsePortal},{"backbase-widget-engine/src/strategies/parser/xml/item":235}],410:[function(require,module,exports){"use strict";var Model=require("../core/model");var XmlPortalContext=require("./xml-portal-context");module.exports={XmlCxpModel:XmlCxpModel,createInstance:createInstance};function XmlCxpModel(configuration){Model.apply(this,[configuration])}XmlCxpModel.prototype=Object.create(Model.prototype);XmlCxpModel.prototype.items=function(itemType,opts){return new XmlPortalContext(this.config).items(itemType,opts)};XmlCxpModel.prototype.item=function(itemName,itemType,opts){return new XmlPortalContext(this.config).item(itemName,itemType,opts)};XmlCxpModel.prototype.itemById=function(itemId,itemType,opts){return new XmlPortalContext(this.config).itemById(itemId,itemType,opts)};XmlCxpModel.prototype.portal=function portal(portalName){return new XmlPortalContext(this.config,portalName)};function createInstance(configuration){return new XmlCxpModel(configuration)}},{"../core/model":396,"./xml-portal-context":414}],411:[function(require,module,exports){"use strict";var xmlModelParser=require("../parsers/xml/model-parser");var xmlGenerator=require("../generators/xml-generator");var ItemCollectionContext=require("../core/item-collection-context");var restApiConsumer=require("../core/rest-api-consumer");module.exports=XmlItemCollectionContext;function XmlItemCollectionContext(config,type,portalName,filters){ItemCollectionContext.call(this,config,type,portalName,filters);this._apiConsumer=restApiConsumer.createInstance(this._config)}XmlItemCollectionContext.prototype=Object.create(ItemCollectionContext.prototype);XmlItemCollectionContext.prototype.get=function(){var portalName=this._portalName;var endpoint="portals/"+portalName+"/"+this.type+"s";var filter=this._filter;var requiredParams=this._requiredParams;var filterQuery=[];var requiredParamsQuery=[];if(filter){filterQuery=["f="+filter.name+"("+filter.operator+")"+encodeURIComponent(filter.value)]}if(requiredParams){requiredParamsQuery=Object.keys(requiredParams).map(function(key){return encodeURIComponent(key)+"="+encodeURIComponent(requiredParams[key])})}var query=filterQuery.concat(requiredParamsQuery).join("&");endpoint+=query.length>0?"?"+query:"";return this._apiConsumer.get(endpoint).then(function(response){return response.text()}).then(function(xmlString){this._logger.info("Parsing %s",endpoint);var items=xmlModelParser.parseList(xmlString);this._logger.info("%s parsed successfully");return items}.bind(this))};XmlItemCollectionContext.prototype.filter=function(name,value,operator){var filter={name:name,value:value,operator:operator||"eq"};return new XmlItemCollectionContext(this._config,this.type,this._portalName,filter)};XmlItemCollectionContext.prototype.create=function(model){var requiredFields=["parentItemName"];if(this.type!=="link"){requiredFields.push("extendedItemName")}requiredFields.forEach(function(field){if(typeof model[field]==="undefined"||typeof model[field]!=="string"||model[field].length===0){throw new Error("ItemCollectionContext.create needs the model has the field named: "+field)}});var portalName=this._portalName;model.contextItemName=portalName;if(typeof model.preferences==="undefined"){model.preferences={}}var itemXml=xmlGenerator.generate(model,this.type);var endpoint="portals/"+portalName+"/"+this.type+"s";return this._apiConsumer.post(endpoint,itemXml).then(function(response){return response.text()}).then(function(newItemXml){this._logger.info("Parsing newly created item's xml");var item=xmlModelParser.parse(newItemXml);this._logger.info("Newly created item parsed successfully");return item}.bind(this))}},{"../core/item-collection-context":393,"../core/rest-api-consumer":398,"../generators/xml-generator":405,"../parsers/xml/model-parser":407}],412:[function(require,module,exports){"use strict";var xmlModelParser=require("../parsers/xml/model-parser");var xmlGenerator=require("../generators/xml-generator");var restApiConsumer=require("../core/rest-api-consumer");var ItemContext=require("../core/item-context");module.exports=XmlItemContext;function XmlItemContext(config,itemName,itemType,findById,portalName){ItemContext.call(this,config,itemName,itemType,findById,portalName);this._apiConsumer=restApiConsumer.createInstance(this._config)}XmlItemContext.prototype=Object.create(ItemContext.prototype);XmlItemContext.prototype.get=function(options){var opts=typeof options==="object"?options:{};if(this._findById){return this._getItemById()}else{return this._getItemByName(opts)}};XmlItemContext.prototype._buildParams=function(){return Object.keys(this._requiredParams).map(function(key){return encodeURIComponent(key)+"="+encodeURIComponent(this._requiredParams[key])}.bind(this)).join("&")};XmlItemContext.prototype._getItemByName=function(opts){var portalName=this._config.get("portalName");var itemEndpointPart=this.itemType+"s/"+this.itemName;var endpointEnding=opts.allLocalizedValues===true?"/details":".xml";var endpoint="portals/"+portalName+"/"+itemEndpointPart+endpointEnding;var params=this._buildParams();if(params.length>0){endpoint+="?"+params}return this._apiConsumer.get(endpoint).then(function(response){return response.text()}).then(function(xmlString){this._logger.info("Parsing response from [%s]",itemEndpointPart);var item=xmlModelParser.parse(xmlString);this._logger.info("Response from [%s] parsed successfully",itemEndpointPart);return item}.bind(this))};XmlItemContext.prototype._getItemById=function(){var portalName=this._config.get("portalName");var uuid=encodeURIComponent(this.itemName);var itemTypePlural=this.itemType+"s";var itemTypeEndpointPart=itemTypePlural+"?f=uuid(eq)"+uuid;var endpoint="portals/"+portalName+"/"+itemTypeEndpointPart;var params=this._buildParams();if(params.length>0){endpoint+="&"+params}return this._apiConsumer.get(endpoint).then(function(response){return response.text()}).then(function(xmlString){this._logger.info("Parsing response from [%s]",itemTypeEndpointPart);var items=xmlModelParser.parseList(xmlString);this._logger.info("Response from [%s] parsed successfully",itemTypeEndpointPart);var item=items[0];if(!item){throw new Error("Item of type ["+this.itemType+"] with id ["+this.itemName+"] not found")}return item}.bind(this))};XmlItemContext.prototype.update=function(model){var portalName=this._config.get("portalName");var endpoint="portals/"+portalName+"/"+this.itemType+"s/"+this.itemName;var modelToSave=model;if(model.name&&model.name.indexOf("~")>0){modelToSave=Object.create(model);modelToSave.parentItemName=undefined;modelToSave.extendedItemName=undefined;modelToSave.id=undefined}var modelXml=xmlGenerator.generate(modelToSave,this.itemType);return this._apiConsumer.put(endpoint,modelXml).then(function(){this._logger.info("%s named %s updated successfully",this.itemType,this.itemName)}.bind(this))};XmlItemContext.prototype.revert=function(){var endpoint="portals/"+this._config.get("portalName")+"/"+this.itemType+"s/"+this.itemName+".xml";return this._apiConsumer.delete(endpoint)};XmlItemContext.prototype.remove=function(){var endpoint="portals/"+this._config.get("portalName")+"/"+this.itemType+"s/"+this.itemName;return this._apiConsumer.delete(endpoint)}},{"../core/item-context":394,"../core/rest-api-consumer":398,"../generators/xml-generator":405,"../parsers/xml/model-parser":407}],413:[function(require,module,exports){"use strict";var xmlModelParser=require("../parsers/xml/model-parser");var XmlItemContext=require("./xml-item-context");module.exports=XmlLinkContext;function XmlLinkContext(config,itemName,itemType,findById,portalName){XmlItemContext.call(this,config,itemName,itemType,findById,portalName)}XmlLinkContext.prototype=Object.create(XmlItemContext.prototype);XmlLinkContext.prototype.duplicate=function(){var portalName=this._config.get("portalName");var itemEndpointPart=this.itemType+"s/"+this.itemName;var endpoint="portals/"+portalName+"/"+itemEndpointPart+"/duplicate";return this._apiConsumer.post(endpoint).then(function(response){return response.text()}).then(function(xmlString){this._logger.info("Parsing response from [%s]",itemEndpointPart);var item=xmlModelParser.parse(xmlString);this._logger.info("Response from [%s] parsed successfully",itemEndpointPart);return item}.bind(this))}},{"../parsers/xml/model-parser":407,"./xml-item-context":412}],414:[function(require,module,exports){"use strict";var PortalContext=require("../core/portal-context");var XmlItemContext=require("./xml-item-context");var XmlLinkContext=require("./xml-link-context");var XmlItemCollectionContext=require("./xml-item-collection-context");function XmlPortalContext(){PortalContext.apply(this,[].slice.call(arguments))}XmlPortalContext.prototype=Object.create(PortalContext.prototype);XmlPortalContext.prototype.item=function(itemName,itemType,opts){var config=opts&&opts.config||this._config;return this._createItemContext(config,itemName,itemType,false,this._getPortalName(opts))};XmlPortalContext.prototype.itemById=function(itemId,itemType,opts){var config=opts&&opts.config||this._config;return this._createItemContext(config,itemId,itemType,true,this._getPortalName(opts))};XmlPortalContext.prototype.items=function(itemType,opts){var config=opts&&opts.config||this._config;return new XmlItemCollectionContext(config,itemType,this._getPortalName(opts))};XmlPortalContext.prototype._getPortalName=function getPortalSetting(opts){var config=opts&&opts.config;return config&&config.get("portalName")||this.portalName};XmlPortalContext.prototype._createItemContext=function getItemByType(config,itemName,itemType,findById,portalName){return itemType==="link"?new XmlLinkContext(config,itemName,itemType,findById,portalName):new XmlItemContext(config,itemName,itemType,findById,portalName)};module.exports=XmlPortalContext},{"../core/portal-context":397,"./xml-item-collection-context":411,"./xml-item-context":412,"./xml-link-context":413}],415:[function(require,module,exports){"use strict";var Html5ItemRenderer=require("./strategies/html5-item-renderer");var createRenderer=function(cxpConfig){if(!cxpConfig.get("contextRoot")){cxpConfig.set("contextRoot","")}if(!cxpConfig.get("remoteContextRoot")){cxpConfig.set("remoteContextRoot","")}return new Html5ItemRenderer(cxpConfig)};module.exports={createInstance:createRenderer}},{"./strategies/html5-item-renderer":417}],416:[function(require,module,exports){(function(global){"use strict";var Handlebars=require("handlebars/dist/handlebars.min");var HandlebarsHelpers=require("handlebars-helpers");var fetch=require("backbase-widget-engine/src/fetch/filtering-fetch");var responseHelpers=require("backbase-widget-engine/src/util/response-helpers");var CHROME_VIEWMODES=["windowed","maximized"];var dataChromeAttr="data-chrome";var dataWidgetHolderAttr="data-widget-holder";var chromeTemplatePromises={};var handlebarsInstance=Handlebars.create();Object.keys(HandlebarsHelpers).forEach(function(helperName){handlebarsInstance.registerHelper(helperName,HandlebarsHelpers[helperName])});module.exports=ChromeRenderer;function ChromeRenderer(config,opts){opts=opts||{};var parentLog=opts.log||config.getLogger();this._config=config;this._log=parentLog.child({childName:"chrome-renderer"})}ChromeRenderer.prototype.getChrome=function(itemRootElement,itemModel,opts){var chromeEl=this._findChromeElement(itemRootElement,itemModel.name);var holderEl=this._findWidgetHolderElement(chromeEl);return holderEl?Promise.resolve({chromeElement:chromeEl,widgetHolderElement:holderEl}):this._renderChrome(itemRootElement,itemModel,opts)};ChromeRenderer.prototype._renderChrome=function(itemRootElement,itemModel,opts){var chromeEl;var holderEl;var self=this;var useChrome=!opts||opts.useChrome!==false;var document=itemRootElement&&itemRootElement.ownerDocument||global.document;var templatePromise=useChrome?this._getTemplate():Promise.resolve(null);return templatePromise.then(function(template){if(template&&itemModel.viewmodes&&CHROME_VIEWMODES.indexOf(itemModel.viewmodes[0])>=0){var templateHtml=template(itemModel);var tempEl=document.createElement("div");tempEl.innerHTML=templateHtml;chromeEl=self._findChromeElement(tempEl,itemModel.name);holderEl=self._findWidgetHolderElement(chromeEl);if(chromeEl){chromeEl.parentNode.removeChild(chromeEl)}else{self._log.warn('Chrome layout does not have an element with "data-chrome" attribute. '+"Falling back to blank chrome.")}if(!holderEl){chromeEl=null;self._log.warn('Chrome layout does not have an element with "data-widget-holder" attribute. '+"Falling back to blank chrome.")}}if(!chromeEl){chromeEl=document.createElement("div");chromeEl.setAttribute(dataChromeAttr,itemModel.name);chromeEl.setAttribute(dataWidgetHolderAttr,"");holderEl=chromeEl}return{chromeElement:chromeEl,widgetHolderElement:holderEl}})};ChromeRenderer.prototype._getTemplate=function(){var chromeUrl=this._config.get("chromeSrc");var log=this._log;if(!chromeUrl){var message='No chrome template configured. Widgets with "windowed" or "maximized" view modes will '+"be displayed without chrome.";log.warn(message);return Promise.resolve(null)}var staticResourcesRoot=this._config.get("staticResourcesRoot");var apiRoot=this._config.get("apiRoot");var url=chromeUrl.replace(/\$\(contextRoot\)|\$\(staticResourcesRoot\)/,staticResourcesRoot).replace(/\$\(apiRoot\)/,apiRoot);var compiledTemplatePromise=chromeTemplatePromises[url];if(!compiledTemplatePromise){log.debug("Requesting chrome template from %s",url);compiledTemplatePromise=fetch(url).then(function(res){log.debug("Chrome template request resolved. Status: %s",res.status);if(responseHelpers.isResponseOk(res)){return res.text()}else{throw responseHelpers.createError(res)}}).then(function(templateBody){log.trace("Chrome template body\n: %s",templateBody);log.debug("Compiling handlebars template instance from %s",url);try{return handlebarsInstance.compile(templateBody)}catch(err){log.error("There was a problem compiling a handlebars template");throw err}}).catch(function(e){log.error(e);delete chromeTemplatePromises[url];return null});chromeTemplatePromises[url]=compiledTemplatePromise}return compiledTemplatePromise};ChromeRenderer.prototype._findChromeElement=function(rootNode,itemName){if(!rootNode){return null}var selector="*["+dataChromeAttr+'="'+(itemName||"")+'"]';return rootNode.querySelector(selector)};ChromeRenderer.prototype._findWidgetHolderElement=function(rootNode){if(!rootNode){return null}var selector="*["+dataWidgetHolderAttr+"]";return rootNode.hasAttribute(dataWidgetHolderAttr)?rootNode:rootNode.querySelector(selector)}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"backbase-widget-engine/src/fetch/filtering-fetch":214,"backbase-widget-engine/src/util/response-helpers":249,"handlebars-helpers":253,"handlebars/dist/handlebars.min":255}],417:[function(require,module,exports){"use strict";var WidgetEngine=require("backbase-widget-engine");var ExtPromise=require("promise-extensions")(Promise);var bunyan=require("browser-bunyan");var util=require("../../util");var ChromeRenderer=require("./chrome-renderer");var LinkDatasourceResolver=require("../../datasource/link-datasource-resolver");var PortalDatasourceResolver=require("../../datasource/portal-datasource-resolver");var ContentDatasourceResolver=require("../../datasource/contentrendered-datasource-resolver");var NavigationDatasourceResolver=require("../../datasource/navigation-datasource-resolver");var BreadcrumbDatasourceResolver=require("../../datasource/breadcrumb-datasource-resolver");var Html5ItemRenderer=function(cxpConfig){this.config=cxpConfig;this.log=cxpConfig.getLogger().child({childName:"html5-item-renderer"});this.plugins=[];this.features=[];this._widgetEngines=[];this._chromeRenderer=new ChromeRenderer(cxpConfig,{log:this.log});this._datasourceResolvers=[LinkDatasourceResolver.getInstance,PortalDatasourceResolver.getInstance,ContentDatasourceResolver.getInstance,NavigationDatasourceResolver.getInstance,BreadcrumbDatasourceResolver.getInstance]};module.exports=Html5ItemRenderer;Html5ItemRenderer.prototype.start=function(model,rootNode,opts){if(!model||model.length===0){return ExtPromise.resolve()}opts=opts||{};var log=this.log;var self=this;log.info("Starting item tree rendering...");if(log.level()<=bunyan.TRACE){log.trace("Item tree model is this:\n %s",JSON.stringify(model,null,"	"))}var startTime=Date.now();var modelList=Array.isArray(model)?model:[model];if(modelList.length===1&&opts.contentName){var modelCopy=util.cloneDeep(modelList[0]);modelCopy.content=modelCopy.altContent[opts.contentName];if(typeof modelCopy.content==="undefined"){var error=new Error('Given content name "'+opts.contentName+'" not found for item named "'+model.name+'"');return ExtPromise.reject(error)}modelList=[modelCopy]}return this._render(modelList,rootNode,opts).then(function(treeRenderInspections){log.info("Item tree rendering complete.");var time=Date.now()-startTime;var result={time:time,failures:[]};var inspections=self._flattenArray(treeRenderInspections);result=inspections.reduce(function(result,inspection){if(inspection.isRejected()){var cause=typeof inspection.reason.cause==="function"&&inspection.reason.cause()||inspection.reason;result.failures.push(cause)}return result},result);var errCount=result.failures.length;if(errCount>0){log.warn("%s/%s items failed to load.",errCount,inspections.length)}if(errCount===inspections.length){var err=new Error("All items in a rendering tree failed to render");err.result=result;throw err}return result})};Html5ItemRenderer.prototype.addFeature=function(feature){if(typeof feature==="object"){this.features.push(feature)}return this};Html5ItemRenderer.prototype.addPlugin=function(plugin){if(typeof plugin==="object"){this.plugins.push(plugin)}return this};Html5ItemRenderer.prototype._renderItem=function(itemModel,domNode){var self=this;var config=this.config;var widgetPath="";if(itemModel.content&&itemModel.content.src){widgetPath=itemModel.content.src.replace(/\/[^\/]+$/,"")}else if(itemModel.content&&itemModel.content.config){widgetPath=itemModel.content.config.replace(/\/[^\/]+$/,"")}widgetPath=widgetPath.replace(/\$\(contextRoot\)|\$\(staticResourcesRoot\)/,config.get("staticResourcesRoot")).replace(/\$\(apiRoot\)/,config.get("apiRoot"));var engine=new WidgetEngine({log:this.log});var storageFactory=config.get("storageFactory");engine.init({widgetPath:widgetPath,widgetEl:domNode,initialModel:itemModel,storage:storageFactory?storageFactory.get(itemModel):null,configVars:config.toSerializableObject()});this._datasourceResolvers.forEach(function(resolver){engine.addDatasourceResolver(resolver)});this.plugins.forEach(function(plugin){engine.addPlugin(plugin)});this.features.forEach(function(feature){engine.addFeature(feature)});if(!!config.get("compat")){engine.enableCompatibility()}var engineResult=engine.start(itemModel,domNode);return engineResult.delay(0).then(function(result){self._widgetEngines.push(engine);return result})};Html5ItemRenderer.prototype.destroyAllItems=function(){this._widgetEngines.forEach(function(engine){engine.destroy();
});this._widgetEngines=[]};Html5ItemRenderer.prototype.destroyItem=function(itemId){var engine=this._widgetEngines.filter(function(engine){return engine.widgetEngine.config.initialModel.id===itemId})[0];if(!engine){return}engine.destroy();var widgetConfig=engine.widgetEngine.config;if(widgetConfig.initialModel&&(widgetConfig.initialModel.children&&widgetConfig.initialModel.children.length>0)){var self=this;widgetConfig.initialModel.children.forEach(function(child){var childEngine=self._widgetEngines.filter(function(wEngine){if(wEngine.widgetEngine._widgetInstance&&wEngine.widgetEngine._widgetInstance.id===child.id){return wEngine}})[0];if(!childEngine){return}var engineIndex=self._widgetEngines.indexOf(childEngine);self._widgetEngines.splice(engineIndex,1)})}var engineIndex=this._widgetEngines.indexOf(engine);this._widgetEngines.splice(engineIndex,1);return this};Html5ItemRenderer.prototype.rerenderItem=function(oldItemId,oldItemName,itemModel){if(typeof oldItemId==="object"&&typeof itemModel==="undefined"){itemModel=oldItemId;oldItemId=itemModel.id;oldItemName=itemModel.name}var placeholder=document.createElement("div");var itemChrome=document.querySelector('[data-chrome="'+oldItemName+'"]');itemChrome.parentNode.insertBefore(placeholder,itemChrome);this.destroyItem(oldItemId);return this.start(itemModel,placeholder).then(function(){var newChrome=placeholder.firstElementChild;placeholder.parentNode.insertBefore(newChrome,placeholder);placeholder.parentNode.removeChild(placeholder)})};Html5ItemRenderer.prototype._render=function(modelList,rootNode,opts){var self=this;var chromePromises=modelList.map(function(itemModel){return self._chromeRenderer.getChrome(rootNode,itemModel,opts)});return Promise.all(chromePromises).then(function(chromeArr){return chromeArr.map(function(chrome,i){return{itemModel:modelList[i],chrome:chrome,parentEl:rootNode}})}).then(function(itemChromeMapList){var renderResults=[];itemChromeMapList.forEach(function(itemChromeMap,idx,array){self._attachChrome(itemChromeMap,idx,array);renderResults.push(self._renderItem(itemChromeMap.itemModel,itemChromeMap.chrome.widgetHolderElement))});return ExtPromise.settleAll(renderResults)}).then(function(inspections){var childenRenderResults=[];inspections.filter(function(inspection){return inspection.isFulfilled()}).map(function(fulfilled){return fulfilled.value}).forEach(function(itemRenderResult){var areaNodes=itemRenderResult.areaNodes;if(areaNodes){var itemModel=modelList.filter(function(model){return model.id===itemRenderResult.id})[0];Object.keys(areaNodes).forEach(function(area){var childrenModels=itemModel.children||[];var childrenForArea=childrenModels.filter(function(item){var currentAreaPref;if(Array.isArray(item.preferences)){currentAreaPref=item.preferences.filter(function(pref){return pref.name==="area"})[0]}else{currentAreaPref=item.preferences.area}return currentAreaPref&&currentAreaPref.value===area});self.log.info("Rendering %s child item(s) for area [%s] of item [%s]...",childrenForArea.length,area,itemRenderResult.id);var areaEl=areaNodes[area];childenRenderResults.push(self._render(childrenForArea,areaEl,opts))})}});return Promise.all(inspections.concat(childenRenderResults))})};Html5ItemRenderer.prototype._attachChrome=function(itemChromeMap,idx,array){var chromeEl=itemChromeMap.chrome.chromeElement;var hostEl=itemChromeMap.parentEl;var refNode;if(!chromeEl.parentNode){if(idx===0){refNode=hostEl.firstElementChild}else{var prevChromeNode=array[idx-1].chrome.chromeElement;refNode=prevChromeNode.nextElementSibling}hostEl.insertBefore(chromeEl,refNode)}};Html5ItemRenderer.prototype._flattenArray=function flatten(array){return array.reduce(function(flattened,item){return flattened.concat(Array.isArray(item)?flatten(item):item)},[])}},{"../../datasource/breadcrumb-datasource-resolver":387,"../../datasource/contentrendered-datasource-resolver":388,"../../datasource/link-datasource-resolver":389,"../../datasource/navigation-datasource-resolver":390,"../../datasource/portal-datasource-resolver":391,"../../util":418,"./chrome-renderer":416,"backbase-widget-engine":216,"browser-bunyan":252,"promise-extensions":384}],418:[function(require,module,exports){"use strict";module.exports={isObject:require("lodash/isObject"),merge:require("lodash/merge"),cloneDeep:require("lodash/cloneDeep")}},{"lodash/cloneDeep":361,"lodash/isObject":373,"lodash/merge":380}],419:[function(require,module,exports){(function(){var attachEvent=document.attachEvent,stylesCreated=false;if(!attachEvent){var requestFrame=function(){var raf=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(fn){return window.setTimeout(fn,20)};return function(fn){return raf(fn)}}();var cancelFrame=function(){var cancel=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(id){return cancel(id)}}();function resetTriggers(element){var triggers=element.__resizeTriggers__,expand=triggers.firstElementChild,contract=triggers.lastElementChild,expandChild=expand.firstElementChild;contract.scrollLeft=contract.scrollWidth;contract.scrollTop=contract.scrollHeight;expandChild.style.width=expand.offsetWidth+1+"px";expandChild.style.height=expand.offsetHeight+1+"px";expand.scrollLeft=expand.scrollWidth;expand.scrollTop=expand.scrollHeight}function checkTriggers(element){return element.offsetWidth!=element.__resizeLast__.width||element.offsetHeight!=element.__resizeLast__.height}function scrollListener(e){var element=this;resetTriggers(this);if(this.__resizeRAF__)cancelFrame(this.__resizeRAF__);this.__resizeRAF__=requestFrame(function(){if(checkTriggers(element)){element.__resizeLast__.width=element.offsetWidth;element.__resizeLast__.height=element.offsetHeight;element.__resizeListeners__.forEach(function(fn){fn.call(element,e)})}})}var animation=false,animationstring="animation",keyframeprefix="",animationstartevent="animationstart",domPrefixes="Webkit Moz O ms".split(" "),startEvents="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),pfx="";{var elm=document.createElement("fakeelement");if(elm.style.animationName!==undefined){animation=true}if(animation===false){for(var i=0;i<domPrefixes.length;i++){if(elm.style[domPrefixes[i]+"AnimationName"]!==undefined){pfx=domPrefixes[i];animationstring=pfx+"Animation";keyframeprefix="-"+pfx.toLowerCase()+"-";animationstartevent=startEvents[i];animation=true;break}}}}var animationName="resizeanim";var animationKeyframes="@"+keyframeprefix+"keyframes "+animationName+" { from { opacity: 0; } to { opacity: 0; } } ";var animationStyle=keyframeprefix+"animation: 1ms "+animationName+"; "}function createStyles(){if(!stylesCreated){var css=(animationKeyframes?animationKeyframes:"")+".resize-triggers { "+(animationStyle?animationStyle:"")+"visibility: hidden; opacity: 0; } "+'.resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style");style.type="text/css";if(style.styleSheet){style.styleSheet.cssText=css}else{style.appendChild(document.createTextNode(css))}head.appendChild(style);stylesCreated=true}}window.addResizeListener=function(element,fn){if(attachEvent)element.attachEvent("onresize",fn);else{if(!element.__resizeTriggers__){if(getComputedStyle(element).position=="static")element.style.position="relative";createStyles();element.__resizeLast__={};element.__resizeListeners__=[];(element.__resizeTriggers__=document.createElement("div")).className="resize-triggers";element.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div>'+'<div class="contract-trigger"></div>';element.appendChild(element.__resizeTriggers__);resetTriggers(element);element.addEventListener("scroll",scrollListener,true);animationstartevent&&element.__resizeTriggers__.addEventListener(animationstartevent,function(e){if(e.animationName==animationName)resetTriggers(element)})}element.__resizeListeners__.push(fn)}};window.removeResizeListener=function(element,fn){if(attachEvent)element.detachEvent("onresize",fn);else{element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn),1);if(!element.__resizeListeners__.length){element.removeEventListener("scroll",scrollListener);element.__resizeTriggers__=!element.removeChild(element.__resizeTriggers__)}}}})()},{}],420:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],421:[function(require,module,exports){(function(global){(function(root){var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=typeof module=="object"&&module&&!module.nodeType&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal){root=freeGlobal}var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,key;function error(type){throw new RangeError(errors[type])}function map(array,fn){var length=array.length;var result=[];while(length--){result[length]=fn(array[length])}return result}function mapDomain(string,fn){var parts=string.split("@");var result="";if(parts.length>1){result=parts[0]+"@";string=parts[1]}string=string.replace(regexSeparators,".");var labels=string.split(".");var encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){var output=[],counter=0,length=string.length,value,extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){return map(array,function(value){var output="";if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value);return output}).join("")}function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22}if(codePoint-65<26){return codePoint-65}if(codePoint-97<26){return codePoint-97}return base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5)}function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin)}return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;basic=input.lastIndexOf(delimiter);if(basic<0){basic=0}for(j=0;j<basic;++j){if(input.charCodeAt(j)>=128){error("not-basic")}output.push(input.charCodeAt(j))}for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;;k+=base){if(index>=inputLength){error("invalid-input")}digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error("overflow")}i+=digit*w;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break}baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error("overflow")}w*=baseMinusT}out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error("overflow")}n+=floor(i/out);i%=out;output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;input=ucs2decode(input);inputLength=input.length;n=initialN;delta=0;bias=initialBias;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<128){output.push(stringFromCharCode(currentValue))}}handledCPCount=basicLength=output.length;if(basicLength){output.push(delimiter)}while(handledCPCount<inputLength){for(m=maxInt,j=0;j<inputLength;++j){currentValue=input[j];if(currentValue>=n&&currentValue<m){m=currentValue}}handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error("overflow")}delta+=(m-n)*handledCPCountPlusOne;n=m;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<n&&++delta>maxInt){error("overflow")}if(currentValue==n){for(q=delta,k=base;;k+=base){t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break}qMinusT=q-t;baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT)}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount}}++delta;++n}return output.join("")}function toUnicode(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string})}function toASCII(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string})}punycode={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define("punycode",function(){return punycode})}else if(freeExports&&freeModule){if(module.exports==freeExports){freeModule.exports=punycode}else{for(key in punycode){punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key])}}}else{root.punycode=punycode}})(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],422:[function(require,module,exports){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&";eq=eq||"=";var obj={};if(typeof qs!=="string"||qs.length===0){return obj}var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;if(options&&typeof options.maxKeys==="number"){maxKeys=options.maxKeys}var len=qs.length;if(maxKeys>0&&len>maxKeys){len=maxKeys}for(var i=0;i<len;++i){var x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq),kstr,vstr,k,v;if(idx>=0){kstr=x.substr(0,idx);vstr=x.substr(idx+1)}else{kstr=x;vstr=""}k=decodeURIComponent(kstr);v=decodeURIComponent(vstr);if(!hasOwnProperty(obj,k)){obj[k]=v}else if(isArray(obj[k])){obj[k].push(v)}else{obj[k]=[obj[k],v]}}return obj};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"}},{}],423:[function(require,module,exports){"use strict";var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){sep=sep||"&";eq=eq||"=";if(obj===null){obj=undefined}if(typeof obj==="object"){return map(objectKeys(obj),function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;if(isArray(obj[k])){return map(obj[k],function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep)}else{return ks+encodeURIComponent(stringifyPrimitive(obj[k]))}}).join(sep)}if(!name)return"";return encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj))};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"};function map(xs,f){if(xs.map)return xs.map(f);var res=[];for(var i=0;i<xs.length;i++){res.push(f(xs[i],i))}return res}var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))res.push(key)}return res}},{}],424:[function(require,module,exports){"use strict";exports.decode=exports.parse=require("./decode");exports.encode=exports.stringify=require("./encode")},{"./decode":422,"./encode":423}],425:[function(require,module,exports){var punycode=require("punycode");exports.parse=urlParse;exports.resolve=urlResolve;exports.resolveObject=urlResolveObject;exports.format=urlFormat;exports.Url=Url;function Url(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,delims=["<",">",'"',"`"," ","\r","\n","	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:true,"javascript:":true},hostlessProtocol={javascript:true,"javascript:":true},slashedProtocol={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},querystring=require("querystring");function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&isObject(url)&&url instanceof Url)return url;var u=new Url;u.parse(url,parseQueryString,slashesDenoteHost);return u}Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!isString(url)){throw new TypeError("Parameter 'url' must be a string, not "+typeof url)}var rest=url;rest=rest.trim();var proto=protocolPattern.exec(rest);if(proto){proto=proto[0];var lowerProto=proto.toLowerCase();this.protocol=lowerProto;rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes=rest.substr(0,2)==="//";if(slashes&&!(proto&&hostlessProtocol[proto])){rest=rest.substr(2);this.slashes=true}}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){var hostEnd=-1;for(var i=0;i<hostEndingChars.length;i++){var hec=rest.indexOf(hostEndingChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}var auth,atSign;if(hostEnd===-1){atSign=rest.lastIndexOf("@")}else{atSign=rest.lastIndexOf("@",hostEnd)}if(atSign!==-1){auth=rest.slice(0,atSign);rest=rest.slice(atSign+1);this.auth=decodeURIComponent(auth)}hostEnd=-1;for(var i=0;i<nonHostChars.length;i++){var hec=rest.indexOf(nonHostChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}if(hostEnd===-1)hostEnd=rest.length;this.host=rest.slice(0,hostEnd);rest=rest.slice(hostEnd);this.parseHost();this.hostname=this.hostname||"";var ipv6Hostname=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ipv6Hostname){var hostparts=this.hostname.split(/\./);for(var i=0,l=hostparts.length;i<l;i++){var part=hostparts[i];if(!part)continue;if(!part.match(hostnamePartPattern)){var newpart="";for(var j=0,k=part.length;j<k;j++){if(part.charCodeAt(j)>127){newpart+="x"}else{newpart+=part[j]}}if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i);var notHost=hostparts.slice(i+1);var bit=part.match(hostnamePartStart);if(bit){validParts.push(bit[1]);notHost.unshift(bit[2])}if(notHost.length){rest="/"+notHost.join(".")+rest}this.hostname=validParts.join(".");break}}}}if(this.hostname.length>hostnameMaxLen){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!ipv6Hostname){var domainArray=this.hostname.split(".");var newOut=[];for(var i=0;i<domainArray.length;++i){var s=domainArray[i];newOut.push(s.match(/[^A-Za-z0-9_-]/)?"xn--"+punycode.encode(s):s)}this.hostname=newOut.join(".")}var p=this.port?":"+this.port:"";var h=this.hostname||"";this.host=h+p;this.href+=this.host;if(ipv6Hostname){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(rest[0]!=="/"){rest="/"+rest}}}if(!unsafeProtocol[lowerProto]){for(var i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i];var esc=encodeURIComponent(ae);if(esc===ae){esc=escape(ae)}rest=rest.split(ae).join(esc)}}var hash=rest.indexOf("#");if(hash!==-1){this.hash=rest.substr(hash);rest=rest.slice(0,hash)}var qm=rest.indexOf("?");if(qm!==-1){this.search=rest.substr(qm);this.query=rest.substr(qm+1);if(parseQueryString){this.query=querystring.parse(this.query)}rest=rest.slice(0,qm)}else if(parseQueryString){this.search="";this.query={}}if(rest)this.pathname=rest;if(slashedProtocol[lowerProto]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var p=this.pathname||"";var s=this.search||"";this.path=p+s}this.href=this.format();return this};function urlFormat(obj){if(isString(obj))obj=urlParse(obj);if(!(obj instanceof Url))return Url.prototype.format.call(obj);return obj.format()}Url.prototype.format=function(){var auth=this.auth||"";if(auth){auth=encodeURIComponent(auth);auth=auth.replace(/%3A/i,":");auth+="@"}var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=false,query="";if(this.host){host=auth+this.host}else if(this.hostname){host=auth+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){host+=":"+this.port}}if(this.query&&isObject(this.query)&&Object.keys(this.query).length){query=querystring.stringify(this.query)}var search=this.search||query&&"?"+query||"";if(protocol&&protocol.substr(-1)!==":")protocol+=":";if(this.slashes||(!protocol||slashedProtocol[protocol])&&host!==false){host="//"+(host||"");if(pathname&&pathname.charAt(0)!=="/")pathname="/"+pathname}else if(!host){host=""}if(hash&&hash.charAt(0)!=="#")hash="#"+hash;if(search&&search.charAt(0)!=="?")search="?"+search;pathname=pathname.replace(/[?#]/g,function(match){return encodeURIComponent(match)});search=search.replace("#","%23");return protocol+host+pathname+search+hash};function urlResolve(source,relative){return urlParse(source,false,true).resolve(relative)}Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,false,true)).format()};function urlResolveObject(source,relative){if(!source)return relative;return urlParse(source,false,true).resolveObject(relative)}Url.prototype.resolveObject=function(relative){if(isString(relative)){var rel=new Url;rel.parse(relative,false,true);relative=rel}var result=new Url;Object.keys(this).forEach(function(k){result[k]=this[k]},this);result.hash=relative.hash;if(relative.href===""){result.href=result.format();return result}if(relative.slashes&&!relative.protocol){Object.keys(relative).forEach(function(k){if(k!=="protocol")result[k]=relative[k]});if(slashedProtocol[result.protocol]&&result.hostname&&!result.pathname){result.path=result.pathname="/"}result.href=result.format();return result}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){Object.keys(relative).forEach(function(k){result[k]=relative[k]});result.href=result.format();return result}result.protocol=relative.protocol;if(!relative.host&&!hostlessProtocol[relative.protocol]){var relPath=(relative.pathname||"").split("/");while(relPath.length&&!(relative.host=relPath.shift()));if(!relative.host)relative.host="";if(!relative.hostname)relative.hostname="";if(relPath[0]!=="")relPath.unshift("");if(relPath.length<2)relPath.unshift("");result.pathname=relPath.join("/")}else{result.pathname=relative.pathname}result.search=relative.search;result.query=relative.query;result.host=relative.host||"";result.auth=relative.auth;result.hostname=relative.hostname||relative.host;result.port=relative.port;if(result.pathname||result.search){var p=result.pathname||"";var s=result.search||"";result.path=p+s}result.slashes=result.slashes||relative.slashes;result.href=result.format();return result}var isSourceAbs=result.pathname&&result.pathname.charAt(0)==="/",isRelAbs=relative.host||relative.pathname&&relative.pathname.charAt(0)==="/",mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],relPath=relative.pathname&&relative.pathname.split("/")||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic){result.hostname="";result.port=null;if(result.host){if(srcPath[0]==="")srcPath[0]=result.host;else srcPath.unshift(result.host)}result.host="";if(relative.protocol){relative.hostname=null;relative.port=null;if(relative.host){if(relPath[0]==="")relPath[0]=relative.host;else relPath.unshift(relative.host)}relative.host=null}mustEndAbs=mustEndAbs&&(relPath[0]===""||srcPath[0]==="")}if(isRelAbs){result.host=relative.host||relative.host===""?relative.host:result.host;result.hostname=relative.hostname||relative.hostname===""?relative.hostname:result.hostname;result.search=relative.search;result.query=relative.query;srcPath=relPath}else if(relPath.length){if(!srcPath)srcPath=[];srcPath.pop();srcPath=srcPath.concat(relPath);result.search=relative.search;result.query=relative.query}else if(!isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}result.search=relative.search;result.query=relative.query;if(!isNull(result.pathname)||!isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.href=result.format();return result}if(!srcPath.length){result.pathname=null;if(result.search){result.path="/"+result.search}else{result.path=null}result.href=result.format();return result}var last=srcPath.slice(-1)[0];var hasTrailingSlash=(result.host||relative.host)&&(last==="."||last==="..")||last==="";var up=0;for(var i=srcPath.length;i>=0;i--){last=srcPath[i];if(last=="."){srcPath.splice(i,1)}else if(last===".."){srcPath.splice(i,1);up++}else if(up){srcPath.splice(i,1);up--}}if(!mustEndAbs&&!removeAllDots){for(;up--;up){srcPath.unshift("..")}}if(mustEndAbs&&srcPath[0]!==""&&(!srcPath[0]||srcPath[0].charAt(0)!=="/")){srcPath.unshift("")}if(hasTrailingSlash&&srcPath.join("/").substr(-1)!=="/"){srcPath.push("")}var isAbsolute=srcPath[0]===""||srcPath[0]&&srcPath[0].charAt(0)==="/";if(psychotic){result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"";var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}mustEndAbs=mustEndAbs||result.host&&srcPath.length;if(mustEndAbs&&!isAbsolute){srcPath.unshift("")}if(!srcPath.length){result.pathname=null;result.path=null}else{result.pathname=srcPath.join("/")}if(!isNull(result.pathname)||!isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.auth=relative.auth||result.auth;result.slashes=result.slashes||relative.slashes;result.href=result.format();return result};Url.prototype.parseHost=function(){var host=this.host;var port=portPattern.exec(host);if(port){port=port[0];if(port!==":"){this.port=port.substr(1)}host=host.substr(0,host.length-port.length)}if(host)this.hostname=host};function isString(arg){return typeof arg==="string"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isNull(arg){return arg===null}function isNullOrUndefined(arg){return arg==null}},{punycode:421,querystring:424}],426:[function(require,module,exports){"use strict";(function(DOMParser){var proto=DOMParser.prototype,nativeParse=proto.parseFromString;proto.parseFromString=function(markup,type){if(/^\s*text\/html\s*(?:;|$)/i.test(type)){var doc=document.implementation.createHTMLDocument("");if(markup.toLowerCase().indexOf("<!doctype")>-1){doc.documentElement.innerHTML=markup}else{doc.body.innerHTML=markup}return doc}else{return nativeParse.apply(this,arguments)}}})(DOMParser);window.system_scroll=window.scroll;window.scroll=function(x,y){window.cxp.mobile.scrollTo(""+x,""+y);window.system_scroll(x,y)}},{}],427:[function(require,module,exports){"use strict";function encodeURIExtras(str){return encodeURIComponent(str).replace(/[!()*]/g,function(c){return"%"+c.charCodeAt(0).toString(16)}).replace(/[']/g,function(c){return"\\'"})}module.exports=encodeURIExtras},{}],428:[function(require,module,exports){(function(global){"use strict";var window=global.window;var document=global.document;module.exports={convertFromLeanModel:function(model){var oldModel=model;var preferences=model.preferences||[];oldModel.icons=model.icons||[];var src=preferences.src;delete preferences.src;oldModel.content={src:src,type:"text/html"};oldModel.preferences=[];Object.keys(preferences).forEach(function(key){oldModel.preferences.push({name:key,value:preferences[key]})});if(model.children){var children=model.children;oldModel.children=[];var object=this;children.forEach(function(child){var oldChild=object.convertFromLeanModel(child);oldModel.children.push(oldChild)})}return oldModel}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],429:[function(require,module,exports){
if(typeof Object.assign!="function"){Object.defineProperty(Object,"assign",{value:function assign(target,varArgs){"use strict";if(target==null){throw new TypeError("Cannot convert undefined or null to object")}var to=Object(target);for(var index=1;index<arguments.length;index++){var nextSource=arguments[index];if(nextSource!=null){for(var nextKey in nextSource){if(Object.prototype.hasOwnProperty.call(nextSource,nextKey)){to[nextKey]=nextSource[nextKey]}}}}return to},writable:true,configurable:true})}},{}],430:[function(require,module,exports){"use strict";window.b$.module("gadgets.pubsub",function(){var Class=window.b$.Class;var Channel=Class.extend(function(){this.callbacks=[]},{queue:[],subscribe:function(callback){this.callbacks.push(callback)},unsubscribe:function(callback){if(!callback){this.callbacks=[]}else{this.callbacks=this.callbacks.filter(function(fChannelCallback){return fChannelCallback!==callback})}},publish:function(message,flush){if(flush){this.flush()}this.callbacks.forEach(function(callback){callback(message)})},flush:function(){this.queue=[]}});var EventBus=Class.extend(function(){this.channels={}},{subscribe:function(channelName,callback){if(!this.channels[channelName]){this.channels[channelName]=new Channel}this.channels[channelName].subscribe(callback);window.cxp.mobile.subscribe(channelName)},unsubscribe:function(channelName,fCallback){if(this.channels[channelName]){this.channels[channelName].unsubscribe(fCallback);window.cxp.mobile.unsubscribe(channelName)}},publish:function(channelName,oMessage,flush,eventType){if(this.channels[channelName]){this.channels[channelName].publish(oMessage,flush)}oMessage=oMessage||{};eventType=eventType||"";if(eventType!=="SYSTEM"){window.cxp.mobile.publish(channelName,JSON.stringify(oMessage),eventType)}},flush:function(channelName){if(this.channels[channelName]){this.channels[channelName].flush()}}});var mainBus=new EventBus;function publish(channelName,message,flush,eventType){if(typeof flush!=="boolean"){flush=true}mainBus.publish(channelName,message,flush,eventType)}function subscribe(channelName,callback){mainBus.subscribe(channelName,callback)}function unsubscribe(channelName,callback){mainBus.unsubscribe(channelName,callback)}function flush(channelName){mainBus.flush(channelName)}function channel(channelPrefix){function getEventKey(eventName){return"[{"+channelPrefix+"}]."+eventName}var pubsubImpl=this;return{publish:function(eventName,message,flush,eventType){pubsubImpl.publish(getEventKey(eventName),message,flush,eventType)},subscribe:function(eventName,callback){pubsubImpl.subscribe(getEventKey(eventName),callback)},unsubscribe:function(eventName,callback){pubsubImpl.unsubscribe(getEventKey(eventName),callback)},flush:function(eventName){pubsubImpl.flush(getEventKey(eventName))}}}this.name="pubsub";this.publish=publish;this.subscribe=subscribe;this.unsubscribe=unsubscribe;this.flush=flush;this.channel=channel})},{}],431:[function(require,module,exports){"use strict";window.cxp=window.cxp||{};window.mobile=window.mobile||{};window.cxp.mobile=window.mobile;window.b$=window.b$||{};window.b$.portal=window.b$.portal||{};window.cxp.mobile.render=function(widgetRoot,localContextRoot,remoteContextRoot,apiRoot,portalModel,plugins,logLevel,portalName,isPage,isLeanModel,userGroups){require("./common/object-assign-polyfill");require("./common/dom-parser-polyfill");require("javascript-detect-element-resize");require("./common/pubsub");var Renderer;var isSafariOrUiWebview=/.*AppleWebKit/i.test(navigator.userAgent);if(isSafariOrUiWebview){console.info("Portal Client Mobile is rendering in iOS mode");var iosBridge=require("./platforms/ios/ios-bridge");iosBridge.enable();Renderer=require("./platforms/ios/ios-page-renderer")}else{console.info("Portal client mobile is rendering in Android mode");Renderer=require("./platforms/android/android-page-renderer")}if(isLeanModel){var converter=require("./common/lean-model-converter");portalModel=converter.convertFromLeanModel(portalModel)}window.cxp.mobile.plugins=plugins;window.b$.portal.loggedInUserGroup=userGroups;portalModel.contextItemName=portalName;var renderer=new Renderer;renderer.render(document.getElementById(widgetRoot),portalModel,window.gadgets.pubsub,{portalName:portalName,localContextRoot:decodeURI(localContextRoot),remoteContextRoot:decodeURI(remoteContextRoot),apiRoot:decodeURI(apiRoot),staticResourcesRoot:decodeURI(localContextRoot),logLevel:logLevel,isPage:isPage})};window.renderWidget=window.cxp.mobile.render},{"./common/dom-parser-polyfill":426,"./common/lean-model-converter":428,"./common/object-assign-polyfill":429,"./common/pubsub":430,"./platforms/android/android-page-renderer":435,"./platforms/ios/ios-bridge":436,"./platforms/ios/ios-page-renderer":437,"javascript-detect-element-resize":419}],432:[function(require,module,exports){"use strict";var BufferedLogStream=function(size){this.size=size||1e3;this.buffer=[];this.decoratedStreams=[]};BufferedLogStream.prototype.decorateStream=function(stream){this.decoratedStreams.push(stream)};BufferedLogStream.prototype.write=function(rec){if(this.buffer.length>=this.size){this.buffer.shift()}this.buffer.push(rec)};BufferedLogStream.prototype.flush=function(){var rec;while(rec=this.buffer.shift()){this.decoratedStreams.forEach(function(stream){stream.write(rec)})}};BufferedLogStream.prototype.clear=function(){this.buffer=[]};module.exports=BufferedLogStream},{}],433:[function(require,module,exports){"use strict";function ConsolePlainStream(opts){opts=opts||{};this.printLevel=!!opts.printLevel;this.printTimestamp=!!opts.printTimestamp}ConsolePlainStream.prototype.write=function(rec){var loggerName=rec.childName?rec.name+"/"+rec.childName:rec.name;var logMethod;if(rec.level<30){logMethod="log"}else if(rec.level<40){logMethod="info"}else if(rec.level<50){logMethod="warn"}else{logMethod="error"}function padZeros(number,len){return Array(len+1-(number+"").length).join("0")+number}function getTimestamp(){return"["+padZeros(rec.time.getHours(),2)+":"+padZeros(rec.time.getMinutes(),2)+":"+padZeros(rec.time.getSeconds(),2)+":"+padZeros(rec.time.getMilliseconds(),4)+"]"}var timestamp=this.printTimestamp?getTimestamp()+" ":"";var level=this.printLevel?rec.levelName.toUpperCase()+": ":"";console[logMethod](timestamp+level+loggerName+": "+rec.msg)};module.exports=ConsolePlainStream},{}],434:[function(require,module,exports){(function(global){"use strict";var encodeURIExtras=require("../common/encode-uri-extras");var document=global.document;var IFrameBridgeLogStream=function(){};IFrameBridgeLogStream.prototype.write=function(rec){var iframe=document.createElement("IFRAME");var msg=encodeURIExtras(rec.msg+" ("+rec.time+")");iframe.setAttribute("src","log://?type="+rec.levelName+"&msg="+msg);document.documentElement.appendChild(iframe);iframe.parentNode.removeChild(iframe);iframe=null};module.exports=IFrameBridgeLogStream}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../common/encode-uri-extras":427}],435:[function(require,module,exports){"use strict";var PageRenderer=require("../../render/page-renderer");var ConsolePlainLogStream=require("../../logging/console-plain-log-stream");var AndroidPageRenderer=function(){PageRenderer.call(this)};AndroidPageRenderer.prototype=Object.create(PageRenderer.prototype);AndroidPageRenderer.prototype._createLogStreams=function(logLevel){return[{level:logLevel,stream:new ConsolePlainLogStream}]};AndroidPageRenderer.prototype._renderForPlatform=function(widgetModel,renderer,rootEl){renderer.start(widgetModel,rootEl).then(function(details){var message="Item tree rendered in "+details.time+"ms",resizeElement=document.getElementsByTagName("html")[0],resizeCallback=function(){window.cxp.mobile.resize(resizeElement.scrollHeight)};window.addResizeListener(resizeElement,resizeCallback);console.log(message);window.cxp.mobile.itemLoaded()}).catch(function(err){console.log(err)})};module.exports=AndroidPageRenderer},{"../../logging/console-plain-log-stream":433,"../../render/page-renderer":440}],436:[function(require,module,exports){(function(global){"use strict";var encodeURIExtras=require("../../common/encode-uri-extras");var window=global.window;var document=global.document;module.exports={enable:function(){if(window.XMLHttpRequest){(function(__send){try{XMLHttpRequest.prototype.send=function(data){this.setRequestHeader("bb.nsurlrequest.webview","true");__send.call(this,data)}}catch(error){}})(XMLHttpRequest.prototype.send)}function addIframe(src){var iframe=document.createElement("IFRAME");iframe.setAttribute("src",src);document.documentElement.appendChild(iframe);iframe.parentNode.removeChild(iframe);iframe=null}function loaded(time){addIframe("bb-loaded://?time="+time)}function reload(){addIframe("bb-reload://")}function resizeTo(width,height){addIframe("bb-resize://?w="+width+"&h="+height)}function scrollTo(x,y){addIframe("bb-scroll://?x="+x+"&y="+y)}function publish(event,payload,eventType){addIframe("bb-publish://?event="+encodeURIExtras(event)+"&type="+encodeURIExtras(eventType)+"&payload="+encodeURIExtras(payload))}function subscribe(event){addIframe("bb-subscribe://?event="+encodeURIExtras(event))}function unsubscribe(event){addIframe("bb-unsubscribe://?event="+encodeURIExtras(event))}function executePlugin(){if(arguments.length===0){return}var args=[];Array.prototype.push.apply(args,arguments);var plugin=args.shift();var method=args.shift();var params=args;for(var i=0;i<params.length;i++){params[i]=encodeURIExtras(params[i])}addIframe("bb-plugin://?plugin="+encodeURIExtras(plugin)+"&method="+encodeURIExtras(method)+"&params="+params.join("&params="))}function callPlugin(pluginName,methodName,args,resolve,reject){var _callbackId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)});var eventName=[pluginName,methodName,_callbackId].join(".");var _unsubscribe=function(){window.gadgets.pubsub.unsubscribe("plugin.success."+eventName,_success);window.gadgets.pubsub.unsubscribe("plugin.error."+eventName,_error)};var _success=function(response){if(!response.keep){_unsubscribe()}if(resolve){resolve(response.data)}};var _error=function(response){if(!response.keep){_unsubscribe()}if(reject){reject(response.data)}};for(var i=0;i<args.length;i++){var arg=args[i];if(typeof arg==="object"){args[i]=JSON.stringify(arg)}}window.gadgets.pubsub.subscribe("plugin.success."+eventName,_success);window.gadgets.pubsub.subscribe("plugin.error."+eventName,_error);executePlugin.apply(window.cxp.mobile,[pluginName,methodName,_callbackId].concat(args));return _callbackId}window.cxp.mobile={loaded:loaded,reload:reload,resizeTo:resizeTo,scrollTo:scrollTo,publish:publish,subscribe:subscribe,unsubscribe:unsubscribe,callPlugin:callPlugin}}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../../common/encode-uri-extras":427}],437:[function(require,module,exports){"use strict";var PageRenderer=require("../../render/page-renderer");var ConsolePlainLogStream=require("../../logging/console-plain-log-stream");var IFrameBridgeLogStream=require("../../logging/iframe-bridge-log-stream");var BufferedLogStream=require("../../logging/buffered-log-stream");var IOSPageRenderer=function(){PageRenderer.call(this)};IOSPageRenderer.prototype=Object.create(PageRenderer.prototype);IOSPageRenderer.prototype._createLogStreams=function(logLevel){var consoleStream=new ConsolePlainLogStream({printTimestamp:true,printLevel:true});var bufferedLogStream=new BufferedLogStream;bufferedLogStream.decorateStream(consoleStream);window.bufferedLogStream=bufferedLogStream;var iframeBridgeLogStream=new IFrameBridgeLogStream;return[{level:logLevel,stream:iframeBridgeLogStream},{level:logLevel,stream:consoleStream},{level:logLevel,stream:bufferedLogStream}]};IOSPageRenderer.prototype._renderForPlatform=function(widgetModel,renderer,rootEl){var page=document.getElementsByTagName("html")[0];window.addResizeListener(page,function(){window.cxp.mobile.resizeTo(page.scrollWidth,page.scrollHeight)});renderer.start(widgetModel,rootEl).then(function(details){window.cxp.mobile.loaded(details.time);window.cxp.mobile.resizeTo(page.scrollWidth,page.scrollHeight);var message="Widget-Engine: Item tree rendered in "+details.time+"ms";console.log(message)}).catch(function(err){console.log(err)})};module.exports=IOSPageRenderer},{"../../logging/buffered-log-stream":432,"../../logging/console-plain-log-stream":433,"../../logging/iframe-bridge-log-stream":434,"../../render/page-renderer":440}],438:[function(require,module,exports){"use strict";module.exports=function(featureList){featureList=featureList||[];return{name:"add-feature-plugin",postRead:function(widgetModel){if(featureList.length===0){return widgetModel}if(!Array.isArray(widgetModel.features)){widgetModel.features=[]}featureList.forEach(function(featureName){var widgetModelAlreadyHasFeature=widgetModel.features.some(function(widgetFeature){return widgetFeature.name===featureName});if(!widgetModelAlreadyHasFeature){widgetModel.features.push({name:featureName,required:false})}});return widgetModel}}}},{}],439:[function(require,module,exports){"use strict";module.exports=function addSupportToAccessChildren(){return{name:"expose-children-plugin",preRender:function(widgetInstance,widgetRenderer,widgetModel){widgetInstance.children=widgetModel.children?widgetModel.children.map(function(child){return{id:child.id,name:child.name}}):[];return widgetInstance}}}},{}],440:[function(require,module,exports){(function(global){"use strict";var window=global.window||{};if(!global.window){global.window=window}var cxpWebApis=require("cxp-web-apis");var addFeaturePlugin=require("../plugins/add-feature-plugin");var exposeChildrenPlugin=require("../plugins/expose-children-plugin");var CSRF_TOKEN_COOKIE_NAME="bbCSRF";var CSRF_TOKEN_HEADER_NAME=CSRF_TOKEN_COOKIE_NAME;function getPreferenceValue(preferences,preferenceName){if(preferences&&preferences.length){for(var i=0;i<preferences.length;i++){if(preferences[i].name===preferenceName){return preferences[i].value}}}return null}var PageRenderer=function(opts){};PageRenderer.prototype.render=function(rootEl,model,pubsub,opts){opts=opts||{};var logLevel=opts.logLevel||"warn";var localContextRoot=opts.localContextRoot||"";var remoteContextRoot=opts.remoteContextRoot||"";var apiRoot=opts.apiRoot||"";var staticResourcesRoot=opts.staticResourcesRoot||"";var portalName=opts.portalName||"anonymous-portal";var isPage=opts.isPage||false;var config=cxpWebApis.createConfiguration({logStreams:this._createLogStreams(logLevel)});config.set("compat",true);config.set("fullConfigReplacement",true);config.set("portalName",portalName);config.set("contextRoot",localContextRoot);config.set("remoteContextRoot",remoteContextRoot);config.set("apiRoot",apiRoot);config.set("staticResourcesRoot",staticResourcesRoot);var csrfTokenCookieValue=null;if(csrfTokenCookieValue){config.set("csrfToken",{name:CSRF_TOKEN_HEADER_NAME,value:csrfTokenCookieValue})}var renderer=cxpWebApis.getRenderer(config);renderer.addPlugin(exposeChildrenPlugin());var cxpFeature={name:"cxp",config:config,render:renderer,model:cxpWebApis.getModel(config)};renderer.addPlugin(addFeaturePlugin([cxpFeature.name]));renderer.addFeature(cxpFeature);renderer.addFeature(pubsub);var widgetModel=model;if(isPage){widgetModel=model.children;var locale=getPreferenceValue(model.preferences,"locale");for(var i=0;i<widgetModel.length;i++){widgetModel[i].contextItemName=model.contextItemName;var widgetLocale=getPreferenceValue(widgetModel[i].preferences,"locale");if(locale&&!widgetLocale){widgetModel[i].preferences.push({name:"locale",value:locale})}}}this._renderForPlatform(widgetModel,renderer,rootEl)};PageRenderer.prototype._createLogStreams=function(opts){throw new Error("PageRenderer#_createLogStreams must be overridden.")};PageRenderer.prototype._renderForPlatform=function(model,renderer,rootEl){throw new Error("PageRenderer#_renderForPlatform must be overridden.")};module.exports=PageRenderer}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../plugins/add-feature-plugin":438,"../plugins/expose-children-plugin":439,"cxp-web-apis":392}]},{},[431]);
//# sourceMappingURL=web-sdk-mobile.min.js.map